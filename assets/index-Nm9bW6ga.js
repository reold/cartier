var kt=Object.defineProperty;var $t=(t,e,n)=>e in t?kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Te=(t,e,n)=>($t(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function q(){}const ct=t=>t;function De(t,e){for(const n in e)t[n]=e[n];return t}function ut(t){return t()}function Ke(){return Object.create(null)}function oe(t){t.forEach(ut)}function Re(t){return typeof t=="function"}function ce(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ce;function he(t,e){return t===e?!0:(Ce||(Ce=document.createElement("a")),Ce.href=e,t===Ce.href)}function xt(t){return Object.keys(t).length===0}function jt(t,...e){if(t==null){for(const r of e)r(void 0);return q}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Oe(t,e,n){t.$$.on_destroy.push(jt(e,n))}function Mt(t,e,n,r){if(t){const l=ft(t,e,n,r);return t[0](l)}}function ft(t,e,n,r){return t[1]&&r?De(n.ctx.slice(),t[1](r(e))):n.ctx}function Ct(t,e,n,r){if(t[2]&&r){const l=t[2](r(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const s=[],c=Math.max(e.dirty.length,l.length);for(let o=0;o<c;o+=1)s[o]=e.dirty[o]|l[o];return s}return e.dirty|l}return e.dirty}function Lt(t,e,n,r,l,s){if(l){const c=ft(e,n,r,s);t.p(c,l)}}function St(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function ee(t,e,n){return t.set(n),e}function At(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const dt=typeof window<"u";let pt=dt?()=>window.performance.now():()=>Date.now(),Ve=dt?t=>requestAnimationFrame(t):q;const ge=new Set;function gt(t){ge.forEach(e=>{e.c(t)||(ge.delete(e),e.f())}),ge.size!==0&&Ve(gt)}function mt(t){let e;return ge.size===0&&Ve(gt),{promise:new Promise(n=>{ge.add(e={c:t,f:n})}),abort(){ge.delete(e)}}}function f(t,e){t.appendChild(e)}function ht(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Et(t){const e=m("style");return e.textContent="/* empty */",It(ht(t),e),e.sheet}function It(t,e){return f(t.head||t,e),e.sheet}function j(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function _t(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function U(t){return document.createTextNode(t)}function C(){return U(" ")}function We(){return U("")}function te(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function i(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Pt(t){return Array.from(t.childNodes)}function le(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ye(t,e){t.value=e??""}function Se(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Ge(t,e,n){t.classList.toggle(e,!!n)}function Ot(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}const Ae=new Map;let Ee=0;function zt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Bt(t,e){const n={stylesheet:Et(e),rules:{}};return Ae.set(t,n),n}function Je(t,e,n,r,l,s,c,o=0){const u=16.666/r;let a=`{
`;for(let v=0;v<=1;v+=u){const _=e+(n-e)*s(v);a+=v*100+`%{${c(_,1-_)}}
`}const g=a+`100% {${c(n,1-n)}}
}`,d=`__svelte_${zt(g)}_${o}`,h=ht(t),{stylesheet:w,rules:p}=Ae.get(h)||Bt(h,t);p[d]||(p[d]=!0,w.insertRule(`@keyframes ${d} ${g}`,w.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?`${b}, `:""}${d} ${r}ms linear ${l}ms 1 both`,Ee+=1,d}function Tt(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),l=n.length-r.length;l&&(t.style.animation=r.join(", "),Ee-=l,Ee||Ut())}function Ut(){Ve(()=>{Ee||(Ae.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&x(e)}),Ae.clear())})}let je;function $e(t){je=t}function Ht(){if(!je)throw new Error("Function called outside component initialization");return je}function wt(t){Ht().$$.on_mount.push(t)}const pe=[],Ie=[];let me=[];const Qe=[],Dt=Promise.resolve();let Ne=!1;function Nt(){Ne||(Ne=!0,Dt.then(vt))}function se(t){me.push(t)}const Ue=new Set;let fe=0;function vt(){if(fe!==0)return;const t=je;do{try{for(;fe<pe.length;){const e=pe[fe];fe++,$e(e),qt(e.$$)}}catch(e){throw pe.length=0,fe=0,e}for($e(null),pe.length=0,fe=0;Ie.length;)Ie.pop()();for(let e=0;e<me.length;e+=1){const n=me[e];Ue.has(n)||(Ue.add(n),n())}me.length=0}while(pe.length);for(;Qe.length;)Qe.pop()();Ne=!1,Ue.clear(),$e(t)}function qt(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(se)}}function Ft(t){const e=[],n=[];me.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),me=e}let ke;function Rt(){return ke||(ke=Promise.resolve(),ke.then(()=>{ke=null})),ke}function He(t,e,n){t.dispatchEvent(Ot(`${e?"intro":"outro"}${n}`))}const Le=new Set;let ne;function ze(){ne={r:0,c:[],p:ne}}function Be(){ne.r||oe(ne.c),ne=ne.p}function H(t,e){t&&t.i&&(Le.delete(t),t.i(e))}function Y(t,e,n,r){if(t&&t.o){if(Le.has(t))return;Le.add(t),ne.c.push(()=>{Le.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const Vt={duration:0};function ie(t,e,n,r){let s=e(t,n,{direction:"both"}),c=r?0:1,o=null,u=null,a=null,g;function d(){a&&Tt(t,a)}function h(p,b){const v=p.b-c;return b*=Math.abs(v),{a:c,b:p.b,d:v,duration:b,start:p.start,end:p.start+b,group:p.group}}function w(p){const{delay:b=0,duration:v=300,easing:_=ct,tick:I=q,css:A}=s||Vt,E={start:pt()+b,b:p};p||(E.group=ne,ne.r+=1),"inert"in t&&(p?g!==void 0&&(t.inert=g):(g=t.inert,t.inert=!0)),o||u?u=E:(A&&(d(),a=Je(t,c,p,v,b,_,A)),p&&I(0,1),o=h(E,v),se(()=>He(t,p,"start")),mt(L=>{if(u&&L>u.start&&(o=h(u,v),u=null,He(t,o.b,"start"),A&&(d(),a=Je(t,c,o.b,o.duration,0,_,s.css))),o){if(L>=o.end)I(c=o.b,1-c),He(t,o.b,"end"),u||(o.b?d():--o.group.r||oe(o.group.c)),o=null;else if(L>=o.start){const z=L-o.start;c=o.a+o.d*_(z/o.duration),I(c,1-c)}}return!!(o||u)}))}return{run(p){Re(s)?Rt().then(()=>{s=s({direction:p?"in":"out"}),w(p)}):w(p)},end(){d(),o=u=null}}}function Pe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Me(t){t&&t.c()}function we(t,e,n){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),se(()=>{const s=t.$$.on_mount.map(ut).filter(Re);t.$$.on_destroy?t.$$.on_destroy.push(...s):oe(s),t.$$.on_mount=[]}),l.forEach(se)}function ve(t,e){const n=t.$$;n.fragment!==null&&(Ft(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Wt(t,e){t.$$.dirty[0]===-1&&(pe.push(t),Nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function be(t,e,n,r,l,s,c=null,o=[-1]){const u=je;$e(t);const a=t.$$={fragment:null,ctx:[],props:s,update:q,not_equal:l,bound:Ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ke(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};c&&c(a.root);let g=!1;if(a.ctx=n?n(t,e.props||{},(d,h,...w)=>{const p=w.length?w[0]:h;return a.ctx&&l(a.ctx[d],a.ctx[d]=p)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](p),g&&Wt(t,d)),h}):[],a.update(),g=!0,oe(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const d=Pt(e.target);a.fragment&&a.fragment.l(d),d.forEach(x)}else a.fragment&&a.fragment.c();e.intro&&H(t.$$.fragment),we(t,e.target,e.anchor),vt()}$e(u)}class ye{constructor(){Te(this,"$$");Te(this,"$$set")}$destroy(){ve(this,1),this.$destroy=q}$on(e,n){if(!Re(n))return q;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!xt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Zt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Zt);window["cartier-server-url"]="https://reold-cartier.glitch.me";const re={getRoot:async()=>await(await fetch(`${window["cartier-server-url"]}/`)).json(),getUserInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/user?username=${t}`)).json(),getPlaylistInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/playlist?id=${t}`)).json(),getDownloadPlaylist:async t=>await(await fetch(`${window["cartier-server-url"]}/download?link=${t}`)).json(),getDownloadStatus:async t=>await(await fetch(`${window["cartier-server-url"]}/status?key=${t}`)).json(),getDownloadTrack:async(t,e="",n=!1)=>await(await fetch(`${window["cartier-server-url"]}/track?link=${t}&key=${e}&create=${n}`)).json(),getStreamPlaylist:async t=>{let e=await fetch(`${window["cartier-server-url"]}/stream?key=${t}`);return[await e.ok,await e.blob()]}},de=[];function Ze(t,e=q){let n;const r=new Set;function l(o){if(ce(t,o)&&(t=o,n)){const u=!de.length;for(const a of r)a[1](),de.push(a,t);if(u){for(let a=0;a<de.length;a+=2)de[a][0](de[a+1]);de.length=0}}}function s(o){l(o(t))}function c(o,u=q){const a=[o,u];return r.add(a),r.size===1&&(n=e(l,s)||q),o(t),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:l,update:s,subscribe:c}}function bt(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Kt(t){const e=t-1;return e*e*e+1}function Xe(t,{delay:e=0,duration:n=400,easing:r=bt,amount:l=5,opacity:s=0}={}){const c=getComputedStyle(t),o=+c.opacity,u=c.filter==="none"?"":c.filter,a=o*(1-s),[g,d]=At(l);return{delay:e,duration:n,easing:r,css:(h,w)=>`opacity: ${o-a*w}; filter: ${u} blur(${w*g}${d});`}}function _e(t,{delay:e=0,duration:n=400,easing:r=Kt,axis:l="y"}={}){const s=getComputedStyle(t),c=+s.opacity,o=l==="y"?"height":"width",u=parseFloat(s[o]),a=l==="y"?["top","bottom"]:["left","right"],g=a.map(_=>`${_[0].toUpperCase()}${_.slice(1)}`),d=parseFloat(s[`padding${g[0]}`]),h=parseFloat(s[`padding${g[1]}`]),w=parseFloat(s[`margin${g[0]}`]),p=parseFloat(s[`margin${g[1]}`]),b=parseFloat(s[`border${g[0]}Width`]),v=parseFloat(s[`border${g[1]}Width`]);return{delay:e,duration:n,easing:r,css:_=>`overflow: hidden;opacity: ${Math.min(_*20,1)*c};${o}: ${_*u}px;padding-${a[0]}: ${_*d}px;padding-${a[1]}: ${_*h}px;margin-${a[0]}: ${_*w}px;margin-${a[1]}: ${_*p}px;border-${a[0]}-width: ${_*b}px;border-${a[1]}-width: ${_*v}px;`}}function et(t){let e,n,r,l;const s=t[2].default,c=Mt(s,t,t[1],null);return{c(){e=m("div"),n=m("div"),c&&c.c(),i(n,"class","bg-gray-950 p-2 rounded-md ring-1 ring-zinc-500 max-w-[90vw]"),i(e,"class","absolute top-0 left-0 w-full h-full backdrop-blur-md flex flex-col items-center justify-center text-center text-xs")},m(o,u){j(o,e,u),f(e,n),c&&c.m(n,null),l=!0},p(o,u){c&&c.p&&(!l||u&2)&&Lt(c,s,o,o[1],l?Ct(s,o[1],u,null):St(o[1]),null)},i(o){l||(H(c,o),o&&se(()=>{l&&(r||(r=ie(e,Xe,{duration:500},!0)),r.run(1))}),l=!0)},o(o){Y(c,o),o&&(r||(r=ie(e,Xe,{duration:500},!1)),r.run(0)),l=!1},d(o){o&&x(e),c&&c.d(o),o&&r&&r.end()}}}function Yt(t){let e,n,r=!t[0]&&et(t);return{c(){r&&r.c(),e=We()},m(l,s){r&&r.m(l,s),j(l,e,s),n=!0},p(l,[s]){l[0]?r&&(ze(),Y(r,1,1,()=>{r=null}),Be()):r?(r.p(l,s),s&1&&H(r,1)):(r=et(l),r.c(),H(r,1),r.m(e.parentNode,e))},i(l){n||(H(r),n=!0)},o(l){Y(r),n=!1},d(l){l&&x(e),r&&r.d(l)}}}function Gt(t,e,n){let{$$slots:r={},$$scope:l}=e,{hidden:s=!1}=e;return t.$$set=c=>{"hidden"in c&&n(0,s=c.hidden),"$$scope"in c&&n(1,l=c.$$scope)},[s,l,r]}class Jt extends ye{constructor(e){super(),be(this,e,Gt,Yt,ce,{hidden:0})}}function tt(t){let e,n;return{c(){e=K("svg"),n=K("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","aspect-square w-[1.2em] animate-spin inline")},m(r,l){j(r,e,l),f(e,n)},d(r){r&&x(e)}}}function Qt(t){let e,n,r,l,s,c,o=t[0].step+"",u,a=t[0].is&&tt();return{c(){e=m("h1"),e.textContent="Waking up servers!",n=C(),r=m("p"),r.textContent=`Our servers take a little break every 5 minutes when things quiet down.
    We're in the process of waking them up for you. It's automatic, so no need
    to stress!`,l=C(),s=m("p"),a&&a.c(),c=C(),u=U(o),i(e,"class","text-xl"),i(r,"class","text-xs text-gray-500 inline"),i(s,"class","inline"),Ge(s,"text-green-500",!t[0].is)},m(g,d){j(g,e,d),j(g,n,d),j(g,r,d),j(g,l,d),j(g,s,d),a&&a.m(s,null),f(s,c),f(s,u)},p(g,d){g[0].is?a||(a=tt(),a.c(),a.m(s,c)):a&&(a.d(1),a=null),d&1&&o!==(o=g[0].step+"")&&le(u,o),d&1&&Ge(s,"text-green-500",!g[0].is)},d(g){g&&(x(e),x(n),x(r),x(l),x(s)),a&&a.d()}}}function Xt(t){let e,n;return e=new Jt({props:{hidden:!t[0].is,$$slots:{default:[Qt]},$$scope:{ctx:t}}}),{c(){Me(e.$$.fragment)},m(r,l){we(e,r,l),n=!0},p(r,[l]){const s={};l&1&&(s.hidden=!r[0].is),l&5&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(H(e.$$.fragment,r),n=!0)},o(r){Y(e.$$.fragment,r),n=!1},d(r){ve(e,r)}}}function en(t,e,n){let r;const l=Ze({step:"trying to make contact",is:!0});return Oe(t,l,s=>n(0,r=s)),wt(()=>{ee(l,r.step="waking up servers",r),re.getRoot().then(s=>{ee(l,r.is=!1,r),ee(l,r.step="servers are running!",r)}).catch(s=>{X(`unable to reach servers. err: ${s}`),ee(l,r.step="servers unreachable (reload?)",r)})}),[r,l]}class tn extends ye{constructor(e){super(),be(this,e,en,Xt,ce,{})}}function nn(t){let e,n,r,l,s,c,o,u,a,g,d,h,w,p,b,v,_,I,A,E,L,z,D,T,B,F;return e=new tn({}),{c(){Me(e.$$.fragment),n=C(),r=m("div"),l=m("div"),s=m("p"),s.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path></svg>
      fill-in to continue`,c=C(),o=m("div"),u=m("div"),a=m("input"),g=C(),d=m("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline rounded-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg>',h=C(),w=m("p"),w.innerHTML='you can copy your <svg xmlns="http://www.w3.org/2000/svg" class="w-[1em] inline" viewBox="-33.4974 -55.829 290.3108 334.974"><path d="M177.707 98.987c-35.992-21.375-95.36-23.34-129.719-12.912-5.519 1.674-11.353-1.44-13.024-6.958-1.672-5.521 1.439-11.352 6.96-13.029 39.443-11.972 105.008-9.66 146.443 14.936 4.964 2.947 6.59 9.356 3.649 14.31-2.944 4.963-9.359 6.6-14.31 3.653m-1.178 31.658c-2.525 4.098-7.883 5.383-11.975 2.867-30.005-18.444-75.762-23.788-111.262-13.012-4.603 1.39-9.466-1.204-10.864-5.8a8.717 8.717 0 015.805-10.856c40.553-12.307 90.968-6.347 125.432 14.833 4.092 2.52 5.38 7.88 2.864 11.968m-13.663 30.404a6.954 6.954 0 01-9.569 2.316c-26.22-16.025-59.223-19.644-98.09-10.766a6.955 6.955 0 01-8.331-5.232 6.95 6.95 0 015.233-8.334c42.533-9.722 79.017-5.538 108.448 12.446a6.96 6.96 0 012.31 9.57M111.656 0C49.992 0 0 49.99 0 111.656c0 61.672 49.992 111.66 111.657 111.66 61.668 0 111.659-49.988 111.659-111.66C223.316 49.991 173.326 0 111.657 0" fill="#1DB954"></path></svg>Spotify profile link from your account page',p=C(),b=m("div"),v=m("label"),_=m("input"),I=C(),A=m("span"),A.textContent="persist",E=C(),L=m("button"),L.textContent="continue",z=C(),D=m("details"),D.innerHTML=`<summary class="font-bold mb-2">Cartier Manager: Free Spotify Playlist Downloader</summary> <p class="mb-4">Mobile-friendly, free-to-use Spotify playlist downloader. Share your
      Spotify profile link to effortlessly download all your public playlists.</p> <p>Powered by <code>spotify-dl</code> on our servers, Cartier finds and downloads
      songs from YouTube based on Spotify data.</p>`,i(s,"class","text-2xl"),i(a,"type","text"),i(a,"class","w-full"),i(a,"placeholder","type Spotify profile link"),i(a,"autocomplete","url"),i(a,"aria-label","type spotify profile link"),i(d,"class","bg-zinc-500"),i(d,"aria-label","paste from clipboard"),i(u,"class","w-full flex flex-row items-center justify-center space-x-2"),i(w,"class","text-xs"),i(o,"class","flex flex-col items-center justify-center"),i(_,"type","checkbox"),i(_,"class","inline"),i(A,"class","align-middle"),i(v,"for","persisting userid"),i(v,"class","text-base flex flex-row space-x-2 bg-gray-950 p-3 rounded-md"),i(L,"class","hover:scale-110"),i(b,"class","flex flex-row items-center justify-center space-x-3"),i(l,"class","flex flex-col items-center text-center justify-center bg-zinc-950/50 ring-1 ring-zinc-500 rounded-md w-11/12 space-y-7 p-3"),i(D,"class","text-sm w-11/12"),i(r,"class","flex flex-col justify-center items-center w-full h-full")},m(P,Z){we(e,P,Z),j(P,n,Z),j(P,r,Z),f(r,l),f(l,s),f(l,c),f(l,o),f(o,u),f(u,a),Ye(a,t[0]),f(u,g),f(u,d),f(o,h),f(o,w),f(l,p),f(l,b),f(b,v),f(v,_),_.checked=t[1],f(v,I),f(v,A),f(b,E),f(b,L),f(r,z),f(r,D),T=!0,B||(F=[te(a,"input",t[5]),te(d,"click",t[2]),te(_,"change",t[6]),te(L,"click",t[3])],B=!0)},p(P,[Z]){Z&1&&a.value!==P[0]&&Ye(a,P[0]),Z&2&&(_.checked=P[1])},i(P){T||(H(e.$$.fragment,P),T=!0)},o(P){Y(e.$$.fragment,P),T=!1},d(P){P&&(x(n),x(r)),ve(e,P),B=!1,oe(F)}}}function rn(t,e,n){wt(()=>{const g=localStorage.getItem("cartier-userid");g&&(X("performing auto-login",!0),r(g))});let{handleUsername:r}=e,l="",s=!0;const c=async()=>{navigator.clipboard.readText&&n(0,l=await navigator.clipboard.readText())},o=()=>{let g;try{g=new URL(l)}catch{n(0,l="");return}const d=g.pathname.split("/")[2];s&&(localStorage.setItem("cartier-userid",d),X("login information saved!")),r(d)};function u(){l=this.value,n(0,l)}function a(){s=this.checked,n(1,s)}return t.$$set=g=>{"handleUsername"in g&&n(4,r=g.handleUsername)},[l,s,c,o,r,u,a]}class ln extends ye{constructor(e){super(),be(this,e,rn,nn,ce,{handleUsername:4})}}function nt(t){return Object.prototype.toString.call(t)==="[object Date]"}function qe(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((l,s)=>qe(t[s],l));return l=>r.map(s=>s(l))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(nt(t)&&nt(e)){t=t.getTime(),e=e.getTime();const s=e-t;return c=>new Date(t+c*s)}const r=Object.keys(e),l={};return r.forEach(s=>{l[s]=qe(t[s],e[s])}),s=>{const c={};return r.forEach(o=>{c[o]=l[o](s)}),c}}if(n==="number"){const r=e-t;return l=>t+l*r}throw new Error(`Cannot interpolate ${n} values`)}function sn(t,e={}){const n=Ze(t);let r,l=t;function s(c,o){if(t==null)return n.set(t=c),Promise.resolve();l=c;let u=r,a=!1,{delay:g=0,duration:d=400,easing:h=ct,interpolate:w=qe}=De(De({},e),o);if(d===0)return u&&(u.abort(),u=null),n.set(t=l),Promise.resolve();const p=pt()+g;let b;return r=mt(v=>{if(v<p)return!0;a||(b=w(t,c),typeof d=="function"&&(d=d(t,c)),a=!0),u&&(u.abort(),u=null);const _=v-p;return _>d?(n.set(t=c),!1):(n.set(t=b(h(_/d))),!0)}),r.promise}return{set:s,update:(c,o)=>s(c(l,t),o),subscribe:n.subscribe}}function rt(t,e,n){const r=t.slice();return r[0]=e[n],r}function on(t){let e,n;return{c(){e=K("svg"),n=K("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-[10vh] h-[10vh]")},m(r,l){j(r,e,l),f(e,n)},p:q,d(r){r&&x(e)}}}function an(t){let e,n;return{c(){e=m("img"),i(e,"loading","lazy"),he(e.src,n=t[0].images[0].url)||i(e,"src",n),i(e,"class","rounded-full max-h-[10vh] shadow-black shadow-lg ring-1 ring-black"),i(e,"alt","playlist's cover")},m(r,l){j(r,e,l)},p(r,l){l&1&&!he(e.src,n=r[0].images[0].url)&&i(e,"src",n)},d(r){r&&x(e)}}}function cn(t){let e,n;return{c(){e=K("svg"),n=K("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","4"),i(e,"stroke","currentColor"),i(e,"class","w-[1.2em] text-xs aspect-square")},m(r,l){j(r,e,l),f(e,n)},d(r){r&&x(e)}}}function un(t){let e,n;return{c(){e=K("svg"),n=K("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","m4.5 15.75 7.5-7.5 7.5 7.5"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","3"),i(e,"stroke","currentColor"),i(e,"class","w-[1.2em] aspect-square text-xs")},m(r,l){j(r,e,l),f(e,n)},d(r){r&&x(e)}}}function fn(t){let e;return{c(){e=U("download")},m(n,r){j(n,e,r)},p:q,d(n){n&&x(e)}}}function dn(t){let e;return{c(){e=U("downloaded")},m(n,r){j(n,e,r)},p:q,d(n){n&&x(e)}}}function pn(t){let e,n,r,l;function s(u,a){return u[3].stage=="downloading"?mn:gn}let c=s(t),o=c(t);return{c(){e=K("svg"),n=K("path"),r=C(),o.c(),l=We(),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-4 h-4 inline animate-spin")},m(u,a){j(u,e,a),f(e,n),j(u,r,a),o.m(u,a),j(u,l,a)},p(u,a){c!==(c=s(u))&&(o.d(1),o=c(u),o&&(o.c(),o.m(l.parentNode,l)))},d(u){u&&(x(e),x(r),x(l)),o.d(u)}}}function gn(t){let e;return{c(){e=U("converting")},m(n,r){j(n,e,r)},d(n){n&&x(e)}}}function mn(t){let e;return{c(){e=U("downloading")},m(n,r){j(n,e,r)},d(n){n&&x(e)}}}function lt(t){let e,n,r;return{c(){e=m("button"),e.textContent="save",i(e,"class","text-xs p-1")},m(l,s){j(l,e,s),n||(r=te(e,"click",t[8]),n=!0)},p:q,d(l){l&&x(e),n=!1,r()}}}function st(t){let e,n,r,l=t[1].tracks.total+"",s,c,o,u,a,g=Pe(t[1].tracks.items),d=[];for(let h=0;h<g.length;h+=1)d[h]=it(rt(t,g,h));return{c(){e=m("div"),n=m("div"),r=m("div"),s=U(l),c=U(" tracks"),o=C();for(let h=0;h<d.length;h+=1)d[h].c();i(r,"class","bg-zinc-950 rounded-full text-white p-2"),i(n,"class","overflow-hidden overflow-x-scroll flex flex-row items-center space-x-2 p-1 relative"),i(e,"class","col-span-4 bg-zinc-500/10 rounded-md mx-2 text-xs flex flex-row justify-center")},m(h,w){j(h,e,w),f(e,n),f(n,r),f(r,s),f(r,c),f(n,o);for(let p=0;p<d.length;p+=1)d[p]&&d[p].m(n,null);a=!0},p(h,w){if((!a||w&2)&&l!==(l=h[1].tracks.total+"")&&le(s,l),w&10){g=Pe(h[1].tracks.items);let p;for(p=0;p<g.length;p+=1){const b=rt(h,g,p);d[p]?d[p].p(b,w):(d[p]=it(b),d[p].c(),d[p].m(n,null))}for(;p<d.length;p+=1)d[p].d(1);d.length=g.length}},i(h){a||(h&&se(()=>{a&&(u||(u=ie(e,_e,{duration:250},!0)),u.run(1))}),a=!0)},o(h){h&&(u||(u=ie(e,_e,{duration:250},!1)),u.run(0)),a=!1},d(h){h&&x(e),_t(d,h),h&&u&&u.end()}}}function hn(t){let e;return{c(){e=m("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[5vh] h-[5vh]"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"></path></svg> ',i(e,"class","ring-1 ring-black shadow-md shadow-black rounded-full")},m(n,r){j(n,e,r)},p:q,d(n){n&&x(e)}}}function _n(t){let e,n,r;return{c(){e=m("img"),i(e,"loading","lazy"),he(e.src,n=t[0].track.album.images[0].url)||i(e,"src",n),i(e,"class",r="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-sm shadow-black will-change-auto "+(t[3].is?(t[3].statuses[t[0].track.id]=="downloading"?" rotating-image":"")+(t[3].statuses[t[0].track.id]=="ready"?" shadow-green-500 ring-green-500":"")+(t[3].statuses[t[0].track.id]=="failed"?" shadow-red-500 ring-red-500":""):"")),i(e,"alt","album")},m(l,s){j(l,e,s)},p(l,s){s&2&&!he(e.src,n=l[0].track.album.images[0].url)&&i(e,"src",n),s&10&&r!==(r="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-sm shadow-black will-change-auto "+(l[3].is?(l[3].statuses[l[0].track.id]=="downloading"?" rotating-image":"")+(l[3].statuses[l[0].track.id]=="ready"?" shadow-green-500 ring-green-500":"")+(l[3].statuses[l[0].track.id]=="failed"?" shadow-red-500 ring-red-500":""):""))&&i(e,"class",r)},d(l){l&&x(e)}}}function it(t){let e;function n(s,c){return s[0].track&&s[0].track.album.images.length>0?_n:hn}let r=n(t),l=r(t);return{c(){l.c(),e=We()},m(s,c){l.m(s,c),j(s,e,c)},p(s,c){r===(r=n(s))&&l?l.p(s,c):(l.d(1),l=r(s),l&&(l.c(),l.m(e.parentNode,e)))},d(s){s&&x(e),l.d(s)}}}function wn(t){let e,n,r,l,s,c,o,u,a,g=t[0].name+"",d,h,w,p,b,v,_,I=t[0].description+"",A,E,L,z,D,T,B,F,P,Z=t[4]&&Object.keys(t[1]).length>0,J,S;function V($,N){return $[0].images.length>0?an:on}let Q=V(t),G=Q(t);function ae($,N){return $[4]?un:cn}let W=ae(t),R=W(t);function O($,N){return $[3].is?pn:$[2].length>0?dn:fn}let ue=O(t),y=ue(t),M=t[2].length>0&&!t[3].is&&lt(t),k=Z&&st(t);return{c(){e=m("div"),n=m("div"),l=C(),s=m("div"),c=m("div"),G.c(),o=C(),u=m("div"),a=m("a"),d=U(g),h=C(),w=K("svg"),p=K("path"),v=C(),_=m("p"),A=U(I),E=C(),L=m("div"),z=m("button"),R.c(),D=C(),T=m("button"),y.c(),F=C(),M&&M.c(),P=C(),k&&k.c(),i(n,"class","h-1 absolute backdrop-opacity-50 bg-aodPurple rounded-sm left-0 bottom-0 z-50"),Se(n,"width",t[5]/100*90+"vw"),n.hidden=r=!t[3].is,i(c,"class","col-span-1 flex flex-col items-center justify-center"),i(p,"stroke-linecap","round"),i(p,"stroke-linejoin","round"),i(p,"d","M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"),i(w,"xmlns","http://www.w3.org/2000/svg"),i(w,"fill","none"),i(w,"viewBox","0 0 24 24"),i(w,"stroke-width","1.5"),i(w,"stroke","currentColor"),i(w,"class","w-4 h-4 inline"),i(a,"class","hover:scale-110 duration-75 text-left line-clamp-1"),i(a,"href",b=t[0].external_urls.spotify),i(a,"target","_blank"),i(_,"class","text-xs line-clamp-1"),i(z,"class","bg-transparent text-white ring-1 p-1 ring-zinc-500 hover:scale-110"),i(z,"aria-label","show more"),i(T,"class","text-xs bg-aodPurple p-1"),T.disabled=B=t[3].is||t[2].length>0,i(L,"class","flex flex-row space-x-2"),i(u,"class","col-span-3 flex flex-col justify-center items-start"),i(s,"class","grid grid-cols-4 w-full gap-1"),i(e,"class","bg-gray-950/50 ring-1 ring-zinc-500 py-2 rounded-md w-[90vw] text-center relative")},m($,N){j($,e,N),f(e,n),f(e,l),f(e,s),f(s,c),G.m(c,null),f(s,o),f(s,u),f(u,a),f(a,d),f(a,h),f(a,w),f(w,p),f(u,v),f(u,_),f(_,A),f(u,E),f(u,L),f(L,z),R.m(z,null),f(L,D),f(L,T),y.m(T,null),f(L,F),M&&M.m(L,null),f(s,P),k&&k.m(s,null),J||(S=[te(z,"click",t[7]),te(T,"click",t[9])],J=!0)},p($,[N]){N&32&&Se(n,"width",$[5]/100*90+"vw"),N&8&&r!==(r=!$[3].is)&&(n.hidden=r),Q===(Q=V($))&&G?G.p($,N):(G.d(1),G=Q($),G&&(G.c(),G.m(c,null))),N&1&&g!==(g=$[0].name+"")&&le(d,g),N&1&&b!==(b=$[0].external_urls.spotify)&&i(a,"href",b),N&1&&I!==(I=$[0].description+"")&&le(A,I),W!==(W=ae($))&&(R.d(1),R=W($),R&&(R.c(),R.m(z,null))),ue===(ue=O($))&&y?y.p($,N):(y.d(1),y=ue($),y&&(y.c(),y.m(T,null))),N&12&&B!==(B=$[3].is||$[2].length>0)&&(T.disabled=B),$[2].length>0&&!$[3].is?M?M.p($,N):(M=lt($),M.c(),M.m(L,null)):M&&(M.d(1),M=null),N&18&&(Z=$[4]&&Object.keys($[1]).length>0),Z?k?(k.p($,N),N&18&&H(k,1)):(k=st($),k.c(),H(k,1),k.m(s,null)):k&&(ze(),Y(k,1,1,()=>{k=null}),Be())},i($){H(k)},o($){Y(k)},d($){$&&x(e),G.d(),R.d(),y.d(),M&&M.d(),k&&k.d(),J=!1,oe(S)}}}function vn(t,e,n){let r,l={},s=[],{track:c}=e;const o={is:!1,statuses:{},stage:""};let u=!1,a=sn(0,{duration:1e3,easing:bt});Oe(t,a,p=>n(5,r=p));const g=()=>{u==!1?(Object.keys(l).length==0&&d(),n(4,u=!0)):n(4,u=!1)},d=async()=>{const p=c.external_urls.spotify,v=new URL(p).pathname.split("/")[2];X("loading playlist info",!0,1);let _=await re.getPlaylistInfo(v);n(1,l=_)},h=()=>{s.forEach((p,b)=>{const v=URL.createObjectURL(p),_=document.createElement("a");_.href=v,_.download=`${c.name}-${b+1}.mp3`,_.click()})},w=async()=>{if(Object.keys(l).length==0&&await d(),!l.tracks)return;if(l.tracks.items.length==0){X("cannot download empty playlist");return}n(3,o.is=!0,o),n(3,o.stage="converting",o),a.set(0,{duration:1}),a.set(10,{duration:1e4});let p=l.tracks.items[0].track;re.getDownloadTrack(p.external_urls.spotify,"",!0).then(async b=>{if(b.success==!1){ee(a,r=0,r),n(3,o.is=!1,o),X(`serverErr: ${b.info}`);return}const v=b.data.key;n(3,o.statuses[p.id]="downloading",o);for(const[I,{track:A}]of[...l.tracks.items].splice(1).entries())A&&n(3,o.statuses[A.id]="downloading",o),(await re.getDownloadTrack(A.external_urls.spotify,v,!1)).success==!1&&X(`failed downloading track (${A.name})`);await a.set(10);const _=setInterval(async()=>{let I=await re.getDownloadStatus(v);const A=I.data.filter(E=>E.status!=="downloading");if(I.data.forEach(E=>{n(3,o.statuses[E.id]=E.status,o)}),ee(a,r=A.length/I.data.length*40+10,r),A.length==I.data.length){n(3,o.stage="downloading",o),clearInterval(_);for(let E=0;E<A.length;E++){let[L,z]=await re.getStreamPlaylist(v);if(!L){X(`failed downloading a track (in "${c.name}")`);continue}n(2,s=[...s,z]),ee(a,r=(E+1)/A.length*50+50,r)}await a.set(100,{duration:500}),n(3,o.is=!1,o)}},5e3)})};return t.$$set=p=>{"track"in p&&n(0,c=p.track)},[c,l,s,o,u,r,a,g,h,w]}class bn extends ye{constructor(e){super(),be(this,e,vn,wn,ce,{track:0})}}const xe=Ze({loggedIn:!1,user:{},playlists:{}});function ot(t,e,n){const r=t.slice();return r[2]=e[n],r}function yn(t){let e,n;return{c(){e=K("svg"),n=K("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-[10vh] h-[10vh] rounded-full ring-aodBg ring-2")},m(r,l){j(r,e,l),f(e,n)},p:q,d(r){r&&x(e)}}}function kn(t){let e,n,r;return{c(){e=m("img"),i(e,"loading","lazy"),he(e.src,n=t[0].user.images[1].url)||i(e,"src",n),i(e,"alt",r=`${t[0].user.display_name}'s profile picture`),i(e,"class","rounded-full h-[10vh] ring-aodBg ring-1 shadow-sm shadow-black aspect-square")},m(l,s){j(l,e,s)},p(l,s){s&1&&!he(e.src,n=l[0].user.images[1].url)&&i(e,"src",n),s&1&&r!==(r=`${l[0].user.display_name}'s profile picture`)&&i(e,"alt",r)},d(l){l&&x(e)}}}function at(t){let e,n;return e=new bn({props:{track:t[2]}}),{c(){Me(e.$$.fragment)},m(r,l){we(e,r,l),n=!0},p(r,l){const s={};l&1&&(s.track=r[2]),e.$set(s)},i(r){n||(H(e.$$.fragment,r),n=!0)},o(r){Y(e.$$.fragment,r),n=!1},d(r){ve(e,r)}}}function $n(t){let e,n,r,l,s,c,o=t[0].user.display_name+"",u,a,g,d=t[0].user.followers.total+"",h,w,p=t[0].playlists.total+"",b,v,_,I,A=t[0].user.id+"",E,L,z,D,T,B,F,P,Z,J,S,V,Q;function G(y,M){return y[0].user.images.length==2?kn:yn}let ae=G(t),W=ae(t),R=Pe(t[0].playlists.items),O=[];for(let y=0;y<R.length;y+=1)O[y]=at(ot(t,R,y));const ue=y=>Y(O[y],1,1,()=>{O[y]=null});return{c(){e=m("div"),n=m("div"),r=m("div"),W.c(),l=C(),s=m("div"),c=m("p"),u=U(o),a=C(),g=m("p"),h=U(d),w=U(" followers, "),b=U(p),v=U(" playlists"),_=C(),I=m("p"),E=U(A),L=C(),z=m("div"),D=m("button"),D.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.5em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"></path></svg>logout',T=C(),B=m("div"),F=m("div");for(let y=0;y<O.length;y+=1)O[y].c();Z=C(),J=m("div"),i(c,"class","font-semibold"),Se(c,"text-shadow","4px 3px 8px rgba(0,0,0,1)"),i(g,"class","text-xs"),i(I,"class","text-xs"),i(s,"class","flex flex-col justify-center items-start"),i(r,"class","flex flex-row items-center justify-center space-x-5"),i(D,"class","text-sm p-0.5 bg-red-500 text-gray-950"),i(D,"aria-label","logout"),i(n,"class","flex flex-row justify-center items-center h-[13vh] space-x-4 bg-gradient-to-t from-gray-950/50 backdrop-blur-sm to-zinc-500 w-[90vw] rounded-t-md ring-1 ring-zinc-500 z-50"),i(F,"class","flex flex-col justify-center items-center w-full space-y-2 pb-1"),i(B,"class","h-[70vh] overflow-y-scroll w-[100vw]"),i(J,"class","backdrop-opacity-100 rounded-full backdrop-blur-sm w-[95vw] h-5 absolute bottom-0 left-auto right-auto"),i(e,"class","flex flex-col items-center -space-y-1")},m(y,M){j(y,e,M),f(e,n),f(n,r),W.m(r,null),f(r,l),f(r,s),f(s,c),f(c,u),f(s,a),f(s,g),f(g,h),f(g,w),f(g,b),f(g,v),f(s,_),f(s,I),f(I,E),f(n,L),f(n,z),f(z,D),f(e,T),f(e,B),f(B,F);for(let k=0;k<O.length;k+=1)O[k]&&O[k].m(F,null);f(e,Z),f(e,J),S=!0,V||(Q=te(D,"click",t[1]),V=!0)},p(y,[M]){if(ae===(ae=G(y))&&W?W.p(y,M):(W.d(1),W=ae(y),W&&(W.c(),W.m(r,l))),(!S||M&1)&&o!==(o=y[0].user.display_name+"")&&le(u,o),(!S||M&1)&&d!==(d=y[0].user.followers.total+"")&&le(h,d),(!S||M&1)&&p!==(p=y[0].playlists.total+"")&&le(b,p),(!S||M&1)&&A!==(A=y[0].user.id+"")&&le(E,A),M&1){R=Pe(y[0].playlists.items);let k;for(k=0;k<R.length;k+=1){const $=ot(y,R,k);O[k]?(O[k].p($,M),H(O[k],1)):(O[k]=at($),O[k].c(),H(O[k],1),O[k].m(F,null))}for(ze(),k=R.length;k<O.length;k+=1)ue(k);Be()}},i(y){if(!S){for(let M=0;M<R.length;M+=1)H(O[M]);y&&se(()=>{S&&(P||(P=ie(F,_e,{duration:1e3},!0)),P.run(1))}),S=!0}},o(y){O=O.filter(Boolean);for(let M=0;M<O.length;M+=1)Y(O[M]);y&&(P||(P=ie(F,_e,{duration:1e3},!1)),P.run(0)),S=!1},d(y){y&&x(e),W.d(),_t(O,y),y&&P&&P.end(),V=!1,Q()}}}function xn(t,e,n){let r;return Oe(t,xe,s=>n(0,r=s)),[r,()=>{localStorage.removeItem("cartier-userid"),ee(xe,r.loggedIn=!1,r)}]}class jn extends ye{constructor(e){super(),be(this,e,xn,$n,ce,{})}}function Mn(t){let e,n;return e=new jn({}),{c(){Me(e.$$.fragment)},m(r,l){we(e,r,l),n=!0},p:q,i(r){n||(H(e.$$.fragment,r),n=!0)},o(r){Y(e.$$.fragment,r),n=!1},d(r){ve(e,r)}}}function Cn(t){let e,n;return e=new ln({props:{handleUsername:t[1]}}),{c(){Me(e.$$.fragment)},m(r,l){we(e,r,l),n=!0},p:q,i(r){n||(H(e.$$.fragment,r),n=!0)},o(r){Y(e.$$.fragment,r),n=!1},d(r){ve(e,r)}}}function Ln(t){let e;return{c(){e=m("span"),e.textContent="prod",i(e,"class","rounded-sm p-0.5 bg-blue-600")},m(n,r){j(n,e,r)},d(n){n&&x(e)}}}function Sn(t){let e,n,r,l,s,c,o,u,a,g,d,h,w,p,b,v,_,I,A,E,L,z,D;const T=[Cn,Mn],B=[];function F(S,V){return S[0].loggedIn==!1?0:1}g=F(t),d=B[g]=T[g](t);function P(S,V){return Ln}let J=P()(t);return{c(){e=m("div"),n=C(),r=m("main"),l=m("div"),l.innerHTML='<div class="bg-aodPurple shadow-sm text-gray-950 shadow-gray-950 rounded-md p-2 ml-2 h-11/12 flex flex-col items-center justify-center"><span>reold&#39;s</span></div> <p class="text-3xl">Cartier Manager</p>',s=C(),c=m("div"),o=m("div"),a=C(),d.c(),h=C(),w=m("div"),p=m("p"),J.c(),b=U(`
      built by
      `),v=m("a"),v.textContent="reold",_=U(`.
      `),I=m("button"),I.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"></path></svg>
        use render`,A=C(),E=m("a"),E.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg>
        report issue`,i(e,"class","bg-black opacity-75 p-1 rounded-md w-[80vw] max-w-[90vw] z-[1000]"),Se(e,"display","none"),i(l,"class","flex flex-row items-center justify-evenly font-bold h-[10vh] bg-gray-950 ring-1 ring-zinc-500 shadow-xl"),i(o,"class","absolute left-0 top-0 w-full flex flex-col items-center justify-center space-y-1 text-xs bg-white"),i(c,"class","flex flex-col space-y-1 items-center relative h-[85vh] bg-gradient-to-t from-gray-950 via-[#203A43] to-gray-950"),i(v,"href","https://github.com/reold"),i(v,"target","_blank"),i(v,"class","text-blue-600"),i(I,"aria-label","use alternative render service servers"),i(I,"class","p-0 bg-transparent text-orange-600 text-xs disabled:animate-pulse"),i(E,"href","https://github.com/reold/cartier/issues/new"),i(E,"target","_blank"),i(E,"class","text-blue-600"),i(w,"class","w-full h-[5vh] bg-gray-950 text-xs flex flex-col items-center justify-center"),i(r,"class","w-screen h-screen text-white text-xl select-none text-center")},m(S,V){j(S,e,V),t[2](e),j(S,n,V),j(S,r,V),f(r,l),f(r,s),f(r,c),f(c,o),t[3](o),f(c,a),B[g].m(c,null),f(r,h),f(r,w),f(w,p),J.m(p,null),f(p,b),f(p,v),f(p,_),f(p,I),f(p,A),f(p,E),L=!0,z||(D=te(I,"click",t[4]),z=!0)},p(S,[V]){let Q=g;g=F(S),g===Q?B[g].p(S,V):(ze(),Y(B[Q],1,1,()=>{B[Q]=null}),Be(),d=B[g],d?d.p(S,V):(d=B[g]=T[g](S),d.c()),H(d,1),d.m(c,null))},i(S){L||(S&&se(()=>{L&&(u||(u=ie(o,_e,{duration:1e4},!0)),u.run(1))}),H(d),L=!0)},o(S){S&&(u||(u=ie(o,_e,{duration:1e4},!1)),u.run(0)),Y(d),L=!1},d(S){S&&(x(e),x(n),x(r)),t[2](null),t[3](null),S&&u&&u.end(),B[g].d(),J.d(),z=!1,D()}}}let Fe,yt;const X=(t,e=!1,n=3)=>{const r=yt.cloneNode(!0);r.innerHTML=e?`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.2em] animate-spin inline aspect-square mr-1" > <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" /> </svg>${t}`:t,r.style.display="block",Fe.appendChild(r),setTimeout(()=>{Fe.removeChild(r)},n*1e3)};function An(t,e,n){let r;Oe(t,xe,u=>n(0,r=u));const l=u=>{re.getUserInfo(u).then(a=>{if(a.success==!1){X("something went wrong!");return}ee(xe,r={...r,...a.data},r),ee(xe,r.loggedIn=!0,r)})};function s(u){Ie[u?"unshift":"push"](()=>{yt=u})}function c(u){Ie[u?"unshift":"push"](()=>{Fe=u})}return[r,l,s,c,async({target:u})=>{window["cartier-server-url"]="https://cartier-backend.onrender.com",u&&(u.disabled=!0,u.innerText="using render"),X("switching & waking alternate (render)server",!0),await re.getRoot(),X("(render)server running")}]}class En extends ye{constructor(e){super(),be(this,e,An,Sn,ce,{})}}new En({target:document.getElementById("app")});
