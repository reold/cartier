var tt=Object.defineProperty;var nt=(t,e,n)=>e in t?tt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var je=(t,e,n)=>(nt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function M(){}const lt=t=>t;function Oe(t,e){for(const n in e)t[n]=e[n];return t}function Fe(t){return t()}function Se(){return Object.create(null)}function Z(t){t.forEach(Fe)}function Ke(t){return typeof t=="function"}function ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let _e;function ce(t,e){return t===e?!0:(_e||(_e=document.createElement("a")),_e.href=e,t===_e.href)}function rt(t){return Object.keys(t).length===0}function st(t,...e){if(t==null){for(const l of e)l(void 0);return M}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ie(t,e,n){t.$$.on_destroy.push(st(e,n))}function se(t,e,n){return t.set(n),e}const Ge=typeof window<"u";let ot=Ge?()=>window.performance.now():()=>Date.now(),Je=Ge?t=>requestAnimationFrame(t):M;const oe=new Set;function Qe(t){oe.forEach(e=>{e.c(t)||(oe.delete(e),e.f())}),oe.size!==0&&Je(Qe)}function it(t){let e;return oe.size===0&&Je(Qe),{promise:new Promise(n=>{oe.add(e={c:t,f:n})}),abort(){oe.delete(e)}}}function c(t,e){t.appendChild(e)}function I(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function We(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function R(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function O(t){return document.createTextNode(t)}function A(){return O(" ")}function Q(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function s(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ct(t){return Array.from(t.childNodes)}function W(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ue(t,e){t.value=e??""}function Ae(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}let he;function de(t){he=t}function at(){if(!he)throw new Error("Function called outside component initialization");return he}function ut(t){at().$$.on_mount.push(t)}const re=[],Be=[];let ie=[];const qe=[],ft=Promise.resolve();let Ce=!1;function dt(){Ce||(Ce=!0,ft.then(Xe))}function Pe(t){ie.push(t)}const Le=new Set;let ne=0;function Xe(){if(ne!==0)return;const t=he;do{try{for(;ne<re.length;){const e=re[ne];ne++,de(e),pt(e.$$)}}catch(e){throw re.length=0,ne=0,e}for(de(null),re.length=0,ne=0;Be.length;)Be.pop()();for(let e=0;e<ie.length;e+=1){const n=ie[e];Le.has(n)||(Le.add(n),n())}ie.length=0}while(re.length);for(;qe.length;)qe.pop()();Ce=!1,Le.clear(),de(t)}function pt(t){if(t.fragment!==null){t.update(),Z(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Pe)}}function ht(t){const e=[],n=[];ie.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ie=e}const we=new Set;let X;function Ye(){X={r:0,c:[],p:X}}function Ze(){X.r||Z(X.c),X=X.p}function K(t,e){t&&t.i&&(we.delete(t),t.i(e))}function Y(t,e,n,l){if(t&&t.o){if(we.has(t))return;we.add(t),X.c.push(()=>{we.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ve(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Me(t){t&&t.c()}function ye(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),Pe(()=>{const o=t.$$.on_mount.map(Fe).filter(Ke);t.$$.on_destroy?t.$$.on_destroy.push(...o):Z(o),t.$$.on_mount=[]}),r.forEach(Pe)}function ke(t,e){const n=t.$$;n.fragment!==null&&(ht(n.after_update),Z(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gt(t,e){t.$$.dirty[0]===-1&&(re.push(t),dt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function xe(t,e,n,l,r,o,a=null,p=[-1]){const u=he;de(t);const i=t.$$={fragment:null,ctx:[],props:o,update:M,not_equal:r,bound:Se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Se(),dirty:p,skip_bound:!1,root:e.target||u.$$.root};a&&a(i.root);let h=!1;if(i.ctx=n?n(t,e.props||{},(f,$,..._)=>{const g=_.length?_[0]:$;return i.ctx&&r(i.ctx[f],i.ctx[f]=g)&&(!i.skip_bound&&i.bound[f]&&i.bound[f](g),h&&gt(t,f)),$}):[],i.update(),h=!0,Z(i.before_update),i.fragment=l?l(i.ctx):!1,e.target){if(e.hydrate){const f=ct(e.target);i.fragment&&i.fragment.l(f),f.forEach(E)}else i.fragment&&i.fragment.c();e.intro&&K(t.$$.fragment),ye(t,e.target,e.anchor),Xe()}de(u)}class $e{constructor(){je(this,"$$");je(this,"$$set")}$destroy(){ke(this,1),this.$destroy=M}$on(e,n){if(!Ke(n))return M;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!rt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const mt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(mt);function _t(t){let e,n,l,r,o,a,p,u,i,h,f,$,_,g,j,v,x,C,U,B;return{c(){e=d("div"),n=d("p"),n.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path></svg>
    fill-in to continue`,l=A(),r=d("div"),o=d("div"),a=d("input"),p=A(),u=d("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline rounded-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg>',i=A(),h=d("p"),h.textContent="copy your profile link from your spotify account page",f=A(),$=d("div"),_=d("label"),g=d("input"),j=A(),v=d("span"),v.textContent="persist",x=A(),C=d("button"),C.textContent="continue",s(n,"class","text-2xl"),s(a,"type","text"),s(a,"class","w-full"),s(a,"placeholder","spotify profile link"),s(u,"class","bg-zinc-500"),s(o,"class","w-full flex flex-row items-center justify-center space-x-2"),s(h,"class","text-sm"),s(r,"class","flex flex-col items-center justify-center"),s(g,"type","checkbox"),s(g,"class","inline"),s(v,"class","align-middle"),s(_,"for","persisting userid"),s(_,"class","text-base flex flex-row space-x-2 bg-gray-950 p-3 rounded-md"),s(C,"class","hover:scale-110"),s($,"class","flex flex-row items-center justify-center space-x-3"),s(e,"class","flex flex-col items-center text-center justify-center bg-aodFg ring-2 ring-zinc-500 rounded-md w-11/12 py-5 space-y-7 px-5")},m(m,P){I(m,e,P),c(e,n),c(e,l),c(e,r),c(r,o),c(o,a),Ue(a,t[0]),c(o,p),c(o,u),c(r,i),c(r,h),c(e,f),c(e,$),c($,_),c(_,g),g.checked=t[1],c(_,j),c(_,v),c($,x),c($,C),U||(B=[Q(a,"input",t[5]),Q(u,"click",t[2]),Q(g,"change",t[6]),Q(C,"click",t[3])],U=!0)},p(m,[P]){P&1&&a.value!==m[0]&&Ue(a,m[0]),P&2&&(g.checked=m[1])},i:M,o:M,d(m){m&&E(e),U=!1,Z(B)}}}function wt(t,e,n){ut(()=>{const h=localStorage.getItem("cartier-userid");h&&l(h)});let{handleUsername:l}=e,r="",o=!0;const a=async()=>{navigator.clipboard.readText&&n(0,r=await navigator.clipboard.readText())},p=()=>{let h;try{h=new URL(r)}catch{n(0,r="");return}const f=h.pathname.split("/")[2];o&&localStorage.setItem("cartier-userid",f),l(f)};function u(){r=this.value,n(0,r)}function i(){o=this.checked,n(1,o)}return t.$$set=h=>{"handleUsername"in h&&n(4,l=h.handleUsername)},[r,o,a,p,l,u,i]}class bt extends $e{constructor(e){super(),xe(this,e,wt,_t,ge,{handleUsername:4})}}const le=[];function et(t,e=M){let n;const l=new Set;function r(p){if(ge(t,p)&&(t=p,n)){const u=!le.length;for(const i of l)i[1](),le.push(i,t);if(u){for(let i=0;i<le.length;i+=2)le[i][0](le[i+1]);le.length=0}}}function o(p){r(p(t))}function a(p,u=M){const i=[p,u];return l.add(i),l.size===1&&(n=e(r,o)||M),p(t),()=>{l.delete(i),l.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:a}}function ze(t){return Object.prototype.toString.call(t)==="[object Date]"}function vt(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Ee(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((r,o)=>Ee(t[o],r));return r=>l.map(o=>o(r))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(ze(t)&&ze(e)){t=t.getTime(),e=e.getTime();const o=e-t;return a=>new Date(t+a*o)}const l=Object.keys(e),r={};return l.forEach(o=>{r[o]=Ee(t[o],e[o])}),o=>{const a={};return l.forEach(p=>{a[p]=r[p](o)}),a}}if(n==="number"){const l=e-t;return r=>t+r*l}throw new Error(`Cannot interpolate ${n} values`)}function yt(t,e={}){const n=et(t);let l,r=t;function o(a,p){if(t==null)return n.set(t=a),Promise.resolve();r=a;let u=l,i=!1,{delay:h=0,duration:f=400,easing:$=lt,interpolate:_=Ee}=Oe(Oe({},e),p);if(f===0)return u&&(u.abort(),u=null),n.set(t=r),Promise.resolve();const g=ot()+h;let j;return l=it(v=>{if(v<g)return!0;i||(j=_(t,a),typeof f=="function"&&(f=f(t,a)),i=!0),u&&(u.abort(),u=null);const x=v-g;return x>f?(n.set(t=a),!1):(n.set(t=j($(x/f))),!0)}),l.promise}return{set:o,update:(a,p)=>o(a(r,t),p),subscribe:n.subscribe}}let fe;fe="https://reold-cartier.glitch.me";const be={getUserInfo:async t=>await(await fetch(`${fe}/user?username=${t}`)).json(),getPlaylistInfo:async t=>await(await fetch(`${fe}/playlist?id=${t}`)).json(),getDownloadPlaylist:async t=>await(await fetch(`${fe}/download?link=${t}`)).json(),getStreamPlaylist:async t=>{let e=await fetch(`${fe}/stream?unique_code=${t}`);return[await e.ok,await e.blob()]}};function Te(t,e,n){const l=t.slice();return l[0]=e[n],l}function kt(t){let e,n;return{c(){e=R("svg"),n=R("path"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","1.5"),s(e,"stroke","currentColor"),s(e,"class","w-[10vh] h-[10vh]")},m(l,r){I(l,e,r),c(e,n)},p:M,d(l){l&&E(e)}}}function xt(t){let e,n;return{c(){e=d("img"),ce(e.src,n=t[0].images[0].url)||s(e,"src",n),s(e,"class","rounded-full max-h-[10vh]"),s(e,"alt","playlist's cover")},m(l,r){I(l,e,r)},p(l,r){r&1&&!ce(e.src,n=l[0].images[0].url)&&s(e,"src",n)},d(l){l&&E(e)}}}function $t(t){let e,n;return{c(){e=R("svg"),n=R("path"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","4"),s(e,"stroke","currentColor"),s(e,"class","w-[1.2em] text-xs aspect-square")},m(l,r){I(l,e,r),c(e,n)},d(l){l&&E(e)}}}function jt(t){let e,n;return{c(){e=R("svg"),n=R("path"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"d","m4.5 15.75 7.5-7.5 7.5 7.5"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","3"),s(e,"stroke","currentColor"),s(e,"class","w-[1.2em] aspect-square text-xs")},m(l,r){I(l,e,r),c(e,n)},d(l){l&&E(e)}}}function Lt(t){let e;return{c(){e=O("download")},m(n,l){I(n,e,l)},d(n){n&&E(e)}}}function At(t){let e;return{c(){e=O("downloaded")},m(n,l){I(n,e,l)},d(n){n&&E(e)}}}function Ct(t){let e,n,l;return{c(){e=R("svg"),n=R("path"),l=O(`
            downloading`),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","1.5"),s(e,"stroke","currentColor"),s(e,"class","w-4 h-4 inline animate-spin")},m(r,o){I(r,e,o),c(e,n),I(r,l,o)},d(r){r&&(E(e),E(l))}}}function De(t){let e,n,l;return{c(){e=d("button"),e.textContent="save",s(e,"class","text-xs p-1")},m(r,o){I(r,e,o),n||(l=Q(e,"click",t[8]),n=!0)},p:M,d(r){r&&E(e),n=!1,l()}}}function Ne(t){let e,n,l=t[1].tracks.total+"",r,o,a,p=ve(t[1].tracks.items),u=[];for(let i=0;i<p.length;i+=1)u[i]=He(Te(t,p,i));return{c(){e=d("div"),n=d("div"),r=O(l),o=O(" tracks"),a=A();for(let i=0;i<u.length;i+=1)u[i].c();s(n,"class","bg-aodPurple rounded-md text-black p-1"),s(e,"class","overflow-x-scroll col-span-4 flex flex-row items-center justify-center space-x-2 bg-zinc-500 rounded-md mx-2 text-xs p-1")},m(i,h){I(i,e,h),c(e,n),c(n,r),c(n,o),c(e,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(e,null)},p(i,h){if(h&2&&l!==(l=i[1].tracks.total+"")&&W(r,l),h&2){p=ve(i[1].tracks.items);let f;for(f=0;f<p.length;f+=1){const $=Te(i,p,f);u[f]?u[f].p($,h):(u[f]=He($),u[f].c(),u[f].m(e,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=p.length}},d(i){i&&E(e),We(u,i)}}}function He(t){let e,n,l;return{c(){e=d("img"),l=A(),ce(e.src,n=t[0].track.album.images[0].url)||s(e,"src",n),s(e,"class","aspect-square h-[5vh] rounded-full"),s(e,"alt","album")},m(r,o){I(r,e,o),I(r,l,o)},p(r,o){o&2&&!ce(e.src,n=r[0].track.album.images[0].url)&&s(e,"src",n)},d(r){r&&(E(e),E(l))}}}function Pt(t){let e,n,l,r,o,a,p,u,i,h=t[0].name+"",f,$,_,g,j,v,x,C=t[0].description+"",U,B,m,P,V,q,D,ee,ae,te=t[4]&&Object.keys(t[1]).length>0,G,N;function F(b,S){return b[0].images.length>0?xt:kt}let k=F(t),H=k(t);function w(b,S){return b[4]?jt:$t}let L=w(t),y=L(t);function ue(b,S){return b[3]?Ct:b[2].length>0?At:Lt}let me=ue(t),J=me(t),z=t[2].length>0&&!t[3]&&De(t),T=te&&Ne(t);return{c(){e=d("div"),n=d("div"),r=A(),o=d("div"),a=d("div"),H.c(),p=A(),u=d("div"),i=d("a"),f=O(h),$=A(),_=R("svg"),g=R("path"),v=A(),x=d("p"),U=O(C),B=A(),m=d("div"),P=d("button"),y.c(),V=A(),q=d("button"),J.c(),ee=A(),z&&z.c(),ae=A(),T&&T.c(),s(n,"class","h-full absolute backdrop-invert brightness-50 left-0 top-0 rounded-md"),Ae(n,"width",t[5]/100*90+"vw"),n.hidden=l=!t[3],s(a,"class","col-span-1 flex flex-col items-center justify-center"),s(g,"stroke-linecap","round"),s(g,"stroke-linejoin","round"),s(g,"d","M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"),s(_,"xmlns","http://www.w3.org/2000/svg"),s(_,"fill","none"),s(_,"viewBox","0 0 24 24"),s(_,"stroke-width","1.5"),s(_,"stroke","currentColor"),s(_,"class","w-4 h-4 inline"),s(i,"class","hover:scale-110 duration-75 text-left line-clamp-1"),s(i,"href",j=t[0].external_urls.spotify),s(i,"target","_blank"),s(x,"class","text-xs line-clamp-1"),s(P,"class","bg-transparent text-white ring-2 p-1 ring-zinc-500"),s(q,"class","text-xs bg-aodPurple p-1"),q.disabled=D=t[3]||t[2].length>0,s(m,"class","flex flex-row space-x-2"),s(u,"class","col-span-3 flex flex-col justify-center items-start"),s(o,"class","grid grid-cols-4 w-full gap-1"),s(e,"class","bg-gray-950 ring-2 ring-zinc-500 py-2 rounded-md w-[90vw] text-center relative transition-all duration-150")},m(b,S){I(b,e,S),c(e,n),c(e,r),c(e,o),c(o,a),H.m(a,null),c(o,p),c(o,u),c(u,i),c(i,f),c(i,$),c(i,_),c(_,g),c(u,v),c(u,x),c(x,U),c(u,B),c(u,m),c(m,P),y.m(P,null),c(m,V),c(m,q),J.m(q,null),c(m,ee),z&&z.m(m,null),c(o,ae),T&&T.m(o,null),G||(N=[Q(P,"click",t[7]),Q(q,"click",t[9])],G=!0)},p(b,[S]){S&32&&Ae(n,"width",b[5]/100*90+"vw"),S&8&&l!==(l=!b[3])&&(n.hidden=l),k===(k=F(b))&&H?H.p(b,S):(H.d(1),H=k(b),H&&(H.c(),H.m(a,null))),S&1&&h!==(h=b[0].name+"")&&W(f,h),S&1&&j!==(j=b[0].external_urls.spotify)&&s(i,"href",j),S&1&&C!==(C=b[0].description+"")&&W(U,C),L!==(L=w(b))&&(y.d(1),y=L(b),y&&(y.c(),y.m(P,null))),me!==(me=ue(b))&&(J.d(1),J=me(b),J&&(J.c(),J.m(q,null))),S&12&&D!==(D=b[3]||b[2].length>0)&&(q.disabled=D),b[2].length>0&&!b[3]?z?z.p(b,S):(z=De(b),z.c(),z.m(m,null)):z&&(z.d(1),z=null),S&18&&(te=b[4]&&Object.keys(b[1]).length>0),te?T?T.p(b,S):(T=Ne(b),T.c(),T.m(o,null)):T&&(T.d(1),T=null)},i:M,o:M,d(b){b&&E(e),H.d(),y.d(),J.d(),z&&z.d(),T&&T.d(),G=!1,Z(N)}}}function Et(t,e,n){let l,r={},o=[],{track:a}=e,p=!1,u=!1,i=yt(0,{duration:100,easing:vt});Ie(t,i,g=>n(5,l=g));const h=()=>{u==!1?(Object.keys(r).length==0&&f(),n(4,u=!0)):n(4,u=!1)},f=()=>{const g=a.external_urls.spotify,v=new URL(g).pathname.split("/")[2];be.getPlaylistInfo(v).then(x=>{n(1,r=x)})},$=()=>{o.forEach((g,j)=>{const v=URL.createObjectURL(g),x=document.createElement("a");x.href=v,x.download=`${a.name}-${j+1}.mp3`,x.click()})},_=()=>{n(3,p=!0),i.set(25,{duration:1e4}),Object.keys(r).length==0&&f();const g=a.external_urls.spotify;let j=r.tracks.total;se(i,l=25,l);const v=j*20+.001;j>20&&alert(`There are ${j} tracks in the playlist. It will take about ${v/60} minutes`),i.set(50,{duration:v*1e3}),be.getDownloadPlaylist(g).then(async x=>{se(i,l=50,l),i.set(75,{duration:1e4});for(let C=0;C<j;C++){let[U,B]=await be.getStreamPlaylist(x.data.unique_code);if(se(i,l=75+C/j*25,l),!U){alert("something went wrong");return}n(2,o=[...o,B])}n(3,p=!1)})};return t.$$set=g=>{"track"in g&&n(0,a=g.track)},[a,r,o,p,u,l,i,h,$,_]}class It extends $e{constructor(e){super(),xe(this,e,Et,Pt,ge,{track:0})}}const pe=et({loggedIn:!1,user:{},playlists:{}});function Re(t,e,n){const l=t.slice();return l[2]=e[n],l}function Mt(t){let e,n;return{c(){e=R("svg"),n=R("path"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","1.5"),s(e,"stroke","currentColor"),s(e,"class","w-[10vh] h-[10vh] rounded-full ring-aodBg ring-4")},m(l,r){I(l,e,r),c(e,n)},p:M,d(l){l&&E(e)}}}function Ot(t){let e,n,l;return{c(){e=d("img"),ce(e.src,n=t[0].user.images[1].url)||s(e,"src",n),s(e,"alt",l=`${t[0].user.display_name}'s profile picture`),s(e,"class","rounded-full h-[10vh] ring-aodBg ring-4")},m(r,o){I(r,e,o)},p(r,o){o&1&&!ce(e.src,n=r[0].user.images[1].url)&&s(e,"src",n),o&1&&l!==(l=`${r[0].user.display_name}'s profile picture`)&&s(e,"alt",l)},d(r){r&&E(e)}}}function Ve(t){let e,n;return e=new It({props:{track:t[2]}}),{c(){Me(e.$$.fragment)},m(l,r){ye(e,l,r),n=!0},p(l,r){const o={};r&1&&(o.track=l[2]),e.$set(o)},i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Y(e.$$.fragment,l),n=!1},d(l){ke(e,l)}}}function St(t){let e,n,l,r,o,a=t[0].user.display_name+"",p,u,i,h=t[0].user.followers.total+"",f,$,_=t[0].playlists.total+"",g,j,v,x,C=t[0].user.id+"",U,B,m,P,V,q,D,ee,ae;function te(w,L){return w[0].user.images.length==2?Ot:Mt}let G=te(t),N=G(t),F=ve(t[0].playlists.items),k=[];for(let w=0;w<F.length;w+=1)k[w]=Ve(Re(t,F,w));const H=w=>Y(k[w],1,1,()=>{k[w]=null});return{c(){e=d("div"),n=d("div"),N.c(),l=A(),r=d("div"),o=d("p"),p=O(a),u=A(),i=d("p"),f=O(h),$=O(" followers, "),g=O(_),j=O(" playlists"),v=A(),x=d("p"),U=O(C),B=A(),m=d("button"),m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.5em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"></path></svg>logout',P=A(),V=d("div"),q=d("div");for(let w=0;w<k.length;w+=1)k[w].c();s(o,"class","font-semibold"),Ae(o,"text-shadow","4px 3px 8px rgba(0,0,0,1)"),s(i,"class","text-xs"),s(x,"class","text-xs"),s(m,"class","text-sm p-0.5 bg-red-500 text-white"),s(r,"class","flex flex-col justify-center items-start"),s(n,"class","flex flex-row justify-center items-center h-[15vh] space-x-4 bg-gray-500 w-[90vw] rounded-t-xl ring-2 ring-zinc-500 py-5"),s(q,"class","flex flex-col justify-center items-center w-full space-y-2 pb-1"),s(V,"class","h-[65vh] overflow-y-scroll w-[100vw]"),s(e,"class","flex flex-col items-center space-y--2")},m(w,L){I(w,e,L),c(e,n),N.m(n,null),c(n,l),c(n,r),c(r,o),c(o,p),c(r,u),c(r,i),c(i,f),c(i,$),c(i,g),c(i,j),c(r,v),c(r,x),c(x,U),c(r,B),c(r,m),c(e,P),c(e,V),c(V,q);for(let y=0;y<k.length;y+=1)k[y]&&k[y].m(q,null);D=!0,ee||(ae=Q(m,"click",t[1]),ee=!0)},p(w,[L]){if(G===(G=te(w))&&N?N.p(w,L):(N.d(1),N=G(w),N&&(N.c(),N.m(n,l))),(!D||L&1)&&a!==(a=w[0].user.display_name+"")&&W(p,a),(!D||L&1)&&h!==(h=w[0].user.followers.total+"")&&W(f,h),(!D||L&1)&&_!==(_=w[0].playlists.total+"")&&W(g,_),(!D||L&1)&&C!==(C=w[0].user.id+"")&&W(U,C),L&1){F=ve(w[0].playlists.items);let y;for(y=0;y<F.length;y+=1){const ue=Re(w,F,y);k[y]?(k[y].p(ue,L),K(k[y],1)):(k[y]=Ve(ue),k[y].c(),K(k[y],1),k[y].m(q,null))}for(Ye(),y=F.length;y<k.length;y+=1)H(y);Ze()}},i(w){if(!D){for(let L=0;L<F.length;L+=1)K(k[L]);D=!0}},o(w){k=k.filter(Boolean);for(let L=0;L<k.length;L+=1)Y(k[L]);D=!1},d(w){w&&E(e),N.d(),We(k,w),ee=!1,ae()}}}function Ut(t,e,n){let l;return Ie(t,pe,o=>n(0,l=o)),[l,()=>{localStorage.removeItem("cartier-userid"),se(pe,l.loggedIn=!1,l)}]}class Bt extends $e{constructor(e){super(),xe(this,e,Ut,St,ge,{})}}function qt(t){let e,n;return e=new Bt({}),{c(){Me(e.$$.fragment)},m(l,r){ye(e,l,r),n=!0},p:M,i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Y(e.$$.fragment,l),n=!1},d(l){ke(e,l)}}}function zt(t){let e,n;return e=new bt({props:{handleUsername:t[1]}}),{c(){Me(e.$$.fragment)},m(l,r){ye(e,l,r),n=!0},p:M,i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Y(e.$$.fragment,l),n=!1},d(l){ke(e,l)}}}function Tt(t){let e;return{c(){e=d("span"),e.textContent="PROD",s(e,"class","rounded-sm p-0.5 bg-blue-600")},m(n,l){I(n,e,l)},d(n){n&&E(e)}}}function Dt(t){let e,n,l,r,o,a,p,u,i,h,f,$,_,g;const j=[zt,qt],v=[];function x(m,P){return m[0].loggedIn==!1?0:1}o=x(t),a=v[o]=j[o](t);function C(m,P){return Tt}let B=C()(t);return{c(){e=d("main"),n=d("div"),n.innerHTML='<div class="bg-aodPurple shadow-sm shadow-gray-950 rounded-b-md p-2 ml-2 h-full flex flex-col items-center justify-center"><span>reold&#39;s</span></div> <p class="text-3xl">Cartier Manager</p>',l=A(),r=d("div"),a.c(),p=A(),u=d("div"),i=d("p"),B.c(),h=O(`
      Built with ❤️ by
      `),f=d("a"),f.textContent="reold",$=O(`.
      `),_=d("a"),_.textContent="Report an error",s(n,"class","flex flex-row items-center justify-evenly font-bold h-[10vh] pb-2 bg-gray-950 ring-2 ring-zinc-500 shadow-xl"),s(r,"class","w-full flex flex-col items-center justify-center h-[85vh] bg-gradient-to-t from-gray-950 via-aodBg to-aodBg"),s(f,"href","https://github.com/reold"),s(f,"target","_blank"),s(f,"class","text-blue-600"),s(_,"href","https://x.com/redicrafty"),s(_,"target","_blank"),s(_,"class","text-blue-600"),s(u,"class","w-full h-[5vh] bg-gray-950 text-sm flex flex-col items-center justify-center"),s(e,"class","w-screen h-screen text-white text-xl select-none")},m(m,P){I(m,e,P),c(e,n),c(e,l),c(e,r),v[o].m(r,null),c(e,p),c(e,u),c(u,i),B.m(i,null),c(i,h),c(i,f),c(i,$),c(i,_),g=!0},p(m,[P]){let V=o;o=x(m),o===V?v[o].p(m,P):(Ye(),Y(v[V],1,1,()=>{v[V]=null}),Ze(),a=v[o],a?a.p(m,P):(a=v[o]=j[o](m),a.c()),K(a,1),a.m(r,null))},i(m){g||(K(a),g=!0)},o(m){Y(a),g=!1},d(m){m&&E(e),v[o].d(),B.d()}}}function Nt(t,e,n){let l;return Ie(t,pe,o=>n(0,l=o)),[l,o=>{be.getUserInfo(o).then(a=>{if(a.success==!1){alert("something went wrong!");return}se(pe,l={...a.data},l),se(pe,l.loggedIn=!0,l)})}]}class Ht extends $e{constructor(e){super(),xe(this,e,Nt,Dt,ge,{})}}new Ht({target:document.getElementById("app")});
