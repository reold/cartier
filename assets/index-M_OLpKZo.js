var tt=Object.defineProperty;var nt=(t,e,n)=>e in t?tt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var je=(t,e,n)=>(nt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function O(){}const lt=t=>t;function Oe(t,e){for(const n in e)t[n]=e[n];return t}function Fe(t){return t()}function Se(){return Object.create(null)}function te(t){t.forEach(Fe)}function Ke(t){return typeof t=="function"}function _e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let we;function fe(t,e){return t===e?!0:(we||(we=document.createElement("a")),we.href=e,t===we.href)}function rt(t){return Object.keys(t).length===0}function st(t,...e){if(t==null){for(const l of e)l(void 0);return O}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Pe(t,e,n){t.$$.on_destroy.push(st(e,n))}function ce(t,e,n){return t.set(n),e}const Ge=typeof window<"u";let it=Ge?()=>window.performance.now():()=>Date.now(),Je=Ge?t=>requestAnimationFrame(t):O;const ae=new Set;function Qe(t){ae.forEach(e=>{e.c(t)||(ae.delete(e),e.f())}),ae.size!==0&&Je(Qe)}function ot(t){let e;return ae.size===0&&Je(Qe),{promise:new Promise(n=>{ae.add(e={c:t,f:n})}),abort(){ae.delete(e)}}}function c(t,e){t.appendChild(e)}function P(t,e,n){t.insertBefore(e,n||null)}function M(t){t.parentNode&&t.parentNode.removeChild(t)}function We(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function H(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function S(t){return document.createTextNode(t)}function C(){return S(" ")}function ct(){return S("")}function Q(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function s(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function at(t){return Array.from(t.childNodes)}function Y(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ue(t,e){t.value=e??""}function Le(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}let me;function he(t){me=t}function ut(){if(!me)throw new Error("Function called outside component initialization");return me}function ft(t){ut().$$.on_mount.push(t)}const ie=[],ze=[];let ue=[];const Be=[],dt=Promise.resolve();let Ce=!1;function pt(){Ce||(Ce=!0,dt.then(Xe))}function Ee(t){ue.push(t)}const Ae=new Set;let re=0;function Xe(){if(re!==0)return;const t=me;do{try{for(;re<ie.length;){const e=ie[re];re++,he(e),ht(e.$$)}}catch(e){throw ie.length=0,re=0,e}for(he(null),ie.length=0,re=0;ze.length;)ze.pop()();for(let e=0;e<ue.length;e+=1){const n=ue[e];Ae.has(n)||(Ae.add(n),n())}ue.length=0}while(ie.length);for(;Be.length;)Be.pop()();Ce=!1,Ae.clear(),he(t)}function ht(t){if(t.fragment!==null){t.update(),te(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ee)}}function gt(t){const e=[],n=[];ue.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ue=e}const be=new Set;let Z;function Ye(){Z={r:0,c:[],p:Z}}function Ze(){Z.r||te(Z.c),Z=Z.p}function G(t,e){t&&t.i&&(be.delete(t),t.i(e))}function ee(t,e,n,l){if(t&&t.o){if(be.has(t))return;be.add(t),Z.c.push(()=>{be.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ke(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ie(t){t&&t.c()}function ve(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),Ee(()=>{const i=t.$$.on_mount.map(Fe).filter(Ke);t.$$.on_destroy?t.$$.on_destroy.push(...i):te(i),t.$$.on_mount=[]}),r.forEach(Ee)}function ye(t,e){const n=t.$$;n.fragment!==null&&(gt(n.after_update),te(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(t,e){t.$$.dirty[0]===-1&&(ie.push(t),pt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function xe(t,e,n,l,r,i,a=null,h=[-1]){const f=me;he(t);const o=t.$$={fragment:null,ctx:[],props:i,update:O,not_equal:r,bound:Se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Se(),dirty:h,skip_bound:!1,root:e.target||f.$$.root};a&&a(o.root);let u=!1;if(o.ctx=n?n(t,e.props||{},(p,g,...w)=>{const m=w.length?w[0]:g;return o.ctx&&r(o.ctx[p],o.ctx[p]=m)&&(!o.skip_bound&&o.bound[p]&&o.bound[p](m),u&&mt(t,p)),g}):[],o.update(),u=!0,te(o.before_update),o.fragment=l?l(o.ctx):!1,e.target){if(e.hydrate){const p=at(e.target);o.fragment&&o.fragment.l(p),p.forEach(M)}else o.fragment&&o.fragment.c();e.intro&&G(t.$$.fragment),ve(t,e.target,e.anchor),Xe()}he(f)}class $e{constructor(){je(this,"$$");je(this,"$$set")}$destroy(){ye(this,1),this.$destroy=O}$on(e,n){if(!Ke(n))return O;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!rt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const _t="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_t);function wt(t){let e,n,l,r,i,a,h,f,o,u,p,g,w,m,j,v,y,A,U,D;return{c(){e=d("div"),n=d("p"),n.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path></svg>
    fill-in to continue`,l=C(),r=d("div"),i=d("div"),a=d("input"),h=C(),f=d("button"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline rounded-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg>',o=C(),u=d("p"),u.textContent="copy your profile link from your spotify account page",p=C(),g=d("div"),w=d("label"),m=d("input"),j=C(),v=d("span"),v.textContent="persist",y=C(),A=d("button"),A.textContent="continue",s(n,"class","text-2xl"),s(a,"type","text"),s(a,"class","w-full"),s(a,"placeholder","spotify profile link"),s(f,"class","bg-zinc-500"),s(i,"class","w-full flex flex-row items-center justify-center space-x-2"),s(u,"class","text-sm"),s(r,"class","flex flex-col items-center justify-center"),s(m,"type","checkbox"),s(m,"class","inline"),s(v,"class","align-middle"),s(w,"for","persisting userid"),s(w,"class","text-base flex flex-row space-x-2 bg-gray-950 p-3 rounded-md"),s(A,"class","hover:scale-110"),s(g,"class","flex flex-row items-center justify-center space-x-3"),s(e,"class","flex flex-col items-center text-center justify-center bg-aodFg ring-1 ring-zinc-500 rounded-md w-11/12 py-5 space-y-7 px-5")},m(b,L){P(b,e,L),c(e,n),c(e,l),c(e,r),c(r,i),c(i,a),Ue(a,t[0]),c(i,h),c(i,f),c(r,o),c(r,u),c(e,p),c(e,g),c(g,w),c(w,m),m.checked=t[1],c(w,j),c(w,v),c(g,y),c(g,A),U||(D=[Q(a,"input",t[5]),Q(f,"click",t[2]),Q(m,"change",t[6]),Q(A,"click",t[3])],U=!0)},p(b,[L]){L&1&&a.value!==b[0]&&Ue(a,b[0]),L&2&&(m.checked=b[1])},i:O,o:O,d(b){b&&M(e),U=!1,te(D)}}}function bt(t,e,n){ft(()=>{const u=localStorage.getItem("cartier-userid");u&&l(u)});let{handleUsername:l}=e,r="",i=!0;const a=async()=>{navigator.clipboard.readText&&n(0,r=await navigator.clipboard.readText())},h=()=>{let u;try{u=new URL(r)}catch{n(0,r="");return}const p=u.pathname.split("/")[2];i&&localStorage.setItem("cartier-userid",p),l(p)};function f(){r=this.value,n(0,r)}function o(){i=this.checked,n(1,i)}return t.$$set=u=>{"handleUsername"in u&&n(4,l=u.handleUsername)},[r,i,a,h,l,f,o]}class kt extends $e{constructor(e){super(),xe(this,e,bt,wt,_e,{handleUsername:4})}}const se=[];function et(t,e=O){let n;const l=new Set;function r(h){if(_e(t,h)&&(t=h,n)){const f=!se.length;for(const o of l)o[1](),se.push(o,t);if(f){for(let o=0;o<se.length;o+=2)se[o][0](se[o+1]);se.length=0}}}function i(h){r(h(t))}function a(h,f=O){const o=[h,f];return l.add(o),l.size===1&&(n=e(r,i)||O),h(t),()=>{l.delete(o),l.size===0&&n&&(n(),n=null)}}return{set:r,update:i,subscribe:a}}function qe(t){return Object.prototype.toString.call(t)==="[object Date]"}function vt(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Me(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((r,i)=>Me(t[i],r));return r=>l.map(i=>i(r))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(qe(t)&&qe(e)){t=t.getTime(),e=e.getTime();const i=e-t;return a=>new Date(t+a*i)}const l=Object.keys(e),r={};return l.forEach(i=>{r[i]=Me(t[i],e[i])}),i=>{const a={};return l.forEach(h=>{a[h]=r[h](i)}),a}}if(n==="number"){const l=e-t;return r=>t+r*l}throw new Error(`Cannot interpolate ${n} values`)}function yt(t,e={}){const n=et(t);let l,r=t;function i(a,h){if(t==null)return n.set(t=a),Promise.resolve();r=a;let f=l,o=!1,{delay:u=0,duration:p=400,easing:g=lt,interpolate:w=Me}=Oe(Oe({},e),h);if(p===0)return f&&(f.abort(),f=null),n.set(t=r),Promise.resolve();const m=it()+u;let j;return l=ot(v=>{if(v<m)return!0;o||(j=w(t,a),typeof p=="function"&&(p=p(t,a)),o=!0),f&&(f.abort(),f=null);const y=v-m;return y>p?(n.set(t=a),!1):(n.set(t=j(g(y/p))),!0)}),l.promise}return{set:i,update:(a,h)=>i(a(r,t),h),subscribe:n.subscribe}}let oe;oe="https://reold-cartier.glitch.me";const pe={getUserInfo:async t=>await(await fetch(`${oe}/user?username=${t}`)).json(),getPlaylistInfo:async t=>await(await fetch(`${oe}/playlist?id=${t}`)).json(),getDownloadPlaylist:async t=>await(await fetch(`${oe}/download?link=${t}`)).json(),getDownloadTrack:async(t,e="",n=!1)=>await(await fetch(`${oe}/track?link=${t}&unique_code=${e}&create=${n}`)).json(),getStreamPlaylist:async t=>{let e=await fetch(`${oe}/stream?unique_code=${t}`);return[await e.ok,await e.blob()]}};function Te(t,e,n){const l=t.slice();return l[0]=e[n],l}function xt(t){let e,n;return{c(){e=H("svg"),n=H("path"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","1.5"),s(e,"stroke","currentColor"),s(e,"class","w-[10vh] h-[10vh]")},m(l,r){P(l,e,r),c(e,n)},p:O,d(l){l&&M(e)}}}function $t(t){let e,n;return{c(){e=d("img"),s(e,"loading","lazy"),fe(e.src,n=t[0].images[0].url)||s(e,"src",n),s(e,"class","rounded-full max-h-[10vh] shadow-black shadow-lg ring-1 ring-black"),s(e,"alt","playlist's cover")},m(l,r){P(l,e,r)},p(l,r){r&1&&!fe(e.src,n=l[0].images[0].url)&&s(e,"src",n)},d(l){l&&M(e)}}}function jt(t){let e,n;return{c(){e=H("svg"),n=H("path"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","4"),s(e,"stroke","currentColor"),s(e,"class","w-[1.2em] text-xs aspect-square")},m(l,r){P(l,e,r),c(e,n)},d(l){l&&M(e)}}}function At(t){let e,n;return{c(){e=H("svg"),n=H("path"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"d","m4.5 15.75 7.5-7.5 7.5 7.5"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","3"),s(e,"stroke","currentColor"),s(e,"class","w-[1.2em] aspect-square text-xs")},m(l,r){P(l,e,r),c(e,n)},d(l){l&&M(e)}}}function Lt(t){let e;return{c(){e=S("download")},m(n,l){P(n,e,l)},d(n){n&&M(e)}}}function Ct(t){let e;return{c(){e=S("downloaded")},m(n,l){P(n,e,l)},d(n){n&&M(e)}}}function Et(t){let e,n,l;return{c(){e=H("svg"),n=H("path"),l=S(`
            downloading`),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","1.5"),s(e,"stroke","currentColor"),s(e,"class","w-4 h-4 inline animate-spin")},m(r,i){P(r,e,i),c(e,n),P(r,l,i)},d(r){r&&(M(e),M(l))}}}function De(t){let e,n,l;return{c(){e=d("button"),e.textContent="save",s(e,"class","text-xs p-1")},m(r,i){P(r,e,i),n||(l=Q(e,"click",t[8]),n=!0)},p:O,d(r){r&&M(e),n=!1,l()}}}function Ne(t){let e,n,l,r=t[1].tracks.total+"",i,a,h,f=ke(t[1].tracks.items),o=[];for(let u=0;u<f.length;u+=1)o[u]=He(Te(t,f,u));return{c(){e=d("div"),n=d("div"),l=d("div"),i=S(r),a=S(" tracks"),h=C();for(let u=0;u<o.length;u+=1)o[u].c();s(l,"class","bg-zinc-950 rounded-full text-white p-2"),s(n,"class","overflow-hidden overflow-x-scroll flex flex-row items-center space-x-2 p-1 relative"),s(e,"class","col-span-4 bg-zinc-500/10 rounded-md mx-2 text-xs flex flex-row justify-center")},m(u,p){P(u,e,p),c(e,n),c(n,l),c(l,i),c(l,a),c(n,h);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(n,null)},p(u,p){if(p&2&&r!==(r=u[1].tracks.total+"")&&Y(i,r),p&10){f=ke(u[1].tracks.items);let g;for(g=0;g<f.length;g+=1){const w=Te(u,f,g);o[g]?o[g].p(w,p):(o[g]=He(w),o[g].c(),o[g].m(n,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=f.length}},d(u){u&&M(e),We(o,u)}}}function Mt(t){let e;return{c(){e=d("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[5vh] h-[5vh]"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"></path></svg> ',s(e,"class","ring-1 ring-black shadow-md shadow-black rounded-full")},m(n,l){P(n,e,l)},p:O,d(n){n&&M(e)}}}function Pt(t){let e,n,l;return{c(){e=d("img"),s(e,"loading","lazy"),fe(e.src,n=t[0].track.album.images[0].url)||s(e,"src",n),s(e,"class",l="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-md shadow-black "+(t[0].track.id==t[3].id&&t[3].is?"animate-spin":"")),s(e,"alt","album")},m(r,i){P(r,e,i)},p(r,i){i&2&&!fe(e.src,n=r[0].track.album.images[0].url)&&s(e,"src",n),i&10&&l!==(l="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-md shadow-black "+(r[0].track.id==r[3].id&&r[3].is?"animate-spin":""))&&s(e,"class",l)},d(r){r&&M(e)}}}function He(t){let e;function n(i,a){return i[0].track?Pt:Mt}let l=n(t),r=l(t);return{c(){r.c(),e=ct()},m(i,a){r.m(i,a),P(i,e,a)},p(i,a){l===(l=n(i))&&r?r.p(i,a):(r.d(1),r=l(i),r&&(r.c(),r.m(e.parentNode,e)))},d(i){i&&M(e),r.d(i)}}}function It(t){let e,n,l,r,i,a,h,f,o,u=t[0].name+"",p,g,w,m,j,v,y,A=t[0].description+"",U,D,b,L,N,R,K,J,V,W=t[4]&&Object.keys(t[1]).length>0,ne,de;function X(k,B){return k[0].images.length>0?$t:xt}let z=X(t),I=z(t);function x(k,B){return k[4]?At:jt}let le=x(t),_=le(t);function E(k,B){return k[3].is?Et:k[2].length>0?Ct:Lt}let $=E(t),F=$(t),q=t[2].length>0&&!t[3].is&&De(t),T=W&&Ne(t);return{c(){e=d("div"),n=d("div"),r=C(),i=d("div"),a=d("div"),I.c(),h=C(),f=d("div"),o=d("a"),p=S(u),g=C(),w=H("svg"),m=H("path"),v=C(),y=d("p"),U=S(A),D=C(),b=d("div"),L=d("button"),_.c(),N=C(),R=d("button"),F.c(),J=C(),q&&q.c(),V=C(),T&&T.c(),s(n,"class","h-full absolute backdrop-invert brightness-50 left-0 top-0 rounded-md"),Le(n,"width",t[5]/100*90+"vw"),n.hidden=l=!t[3].is,s(a,"class","col-span-1 flex flex-col items-center justify-center"),s(m,"stroke-linecap","round"),s(m,"stroke-linejoin","round"),s(m,"d","M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"),s(w,"xmlns","http://www.w3.org/2000/svg"),s(w,"fill","none"),s(w,"viewBox","0 0 24 24"),s(w,"stroke-width","1.5"),s(w,"stroke","currentColor"),s(w,"class","w-4 h-4 inline"),s(o,"class","hover:scale-110 duration-75 text-left line-clamp-1"),s(o,"href",j=t[0].external_urls.spotify),s(o,"target","_blank"),s(y,"class","text-xs line-clamp-1"),s(L,"class","bg-transparent text-white ring-1 p-1 ring-zinc-500"),s(R,"class","text-xs bg-aodPurple p-1"),R.disabled=K=t[3].is||t[2].length>0,s(b,"class","flex flex-row space-x-2"),s(f,"class","col-span-3 flex flex-col justify-center items-start"),s(i,"class","grid grid-cols-4 w-full gap-1"),s(e,"class","bg-gray-950 ring-1 ring-zinc-500 py-2 rounded-md w-[90vw] text-center relative transition-all duration-150")},m(k,B){P(k,e,B),c(e,n),c(e,r),c(e,i),c(i,a),I.m(a,null),c(i,h),c(i,f),c(f,o),c(o,p),c(o,g),c(o,w),c(w,m),c(f,v),c(f,y),c(y,U),c(f,D),c(f,b),c(b,L),_.m(L,null),c(b,N),c(b,R),F.m(R,null),c(b,J),q&&q.m(b,null),c(i,V),T&&T.m(i,null),ne||(de=[Q(L,"click",t[7]),Q(R,"click",t[9])],ne=!0)},p(k,[B]){B&32&&Le(n,"width",k[5]/100*90+"vw"),B&8&&l!==(l=!k[3].is)&&(n.hidden=l),z===(z=X(k))&&I?I.p(k,B):(I.d(1),I=z(k),I&&(I.c(),I.m(a,null))),B&1&&u!==(u=k[0].name+"")&&Y(p,u),B&1&&j!==(j=k[0].external_urls.spotify)&&s(o,"href",j),B&1&&A!==(A=k[0].description+"")&&Y(U,A),le!==(le=x(k))&&(_.d(1),_=le(k),_&&(_.c(),_.m(L,null))),$!==($=E(k))&&(F.d(1),F=$(k),F&&(F.c(),F.m(R,null))),B&12&&K!==(K=k[3].is||k[2].length>0)&&(R.disabled=K),k[2].length>0&&!k[3].is?q?q.p(k,B):(q=De(k),q.c(),q.m(b,null)):q&&(q.d(1),q=null),B&18&&(W=k[4]&&Object.keys(k[1]).length>0),W?T?T.p(k,B):(T=Ne(k),T.c(),T.m(i,null)):T&&(T.d(1),T=null)},i:O,o:O,d(k){k&&M(e),I.d(),_.d(),F.d(),q&&q.d(),T&&T.d(),ne=!1,te(de)}}}function Ot(t,e,n){let l,r={},i=[],{track:a}=e;const h={is:!1,id:""};let f=!1,o=yt(0,{duration:1e3,easing:vt});Pe(t,o,m=>n(5,l=m));const u=()=>{f==!1?(Object.keys(r).length==0&&p(),n(4,f=!0)):n(4,f=!1)},p=()=>{const m=a.external_urls.spotify,v=new URL(m).pathname.split("/")[2];pe.getPlaylistInfo(v).then(y=>{n(1,r=y)})},g=()=>{i.forEach((m,j)=>{const v=URL.createObjectURL(m),y=document.createElement("a");y.href=v,y.download=`${a.name}-${j+1}.mp3`,y.click()})},w=()=>{if(Object.keys(r).length==0&&p(),!r.tracks)return;n(3,h.is=!0,h),o.set(0,{duration:100}),o.set(100,{duration:1e4});let m=r.tracks.items[0].track;pe.getDownloadTrack(m.external_urls.spotify,"",!0).then(async j=>{if(j.success==!1){ce(o,l=0,l),n(3,h.is=!1,h),alert(j.info);return}ce(o,l=1/r.tracks.total*100,l);const v=j.data.unique_code;for(const[y,{track:A}]of r.tracks.items.splice(1).entries())A&&n(3,h.id=A.id,h),(await pe.getDownloadTrack(A.external_urls.spotify,v,!1)).success==!1&&console.log("failed downloading",A.name),ce(o,l=(y+2)/r.tracks.total*100,l);await o.set(100),await o.set(0,{delay:500}),o.set(100,{duration:1e4});for(let y=0;y<r.tracks.total;y++){let[A,U]=await pe.getStreamPlaylist(v);if(!A){console.log("failed streaming",a.name);continue}n(2,i=[...i,U])}n(3,h.is=!1,h)})};return t.$$set=m=>{"track"in m&&n(0,a=m.track)},[a,r,i,h,f,l,o,u,g,w]}class St extends $e{constructor(e){super(),xe(this,e,Ot,It,_e,{track:0})}}const ge=et({loggedIn:!1,user:{},playlists:{}});function Re(t,e,n){const l=t.slice();return l[2]=e[n],l}function Ut(t){let e,n;return{c(){e=H("svg"),n=H("path"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","1.5"),s(e,"stroke","currentColor"),s(e,"class","w-[10vh] h-[10vh] rounded-full ring-aodBg ring-2")},m(l,r){P(l,e,r),c(e,n)},p:O,d(l){l&&M(e)}}}function zt(t){let e,n,l;return{c(){e=d("img"),s(e,"loading","lazy"),fe(e.src,n=t[0].user.images[1].url)||s(e,"src",n),s(e,"alt",l=`${t[0].user.display_name}'s profile picture`),s(e,"class","rounded-full h-[10vh] ring-aodBg ring-2 shadow-md shadow-black")},m(r,i){P(r,e,i)},p(r,i){i&1&&!fe(e.src,n=r[0].user.images[1].url)&&s(e,"src",n),i&1&&l!==(l=`${r[0].user.display_name}'s profile picture`)&&s(e,"alt",l)},d(r){r&&M(e)}}}function Ve(t){let e,n;return e=new St({props:{track:t[2]}}),{c(){Ie(e.$$.fragment)},m(l,r){ve(e,l,r),n=!0},p(l,r){const i={};r&1&&(i.track=l[2]),e.$set(i)},i(l){n||(G(e.$$.fragment,l),n=!0)},o(l){ee(e.$$.fragment,l),n=!1},d(l){ye(e,l)}}}function Bt(t){let e,n,l,r,i,a,h=t[0].user.display_name+"",f,o,u,p=t[0].user.followers.total+"",g,w,m=t[0].playlists.total+"",j,v,y,A,U=t[0].user.id+"",D,b,L,N,R,K,J,V,W,ne;function de(_,E){return _[0].user.images.length==2?zt:Ut}let X=de(t),z=X(t),I=ke(t[0].playlists.items),x=[];for(let _=0;_<I.length;_+=1)x[_]=Ve(Re(t,I,_));const le=_=>ee(x[_],1,1,()=>{x[_]=null});return{c(){e=d("div"),n=d("div"),l=d("div"),z.c(),r=C(),i=d("div"),a=d("p"),f=S(h),o=C(),u=d("p"),g=S(p),w=S(" followers, "),j=S(m),v=S(" playlists"),y=C(),A=d("p"),D=S(U),b=C(),L=d("div"),N=d("button"),N.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.5em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"></path></svg>logout',R=C(),K=d("div"),J=d("div");for(let _=0;_<x.length;_+=1)x[_].c();s(a,"class","font-semibold"),Le(a,"text-shadow","4px 3px 8px rgba(0,0,0,1)"),s(u,"class","text-xs"),s(A,"class","text-xs"),s(i,"class","flex flex-col justify-center items-start"),s(l,"class","flex flex-row items-center justify-center space-x-5"),s(N,"class","text-sm p-0.5 bg-red-500 text-white"),s(n,"class","flex flex-row justify-center items-center h-[13vh] space-x-4 bg-gradient-to-t from-gray-950 via-zinc-500 to-zinc-500 w-[90vw] rounded-t-xl ring-1 ring-zinc-500"),s(J,"class","flex flex-col justify-center items-center w-full space-y-2 pb-1"),s(K,"class","h-[67vh] overflow-y-scroll w-[100vw]"),s(e,"class","flex flex-col items-center -space-y-1")},m(_,E){P(_,e,E),c(e,n),c(n,l),z.m(l,null),c(l,r),c(l,i),c(i,a),c(a,f),c(i,o),c(i,u),c(u,g),c(u,w),c(u,j),c(u,v),c(i,y),c(i,A),c(A,D),c(n,b),c(n,L),c(L,N),c(e,R),c(e,K),c(K,J);for(let $=0;$<x.length;$+=1)x[$]&&x[$].m(J,null);V=!0,W||(ne=Q(N,"click",t[1]),W=!0)},p(_,[E]){if(X===(X=de(_))&&z?z.p(_,E):(z.d(1),z=X(_),z&&(z.c(),z.m(l,r))),(!V||E&1)&&h!==(h=_[0].user.display_name+"")&&Y(f,h),(!V||E&1)&&p!==(p=_[0].user.followers.total+"")&&Y(g,p),(!V||E&1)&&m!==(m=_[0].playlists.total+"")&&Y(j,m),(!V||E&1)&&U!==(U=_[0].user.id+"")&&Y(D,U),E&1){I=ke(_[0].playlists.items);let $;for($=0;$<I.length;$+=1){const F=Re(_,I,$);x[$]?(x[$].p(F,E),G(x[$],1)):(x[$]=Ve(F),x[$].c(),G(x[$],1),x[$].m(J,null))}for(Ye(),$=I.length;$<x.length;$+=1)le($);Ze()}},i(_){if(!V){for(let E=0;E<I.length;E+=1)G(x[E]);V=!0}},o(_){x=x.filter(Boolean);for(let E=0;E<x.length;E+=1)ee(x[E]);V=!1},d(_){_&&M(e),z.d(),We(x,_),W=!1,ne()}}}function qt(t,e,n){let l;return Pe(t,ge,i=>n(0,l=i)),[l,()=>{localStorage.removeItem("cartier-userid"),ce(ge,l.loggedIn=!1,l)}]}class Tt extends $e{constructor(e){super(),xe(this,e,qt,Bt,_e,{})}}function Dt(t){let e,n;return e=new Tt({}),{c(){Ie(e.$$.fragment)},m(l,r){ve(e,l,r),n=!0},p:O,i(l){n||(G(e.$$.fragment,l),n=!0)},o(l){ee(e.$$.fragment,l),n=!1},d(l){ye(e,l)}}}function Nt(t){let e,n;return e=new kt({props:{handleUsername:t[1]}}),{c(){Ie(e.$$.fragment)},m(l,r){ve(e,l,r),n=!0},p:O,i(l){n||(G(e.$$.fragment,l),n=!0)},o(l){ee(e.$$.fragment,l),n=!1},d(l){ye(e,l)}}}function Ht(t){let e;return{c(){e=d("span"),e.textContent="PROD",s(e,"class","rounded-sm p-0.5 bg-blue-600")},m(n,l){P(n,e,l)},d(n){n&&M(e)}}}function Rt(t){let e,n,l,r,i,a,h,f,o,u,p,g,w,m;const j=[Nt,Dt],v=[];function y(b,L){return b[0].loggedIn==!1?0:1}i=y(t),a=v[i]=j[i](t);function A(b,L){return Ht}let D=A()(t);return{c(){e=d("main"),n=d("div"),n.innerHTML='<div class="bg-aodPurple shadow-sm shadow-gray-950 rounded-b-md p-2 ml-2 h-full flex flex-col items-center justify-center"><span>reold&#39;s</span></div> <p class="text-3xl">Cartier Manager</p>',l=C(),r=d("div"),a.c(),h=C(),f=d("div"),o=d("p"),D.c(),u=S(`
      Built with ❤️ by
      `),p=d("a"),p.textContent="reold",g=S(`.
      `),w=d("a"),w.textContent="Report an error",s(n,"class","flex flex-row items-center justify-evenly font-bold h-[10vh] pb-2 bg-gray-950 ring-1 ring-zinc-500 shadow-xl"),s(r,"class","w-full flex flex-col items-center justify-center h-[85vh] bg-gradient-to-t from-gray-950 via-[#203A43] to-gray-950"),s(p,"href","https://github.com/reold"),s(p,"target","_blank"),s(p,"class","text-blue-600"),s(w,"href","https://x.com/redicrafty"),s(w,"target","_blank"),s(w,"class","text-blue-600"),s(f,"class","w-full h-[5vh] bg-gray-950 text-sm flex flex-col items-center justify-center"),s(e,"class","w-screen h-screen text-white text-xl select-none")},m(b,L){P(b,e,L),c(e,n),c(e,l),c(e,r),v[i].m(r,null),c(e,h),c(e,f),c(f,o),D.m(o,null),c(o,u),c(o,p),c(o,g),c(o,w),m=!0},p(b,[L]){let N=i;i=y(b),i===N?v[i].p(b,L):(Ye(),ee(v[N],1,1,()=>{v[N]=null}),Ze(),a=v[i],a?a.p(b,L):(a=v[i]=j[i](b),a.c()),G(a,1),a.m(r,null))},i(b){m||(G(a),m=!0)},o(b){ee(a),m=!1},d(b){b&&M(e),v[i].d(),D.d()}}}function Vt(t,e,n){let l;return Pe(t,ge,i=>n(0,l=i)),[l,i=>{pe.getUserInfo(i).then(a=>{if(a.success==!1){alert("something went wrong!");return}ce(ge,l={...a.data},l),ce(ge,l.loggedIn=!0,l)})}]}class Ft extends $e{constructor(e){super(),xe(this,e,Vt,Rt,_e,{})}}new Ft({target:document.getElementById("app")});
