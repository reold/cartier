var Zt=Object.defineProperty;var Bt=(t,e,n)=>e in t?Zt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ve=(t,e,n)=>(Bt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function F(){}const Ke=t=>t;function Ye(t,e){for(const n in e)t[n]=e[n];return t}function Mt(t){return t()}function rt(){return Object.create(null)}function Q(t){t.forEach(Mt)}function ze(t){return typeof t=="function"}function X(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ie;function xe(t,e){return t===e?!0:(Ie||(Ie=document.createElement("a")),Ie.href=e,t===Ie.href)}function Ut(t){return Object.keys(t).length===0}function St(t,...e){if(t==null){for(const l of e)l(void 0);return F}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function R(t){let e;return St(t,n=>e=n)(),e}function V(t,e,n){t.$$.on_destroy.push(St(e,n))}function Ct(t,e,n,l){if(t){const r=qt(t,e,n,l);return t[0](r)}}function qt(t,e,n,l){return t[1]&&l?Ye(n.ctx.slice(),t[1](l(e))):n.ctx}function jt(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],i=Math.max(e.dirty.length,r.length);for(let a=0;a<i;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function At(t,e,n,l,r,s){if(r){const i=qt(e,n,l,s);t.p(i,r)}}function Tt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function A(t,e,n){return t.set(n),e}function Wt(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Et=typeof window<"u";let et=Et?()=>window.performance.now():()=>Date.now(),tt=Et?t=>requestAnimationFrame(t):F;const ke=new Set;function Ot(t){ke.forEach(e=>{e.c(t)||(ke.delete(e),e.f())}),ke.size!==0&&tt(Ot)}function lt(t){let e;return ke.size===0&&tt(Ot),{promise:new Promise(n=>{ke.add(e={c:t,f:n})}),abort(){ke.delete(e)}}}function f(t,e){t.appendChild(e)}function Dt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function zt(t){const e=w("style");return e.textContent="/* empty */",Vt(Dt(t),e),e.sheet}function Vt(t,e){return f(t.head||t,e),e.sheet}function q(t,e,n){t.insertBefore(e,n||null)}function M(t){t.parentNode&&t.parentNode.removeChild(t)}function Pe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function J(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function I(t){return document.createTextNode(t)}function j(){return I(" ")}function Se(){return I("")}function H(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Rt(t){return Array.from(t.childNodes)}function le(t,e){e=""+e,t.data!==e&&(t.data=e)}function st(t,e){t.value=e??""}function Ae(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function it(t,e,n){t.classList.toggle(e,!!n)}function Yt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}const Be=new Map;let Ue=0;function Gt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Jt(t,e){const n={stylesheet:zt(e),rules:{}};return Be.set(t,n),n}function Ge(t,e,n,l,r,s,i,a=0){const o=16.666/l;let u=`{
`;for(let y=0;y<=1;y+=o){const v=e+(n-e)*s(y);u+=y*100+`%{${i(v,1-v)}}
`}const d=u+`100% {${i(n,1-n)}}
}`,p=`__svelte_${Gt(d)}_${a}`,g=Dt(t),{stylesheet:h,rules:m}=Be.get(g)||Jt(g,t);m[p]||(m[p]=!0,h.insertRule(`@keyframes ${p} ${d}`,h.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?`${b}, `:""}${p} ${l}ms linear ${r}ms 1 both`,Ue+=1,p}function Je(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),r=n.length-l.length;r&&(t.style.animation=l.join(", "),Ue-=r,Ue||Qt())}function Qt(){tt(()=>{Ue||(Be.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&M(e)}),Be.clear())})}let Te;function qe(t){Te=t}function Xt(){if(!Te)throw new Error("Function called outside component initialization");return Te}function Le(t){Xt().$$.on_mount.push(t)}const ye=[],Ee=[];let $e=[];const at=[],Kt=Promise.resolve();let Qe=!1;function el(){Qe||(Qe=!0,Kt.then(Pt))}function de(t){$e.push(t)}const Re=new Set;let ve=0;function Pt(){if(ve!==0)return;const t=Te;do{try{for(;ve<ye.length;){const e=ye[ve];ve++,qe(e),tl(e.$$)}}catch(e){throw ye.length=0,ve=0,e}for(qe(null),ye.length=0,ve=0;Ee.length;)Ee.pop()();for(let e=0;e<$e.length;e+=1){const n=$e[e];Re.has(n)||(Re.add(n),n())}$e.length=0}while(ye.length);for(;at.length;)at.pop()();Qe=!1,Re.clear(),qe(t)}function tl(t){if(t.fragment!==null){t.update(),Q(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(de)}}function ll(t){const e=[],n=[];$e.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),$e=e}let Ce;function Ft(){return Ce||(Ce=Promise.resolve(),Ce.then(()=>{Ce=null})),Ce}function je(t,e,n){t.dispatchEvent(Yt(`${e?"intro":"outro"}${n}`))}const Ne=new Set;let ue;function he(){ue={r:0,c:[],p:ue}}function we(){ue.r||Q(ue.c),ue=ue.p}function E(t,e){t&&t.i&&(Ne.delete(t),t.i(e))}function D(t,e,n,l){if(t&&t.o){if(Ne.has(t))return;Ne.add(t),ue.c.push(()=>{Ne.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const Ht={duration:0};function nl(t,e,n){const l={direction:"in"};let r=e(t,n,l),s=!1,i,a,o=0;function u(){i&&Je(t,i)}function d(){const{delay:g=0,duration:h=300,easing:m=Ke,tick:b=F,css:y}=r||Ht;y&&(i=Ge(t,0,1,h,g,m,y,o++)),b(0,1);const v=et()+g,k=v+h;a&&a.abort(),s=!0,de(()=>je(t,!0,"start")),a=lt(_=>{if(s){if(_>=k)return b(1,0),je(t,!0,"end"),u(),s=!1;if(_>=v){const x=m((_-v)/h);b(x,1-x)}}return s})}let p=!1;return{start(){p||(p=!0,Je(t),ze(r)?(r=r(l),Ft().then(d)):d())},invalidate(){p=!1},end(){s&&(u(),s=!1)}}}function Me(t,e,n,l){let s=e(t,n,{direction:"both"}),i=l?0:1,a=null,o=null,u=null,d;function p(){u&&Je(t,u)}function g(m,b){const y=m.b-i;return b*=Math.abs(y),{a:i,b:m.b,d:y,duration:b,start:m.start,end:m.start+b,group:m.group}}function h(m){const{delay:b=0,duration:y=300,easing:v=Ke,tick:k=F,css:_}=s||Ht,x={start:et()+b,b:m};m||(x.group=ue,ue.r+=1),"inert"in t&&(m?d!==void 0&&(t.inert=d):(d=t.inert,t.inert=!0)),a||o?o=x:(_&&(p(),u=Ge(t,i,m,y,b,v,_)),m&&k(0,1),a=g(x,y),de(()=>je(t,m,"start")),lt($=>{if(o&&$>o.start&&(a=g(o,y),o=null,je(t,a.b,"start"),_&&(p(),u=Ge(t,i,a.b,a.duration,0,v,s.css))),a){if($>=a.end)k(i=a.b,1-i),je(t,a.b,"end"),o||(a.b?p():--a.group.r||Q(a.group.c)),a=null;else if($>=a.start){const C=$-a.start;i=a.a+a.d*v(C/a.duration),k(i,1-i)}}return!!(a||o)}))}return{run(m){ze(s)?Ft().then(()=>{s=s({direction:m?"in":"out"}),h(m)}):h(m)},end(){p(),a=o=null}}}function oe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ae(t){t&&t.c()}function ee(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),de(()=>{const s=t.$$.on_mount.map(Mt).filter(ze);t.$$.on_destroy?t.$$.on_destroy.push(...s):Q(s),t.$$.on_mount=[]}),r.forEach(de)}function te(t,e){const n=t.$$;n.fragment!==null&&(ll(n.after_update),Q(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function rl(t,e){t.$$.dirty[0]===-1&&(ye.push(t),el(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ne(t,e,n,l,r,s,i=null,a=[-1]){const o=Te;qe(t);const u=t.$$={fragment:null,ctx:[],props:s,update:F,not_equal:r,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:rt(),dirty:a,skip_bound:!1,root:e.target||o.$$.root};i&&i(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(p,g,...h)=>{const m=h.length?h[0]:g;return u.ctx&&r(u.ctx[p],u.ctx[p]=m)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](m),d&&rl(t,p)),g}):[],u.update(),d=!0,Q(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const p=Rt(e.target);u.fragment&&u.fragment.l(p),p.forEach(M)}else u.fragment&&u.fragment.c();e.intro&&E(t.$$.fragment),ee(t,e.target,e.anchor),Pt()}qe(o)}class re{constructor(){Ve(this,"$$");Ve(this,"$$set")}$destroy(){te(this,1),this.$destroy=F}$on(e,n){if(!ze(n))return F;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!Ut(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const sl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(sl);window["cartier-server-url"]="https://cartier-beta.glitch.me";const fe={getRoot:async()=>await(await fetch(`${window["cartier-server-url"]}/`)).json(),getUserInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/api/user?username=${t}`)).json(),getPlaylistInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/api/playlist?id=${t}`)).json(),getDownloadPlaylist:async t=>await(await fetch(`${window["cartier-server-url"]}/api/download?link=${t}`)).json(),getDownloadStatus:async t=>await(await fetch(`${window["cartier-server-url"]}/api/status?key=${t}`)).json(),getDownloadTrack:async(t,e="",n=!1)=>await(await fetch(`${window["cartier-server-url"]}/api/track?link=${t}&key=${e}&create=${n}`)).json(),getStreamPlaylist:async t=>{let e=await fetch(`${window["cartier-server-url"]}/api/stream?key=${t}`);return[await e.ok,await e.blob(),e.headers.get("x-trackid")]}},_e=[];function pe(t,e=F){let n;const l=new Set;function r(a){if(X(t,a)&&(t=a,n)){const o=!_e.length;for(const u of l)u[1](),_e.push(u,t);if(o){for(let u=0;u<_e.length;u+=2)_e[u][0](_e[u+1]);_e.length=0}}}function s(a){r(a(t))}function i(a,o=F){const u=[a,o];return l.add(u),l.size===1&&(n=e(r,s)||F),a(t),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:i}}function ot(t){return 1-Math.sqrt(1-t*t)}function It(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function il(t){const e=t-1;return e*e*e+1}function ct(t,{delay:e=0,duration:n=400,easing:l=It,amount:r=5,opacity:s=0}={}){const i=getComputedStyle(t),a=+i.opacity,o=i.filter==="none"?"":i.filter,u=a*(1-s),[d,p]=Wt(r);return{delay:e,duration:n,easing:l,css:(g,h)=>`opacity: ${a-u*h}; filter: ${o} blur(${h*d}${p});`}}function Oe(t,{delay:e=0,duration:n=400,easing:l=il,axis:r="y"}={}){const s=getComputedStyle(t),i=+s.opacity,a=r==="y"?"height":"width",o=parseFloat(s[a]),u=r==="y"?["top","bottom"]:["left","right"],d=u.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),p=parseFloat(s[`padding${d[0]}`]),g=parseFloat(s[`padding${d[1]}`]),h=parseFloat(s[`margin${d[0]}`]),m=parseFloat(s[`margin${d[1]}`]),b=parseFloat(s[`border${d[0]}Width`]),y=parseFloat(s[`border${d[1]}Width`]);return{delay:e,duration:n,easing:l,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*i};${a}: ${v*o}px;padding-${u[0]}: ${v*p}px;padding-${u[1]}: ${v*g}px;margin-${u[0]}: ${v*h}px;margin-${u[1]}: ${v*m}px;border-${u[0]}-width: ${v*b}px;border-${u[1]}-width: ${v*y}px;`}}function ut(t){let e,n,l,r;const s=t[2].default,i=Ct(s,t,t[1],null);return{c(){e=w("div"),n=w("div"),i&&i.c(),c(n,"class","bg-foreground p-2 rounded-md ring-1 ring-border max-w-[90vw] flex flex-col"),c(e,"class","absolute top-0 left-0 w-full h-full backdrop-blur-md flex flex-col items-center justify-center text-center text-xs")},m(a,o){q(a,e,o),f(e,n),i&&i.m(n,null),r=!0},p(a,o){i&&i.p&&(!r||o&2)&&At(i,s,a,a[1],r?jt(s,a[1],o,null):Tt(a[1]),null)},i(a){r||(E(i,a),a&&de(()=>{r&&(l||(l=Me(e,ct,{duration:500},!0)),l.run(1))}),r=!0)},o(a){D(i,a),a&&(l||(l=Me(e,ct,{duration:500},!1)),l.run(0)),r=!1},d(a){a&&M(e),i&&i.d(a),a&&l&&l.end()}}}function al(t){let e,n,l=!t[0]&&ut(t);return{c(){l&&l.c(),e=Se()},m(r,s){l&&l.m(r,s),q(r,e,s),n=!0},p(r,[s]){r[0]?l&&(he(),D(l,1,1,()=>{l=null}),we()):l?(l.p(r,s),s&1&&E(l,1)):(l=ut(r),l.c(),E(l,1),l.m(e.parentNode,e))},i(r){n||(E(l),n=!0)},o(r){D(l),n=!1},d(r){r&&M(e),l&&l.d(r)}}}function ol(t,e,n){let{$$slots:l={},$$scope:r}=e,{hidden:s=!1}=e;return t.$$set=i=>{"hidden"in i&&n(0,s=i.hidden),"$$scope"in i&&n(1,r=i.$$scope)},[s,r,l]}class cl extends re{constructor(e){super(),ne(this,e,ol,al,X,{hidden:0})}}function dt(t){let e,n;return{c(){e=J("svg"),n=J("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width","1.5"),c(e,"stroke","currentColor"),c(e,"class","aspect-square w-[1.2em] animate-spin inline")},m(l,r){q(l,e,r),f(e,n)},d(l){l&&M(e)}}}function ul(t){let e,n,l,r,s,i,a=t[0].step+"",o,u=t[0].is&&dt();return{c(){e=w("h1"),e.textContent="Starting Up Servers!",n=j(),l=w("p"),l.textContent=`Our servers take a little break every few minutes when things quiet down.
    We're in the process of waking them up for you. It's automatic, so no need
    to stress!`,r=j(),s=w("p"),u&&u.c(),i=j(),o=I(a),c(e,"class","text-2xl"),c(l,"class","text-xs text-white/70 inline"),c(s,"class","inline"),it(s,"text-green-500",!t[0].is)},m(d,p){q(d,e,p),q(d,n,p),q(d,l,p),q(d,r,p),q(d,s,p),u&&u.m(s,null),f(s,i),f(s,o)},p(d,p){d[0].is?u||(u=dt(),u.c(),u.m(s,i)):u&&(u.d(1),u=null),p&1&&a!==(a=d[0].step+"")&&le(o,a),p&1&&it(s,"text-green-500",!d[0].is)},d(d){d&&(M(e),M(n),M(l),M(r),M(s)),u&&u.d()}}}function dl(t){let e,n;return e=new cl({props:{hidden:!t[0].is,$$slots:{default:[ul]},$$scope:{ctx:t}}}),{c(){ae(e.$$.fragment)},m(l,r){ee(e,l,r),n=!0},p(l,[r]){const s={};r&1&&(s.hidden=!l[0].is),r&9&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function fl(t,e,n){let l;const r=pe({step:"trying to make contact",is:!0});V(t,r,i=>n(0,l=i));let{handleWakeup:s}=e;return Le(()=>{A(r,l.step="waking up servers",l),fe.getRoot().then(i=>{A(r,l.is=!1,l),A(r,l.step="servers are running!",l),s()}).catch(i=>{B(`servers are unreachable (${i})`),A(r,l.step="servers are unreachable (reload?)",l)})}),t.$$set=i=>{"handleWakeup"in i&&n(2,s=i.handleWakeup)},[l,r,s]}class pl extends re{constructor(e){super(),ne(this,e,fl,dl,X,{handleWakeup:2})}}function gl(t){let e,n,l,r,s,i,a,o,u,d,p,g,h,m,b,y,v,k,_,x,$,C,L,O,S,Z,be,ge;return e=new pl({props:{handleWakeup:t[2]}}),{c(){ae(e.$$.fragment),n=j(),l=w("div"),r=w("div"),s=w("p"),s.textContent="Welcome aboard!",i=j(),a=w("div"),o=w("div"),u=w("label"),d=w("input"),p=j(),g=w("button"),g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline rounded-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg>',h=j(),m=w("p"),m.textContent="copy your Spotify profile link from your account page",b=j(),y=w("div"),v=w("div"),k=w("label"),_=w("input"),x=j(),$=w("span"),$.textContent="save",C=j(),L=w("button"),L.textContent="continue",O=j(),S=w("details"),S.innerHTML=`<summary class="font-bold mb-2">Know Cartier Manager, The Free Spotify Playlist Downloader</summary> <p class="mb-4">Mobile-friendly, free-to-use Spotify playlist downloader. Share your
          Spotify profile link to effortlessly download all your public
          playlists.</p> <p>Powered by <code>spotify-dl</code> on our servers, Cartier finds and downloads
          songs from YouTube and Deezer based on Spotify data.</p>`,c(s,"class","text-3xl font-black text-white border-border border-b-2 rounded-xl px-2 pb-1"),c(d,"id","spotifyprofilelinkinput"),c(d,"type","text"),c(d,"class","w-full"),c(d,"placeholder","type Spotify profile link"),c(d,"autocomplete","url"),c(d,"aria-label","type spotify profile link"),c(u,"for","spotifyprofilelinkinput"),c(g,"class","bg-background text-white ring-1 ring-border"),c(g,"aria-label","paste spotify profile link from clipboard"),c(o,"class","w-full flex flex-row items-center justify-center space-x-2"),c(m,"class","text-xs svg-icon mt-[0.5em]"),c(a,"class","flex flex-col items-center justify-center"),c(_,"type","checkbox"),c(_,"id","dopersistbtn"),c(_,"class","inline"),c($,"class","align-middle"),c(k,"for","dopersistbtn"),c(k,"class","text-base flex flex-row space-x-2 bg-black p-2 rounded-md"),c(L,"class","hover:scale-110"),c(v,"class","flex flex-row items-center justify-center space-x-3"),c(S,"class","text-xs w-11/12"),c(y,"class","flex flex-col space-x-[0.5em]"),c(r,"class","flex flex-col items-center text-center justify-center bg-foreground ring-1 ring-border rounded-md w-11/12 space-y-7 p-3 max-w-[90vw] h-full"),c(l,"class","flex flex-col justify-center items-center")},m(P,ce){ee(e,P,ce),q(P,n,ce),q(P,l,ce),f(l,r),f(r,s),f(r,i),f(r,a),f(a,o),f(o,u),f(u,d),st(d,t[0]),f(o,p),f(o,g),f(a,h),f(a,m),f(r,b),f(r,y),f(y,v),f(v,k),f(k,_),_.checked=t[1],f(k,x),f(k,$),f(v,C),f(v,L),f(y,O),f(y,S),Z=!0,be||(ge=[H(d,"input",t[6]),H(g,"click",t[3]),H(_,"change",t[7]),H(L,"click",t[4])],be=!0)},p(P,[ce]){ce&1&&d.value!==P[0]&&st(d,P[0]),ce&2&&(_.checked=P[1])},i(P){Z||(E(e.$$.fragment,P),Z=!0)},o(P){D(e.$$.fragment,P),Z=!1},d(P){P&&(M(n),M(l)),te(e,P),be=!1,Q(ge)}}}function ml(t,e,n){const l=()=>{const p=localStorage.getItem("cartier-userid");p&&(console.info("performing auto login for",p),B("performing auto-login",!0,5,async g=>{await r(p),g()}))};let{handleUsername:r}=e,s="",i=!0;const a=async()=>{navigator.clipboard.readText?n(0,s=await navigator.clipboard.readText()):B("unable to use the clipboard",!1,.5)},o=()=>{let p;try{p=new URL(s)}catch{n(0,s="");return}const g=p.pathname.split("/")[2];i&&(localStorage.setItem("cartier-userid",g),B("login information saved!")),r(g)};function u(){s=this.value,n(0,s)}function d(){i=this.checked,n(1,i)}return t.$$set=p=>{"handleUsername"in p&&n(5,r=p.handleUsername)},[s,i,l,a,o,r,u,d]}class hl extends re{constructor(e){super(),ne(this,e,ml,gl,X,{handleUsername:5})}}var U=(t=>(t[t.PLAYLISTS=0]="PLAYLISTS",t[t.DOWNLOADED=1]="DOWNLOADED",t[t.SETTINGS=2]="SETTINGS",t[t.ACCOUNT=3]="ACCOUNT",t))(U||{});const Y=pe({logged:!1,user:{},playlists:{downloaded:[],all:[]},view:{tab:0}}),me=pe({handle:{root:{},cartierFile:{},tracksDir:{}}}),K=pe({playlists:[],tracks:[],info:{type:"",version:0}}),wl=pe({io:{},loaded:!1}),De={setOPFSHandle:async()=>{let t=R(me);t.handle.root=await navigator.storage.getDirectory(),t.handle.cartierFile=await t.handle.root.getFileHandle("cartier.json",{create:!0}),t.handle.tracksDir=await t.handle.root.getDirectoryHandle("tracks",{create:!0}),me.set(t)},bufferCartierFile:async()=>{let t=R(me);const e=await t.handle.cartierFile.getFile();K.set(JSON.parse(await e.text())),K.subscribe(async n=>{const l=await t.handle.cartierFile.createWritable();await l.write(JSON.stringify(n)),await l.close()})},initCartierFile:async()=>{await De.setOPFSHandle();let t=R(me);if((await t.handle.cartierFile.getFile()).size==0){console.info("cartier file is empty!");const n=await t.handle.cartierFile.createWritable();await n.write(JSON.stringify({info:{type:"cartier-file",version:1},playlists:[],tracks:[]})),await n.close()}await De.bufferCartierFile()},login:async t=>{let e=await fe.getUserInfo(t);if(e.success==!1)return!1;Y.set({...R(Y),...e.data,logged:!0})},logout:async()=>{localStorage.removeItem("cartier-userid"),Y.update(t=>(t.logged=!1,t.playlists={all:[],downloaded:[]},t.user={},t))}};function ft(t,e,n){const l=t.slice();return l[7]=e[n][0],l[8]=e[n][1],l}function pt(t){let e,n;return{c(){e=J("svg"),n=J("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"d","M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"),c(n,"class","svelte-1qpwcl7"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width","1.5"),c(e,"stroke","currentColor"),c(e,"class","w-[1em] svelte-1qpwcl7")},m(l,r){q(l,e,r),f(e,n)},d(l){l&&M(e)}}}function gt(t){let e,n,l=t[7].startsWith("r"),r,s=t[7].slice(1).split("_").join(" ")+"",i,a,o,u=t[8]+"",d,p=l&&pt();return{c(){e=w("tr"),n=w("td"),p&&p.c(),r=j(),i=I(s),a=j(),o=w("td"),d=I(u),c(n,"class","svg-icon p-2 svelte-1qpwcl7"),c(o,"class","bg-transparent border-l-2 border-border svelte-1qpwcl7"),c(e,"class","odd:bg-foreground even:bg-background svelte-1qpwcl7")},m(g,h){q(g,e,h),f(e,n),p&&p.m(n,null),f(n,r),f(n,i),f(e,a),f(e,o),f(o,d)},p(g,h){h&1&&(l=g[7].startsWith("r")),l?p||(p=pt(),p.c(),p.m(n,r)):p&&(p.d(1),p=null),h&1&&s!==(s=g[7].slice(1).split("_").join(" ")+"")&&le(i,s),h&1&&u!==(u=g[8]+"")&&le(d,u)},d(g){g&&M(e),p&&p.d()}}}function bl(t){let e,n,l,r,s,i,a,o,u,d,p,g,h,m,b,y,v,k,_=oe(Object.entries(t[0])),x=[];for(let $=0;$<_.length;$+=1)x[$]=gt(ft(t,_,$));return{c(){e=w("div"),n=w("table"),l=w("thead"),l.innerHTML='<th class="svelte-1qpwcl7">parameter</th><th class="svelte-1qpwcl7">value</th>',r=j(),s=w("tbody");for(let $=0;$<x.length;$+=1)x[$].c();i=j(),a=w("div"),o=w("button"),o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M8.478 1.6a.75.75 0 0 1 .273 1.026 3.72 3.72 0 0 0-.425 1.121c.058.058.118.114.18.168A4.491 4.491 0 0 1 12 2.25c1.413 0 2.673.651 3.497 1.668.06-.054.12-.11.178-.167a3.717 3.717 0 0 0-.426-1.125.75.75 0 1 1 1.298-.752 5.22 5.22 0 0 1 .671 2.046.75.75 0 0 1-.187.582c-.241.27-.505.52-.787.749a4.494 4.494 0 0 1 .216 2.1c-.106.792-.753 1.295-1.417 1.403-.182.03-.364.057-.547.081.152.227.273.476.359.742a23.122 23.122 0 0 0 3.832-.803 23.241 23.241 0 0 0-.345-2.634.75.75 0 0 1 1.474-.28c.21 1.115.348 2.256.404 3.418a.75.75 0 0 1-.516.75c-1.527.499-3.119.854-4.76 1.049-.074.38-.22.735-.423 1.05 2.066.209 4.058.672 5.943 1.358a.75.75 0 0 1 .492.75 24.665 24.665 0 0 1-1.189 6.25.75.75 0 0 1-1.425-.47 23.14 23.14 0 0 0 1.077-5.306c-.5-.169-1.009-.32-1.524-.455.068.234.104.484.104.746 0 3.956-2.521 7.5-6 7.5-3.478 0-6-3.544-6-7.5 0-.262.037-.511.104-.746-.514.135-1.022.286-1.522.455.154 1.838.52 3.616 1.077 5.307a.75.75 0 1 1-1.425.468 24.662 24.662 0 0 1-1.19-6.25.75.75 0 0 1 .493-.749 24.586 24.586 0 0 1 4.964-1.24h.01c.321-.046.644-.085.969-.118a2.983 2.983 0 0 1-.424-1.05 24.614 24.614 0 0 1-4.76-1.05.75.75 0 0 1-.516-.75c.057-1.16.194-2.302.405-3.417a.75.75 0 0 1 1.474.28c-.164.862-.28 1.74-.345 2.634 1.237.371 2.517.642 3.832.803.085-.266.207-.515.359-.742a18.698 18.698 0 0 1-.547-.08c-.664-.11-1.311-.612-1.417-1.404a4.535 4.535 0 0 1 .217-2.103 6.788 6.788 0 0 1-.788-.751.75.75 0 0 1-.187-.583 5.22 5.22 0 0 1 .67-2.04.75.75 0 0 1 1.026-.273Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <a href="https://github.com/reold/cartier/issues/new" target="_blank" class="svelte-1qpwcl7">report a bug</a>',u=j(),d=w("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path d="M4.08 5.227A3 3 0 0 1 6.979 3H17.02a3 3 0 0 1 2.9 2.227l2.113 7.926A5.228 5.228 0 0 0 18.75 12H5.25a5.228 5.228 0 0 0-3.284 1.153L4.08 5.227Z" class="svelte-1qpwcl7"></path><path fill-rule="evenodd" d="M5.25 13.5a3.75 3.75 0 1 0 0 7.5h13.5a3.75 3.75 0 1 0 0-7.5H5.25Zm10.5 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm3.75-.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">use Render server</p>',p=j(),g=w("button"),g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] svelte-1qpwcl7"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">refresh</p> ',h=w("button"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M16.5 3.75a1.5 1.5 0 0 1 1.5 1.5v13.5a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5V15a.75.75 0 0 0-1.5 0v3.75a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3V5.25a3 3 0 0 0-3-3h-6a3 3 0 0 0-3 3V9A.75.75 0 1 0 9 9V5.25a1.5 1.5 0 0 1 1.5-1.5h6Zm-5.03 4.72a.75.75 0 0 0 0 1.06l1.72 1.72H2.25a.75.75 0 0 0 0 1.5h10.94l-1.72 1.72a.75.75 0 1 0 1.06 1.06l3-3a.75.75 0 0 0 0-1.06l-3-3a.75.75 0 0 0-1.06 0Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">logout</p>',m=j(),b=w("button"),b.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">delete all downloads</p>',c(l,"class","text-xl svelte-1qpwcl7"),c(s,"class","svelte-1qpwcl7"),c(n,"class","text-sm ring-1 ring-border rounded-md min-w-[95vw] svelte-1qpwcl7"),c(o,"class","bg-black text-white svg-icon col-span-5 svelte-1qpwcl7"),c(d,"class","bg-orange-500 text-black svg-icon col-span-5 svelte-1qpwcl7"),c(g,"class","bg-primary text-black svg-icon col-span-4 svelte-1qpwcl7"),c(h,"class","bg-red-500 text-white svg-icon col-span-6 svelte-1qpwcl7"),c(b,"class","bg-red-500 text-white svg-icon col-span-10 svelte-1qpwcl7"),c(a,"class","grid grid-cols-10 gap-2 btns-tab font-bold min-w-[95vw] svelte-1qpwcl7"),c(e,"class","h-[82vh] overflow-y-scroll w-[100vw] flex flex-col items-center justify-center svelte-1qpwcl7"),c(e,"style",y=t[1].view.tab==U.SETTINGS?"":"display: none")},m($,C){q($,e,C),f(e,n),f(n,l),f(n,r),f(n,s);for(let L=0;L<x.length;L+=1)x[L]&&x[L].m(s,null);f(e,i),f(e,a),f(a,o),f(a,u),f(a,d),f(a,p),f(a,g),f(a,h),f(a,m),f(a,b),v||(k=[H(o,"click",t[3]),H(d,"click",t[5]),H(g,"click",t[3]),H(h,"click",t[4]),H(b,"click",t[2])],v=!0)},p($,[C]){if(C&1){_=oe(Object.entries($[0]));let L;for(L=0;L<_.length;L+=1){const O=ft($,_,L);x[L]?x[L].p(O,C):(x[L]=gt(O),x[L].c(),x[L].m(s,null))}for(;L<x.length;L+=1)x[L].d(1);x.length=_.length}C&2&&y!==(y=$[1].view.tab==U.SETTINGS?"":"display: none")&&c(e,"style",y)},i:F,o:F,d($){$&&M(e),Pe(x,$),v=!1,Q(k)}}}function vl(t,e,n){let l,r;V(t,me,d=>n(6,l=d)),V(t,Y,d=>n(1,r=d));let s={};const i=()=>{B("deleting all downloads and refreshing",!0,10,async d=>{await l.handle.root.removeEntry("tracks",{recursive:!0}),await l.handle.root.removeEntry("cartier.json"),d(),window.location.reload()})},a=()=>{B("loading settings",!0,5,async d=>{let p=0,g="";{const h=await navigator.storage.estimate();h&&(p=h.usage/1024**2)}{const m=await(await fetch("https://api.github.com/repos/reold/cartier/deployments")).json(),b=new Date(m[0].updated_at),v=new Date().getTime()-b.getTime(),k=Math.floor(v/1e3),_=Math.floor(k/60),x=Math.floor(_/60),$=Math.floor(x/24);let C;$>0?C=$===1?"1 day":`${$} days`:x>0?C=x===1?"1 hour":`${x} hours`:_>0?C=_===1?"1 minute":`${_} minutes`:C=k===1?"1 second":`${k} seconds`,g=`${C} ago by ${m[0].creator.login}`}n(0,s={ropfs_used:`${p.toFixed(1)} MB`,rsaved_userid:localStorage.getItem("cartier-userid")||"not saved",rserver_url:window["cartier-server-url"],rfrontend_updated:g,wthank_you_for:"testing our beta version!"}),d()})};return Le(a),[s,r,i,a,async()=>{await De.logout()},()=>{window["cartier-server-url"]="https://cartier-backend-1.onrender.com",B("waking up Render server",!0,10,async d=>{await fe.getRoot(),d(),a()})}]}class _l extends re{constructor(e){super(),ne(this,e,vl,bl,X,{})}}const z=pe({loaded:!1,queue:[],playback:{handle:{},id:"",name:"",dur:1,time:0,playing:!1}}),G={play:async()=>{let t=R(z);t.loaded||(t.loaded=!0),t.playback.playing=!0;const n=await(await R(me).handle.tracksDir.getFileHandle(`${t.playback.id}.mp3`)).getFile(),l=URL.createObjectURL(n);t.playback.handle=new Audio(l),t.playback.handle.play(),t.playback.handle.addEventListener("loadeddata",()=>{z.update(r=>(r.playback.dur=r.playback.handle.duration,r))}),t.playback.handle.addEventListener("timeupdate",()=>{z.update(r=>(r.playback.time=r.playback.handle.currentTime,r))}),t.playback.handle.addEventListener("ended",()=>{R(z).queue.length>0&&(G.next(),G.play())}),z.set(t)},pause:()=>{let t=R(z);t.playback.handle.pause(),t.playback.playing=!1,z.set(t)},resume:()=>{let t=R(z);t.playback.handle.play(),t.playback.playing=!0,z.set(t)},next:()=>{let t=R(z),e=t.queue[0];return e?(t.playback.playing&&G.pause(),t.playback.name=e.name,t.playback.id=e.id,t.queue.splice(0,1),z.set(t),!0):!1},queue:{addTrack:(t,e=!1)=>{let n=R(z),l=R(K);for(let r of l.tracks)if(r.id==t){n.queue=e?[{id:t,name:r.name},...n.queue]:[...n.queue,{id:t,name:r.name}];break}z.set(n)},addPlaylist:(t,e=!1)=>{const l=R(K).playlists.find(r=>r.id==t);l&&(e&&l.tracks.reverse(),l.tracks.forEach(r=>{G.queue.addTrack(r,e)}))}}};function mt(t,e,n){const l=t.slice();return l[6]=e[n],l}function ht(t){let e,n,l,r=t[6].name+"",s,i;return{c(){e=w("li"),n=J("svg"),l=J("path"),s=I(r),i=j(),c(l,"fill-rule","evenodd"),c(l,"d","M19.952 1.651a.75.75 0 0 1 .298.599V16.303a3 3 0 0 1-2.176 2.884l-1.32.377a2.553 2.553 0 1 1-1.403-4.909l2.311-.66a1.5 1.5 0 0 0 1.088-1.442V6.994l-9 2.572v9.737a3 3 0 0 1-2.176 2.884l-1.32.377a2.553 2.553 0 1 1-1.402-4.909l2.31-.66a1.5 1.5 0 0 0 1.088-1.442V5.25a.75.75 0 0 1 .544-.721l10.5-3a.75.75 0 0 1 .658.122Z"),c(l,"clip-rule","evenodd"),c(n,"xmlns","http://www.w3.org/2000/svg"),c(n,"viewBox","0 0 24 24"),c(n,"fill","currentColor"),c(n,"class","w-[2ch] inline mr-1"),c(e,"class","truncate")},m(a,o){q(a,e,o),f(e,n),f(n,l),f(e,s),f(e,i)},p(a,o){o&2&&r!==(r=a[6].name+"")&&le(s,r)},d(a){a&&M(e)}}}function yl(t){let e,n,l,r=t[0].name+"",s,i,a,o,u=t[0].owner+"",d,p,g,h,m,b,y,v,k,_,x,$=oe(t[1]),C=[];for(let L=0;L<$.length;L+=1)C[L]=ht(mt(t,$,L));return{c(){e=w("div"),n=w("div"),l=w("p"),s=I(r),i=j(),a=w("p"),o=I("by "),d=I(u),p=j(),g=w("ol");for(let L=0;L<C.length;L+=1)C[L].c();h=j(),m=w("button"),m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path fill-rule="evenodd" d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z" clip-rule="evenodd"></path></svg>',b=j(),y=w("button"),y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path d="M5.625 3.75a2.625 2.625 0 1 0 0 5.25h12.75a2.625 2.625 0 0 0 0-5.25H5.625ZM3.75 11.25a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5H3.75ZM3 15.75a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75ZM3.75 18.75a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5H3.75Z"></path></svg>',v=j(),k=w("button"),k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z" clip-rule="evenodd"></path></svg>',c(l,"class","text-xl font-bold"),c(a,"class","-mt-1"),c(n,"class","flex flex-col items-center justify-center space-x-2 col-span-2 row-span-2"),c(g,"class","ring-1 ring-border col-span-3 p-2 rounded-t-md bg-foreground overflow-x-hidden overflow-y-scroll"),c(m,"class","svg-icon ring-1 ring-border p-0 text-xs rounded-none rounded-bl-md"),c(y,"class","svg-icon ring-1 ring-border p-0 text-xs rounded-none"),c(k,"class","svg-icon ring-1 ring-border bg-red-500 text-white p-0 text-xs rounded-none rounded-br-md"),c(e,"class","bg-green-600 ring-1 ring-border w-[95%] rounded-md min-h-[15vh] max-h-[20vh] text-xs grid grid-cols-5")},m(L,O){q(L,e,O),f(e,n),f(n,l),f(l,s),f(n,i),f(n,a),f(a,o),f(a,d),f(e,p),f(e,g);for(let S=0;S<C.length;S+=1)C[S]&&C[S].m(g,null);f(e,h),f(e,m),f(e,b),f(e,y),f(e,v),f(e,k),_||(x=[H(m,"click",t[3]),H(y,"click",t[4]),H(k,"click",t[2])],_=!0)},p(L,[O]){if(O&1&&r!==(r=L[0].name+"")&&le(s,r),O&1&&u!==(u=L[0].owner+"")&&le(d,u),O&2){$=oe(L[1]);let S;for(S=0;S<$.length;S+=1){const Z=mt(L,$,S);C[S]?C[S].p(Z,O):(C[S]=ht(Z),C[S].c(),C[S].m(g,null))}for(;S<C.length;S+=1)C[S].d(1);C.length=$.length}},i:F,o:F,d(L){L&&M(e),Pe(C,L),_=!1,Q(x)}}}function kl(t,e,n){let l;V(t,K,u=>n(5,l=u));let{playlist:r}=e,s=[];Le(()=>{r.tracks.forEach(u=>{for(let d of l.tracks)if(d.id==u){n(1,s=[...s,{id:d.id,name:d.name}]);break}})});const i=()=>{let u=l.playlists;u.splice(l.playlists.indexOf(r),1),A(K,l.playlists=u,l),B(`removed "${r.name}" from downloads`,!1,2)},a=()=>{G.queue.addPlaylist(r.id,!0),G.next(),G.play()},o=()=>{G.queue.addPlaylist(r.id),B(`"${r.name}" added to queue`)};return t.$$set=u=>{"playlist"in u&&n(0,r=u.playlist)},[r,s,i,a,o]}class $l extends re{constructor(e){super(),ne(this,e,kl,yl,X,{playlist:0})}}function wt(t){return Object.prototype.toString.call(t)==="[object Date]"}function Xe(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((r,s)=>Xe(t[s],r));return r=>l.map(s=>s(r))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(wt(t)&&wt(e)){t=t.getTime(),e=e.getTime();const s=e-t;return i=>new Date(t+i*s)}const l=Object.keys(e),r={};return l.forEach(s=>{r[s]=Xe(t[s],e[s])}),s=>{const i={};return l.forEach(a=>{i[a]=r[a](s)}),i}}if(n==="number"){const l=e-t;return r=>t+r*l}throw new Error(`Cannot interpolate ${n} values`)}function We(t,e={}){const n=pe(t);let l,r=t;function s(i,a){if(t==null)return n.set(t=i),Promise.resolve();r=i;let o=l,u=!1,{delay:d=0,duration:p=400,easing:g=Ke,interpolate:h=Xe}=Ye(Ye({},e),a);if(p===0)return o&&(o.abort(),o=null),n.set(t=r),Promise.resolve();const m=et()+d;let b;return l=lt(y=>{if(y<m)return!0;u||(b=h(t,i),typeof p=="function"&&(p=p(t,i)),u=!0),o&&(o.abort(),o=null);const v=y-m;return v>p?(n.set(t=i),!1):(n.set(t=b(g(v/p))),!0)}),l.promise}return{set:s,update:(i,a)=>s(i(r,t),a),subscribe:n.subscribe}}function bt(t,e,n){const l=t.slice();return l[12]=e[n],l}function xl(t){let e,n;return{c(){e=J("svg"),n=J("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width","1.5"),c(e,"stroke","currentColor"),c(e,"class","w-[10vh] h-[10vh] col-span-3 m-auto")},m(l,r){q(l,e,r),f(e,n)},p:F,d(l){l&&M(e)}}}function Ll(t){let e,n;return{c(){e=w("img"),c(e,"loading","lazy"),xe(e.src,n=t[0].images[0].url)||c(e,"src",n),c(e,"class","rounded-full max-h-[10vh] shadow-black shadow-md col-span-3 m-auto"),c(e,"alt","playlist's cover")},m(l,r){q(l,e,r)},p(l,r){r&1&&!xe(e.src,n=l[0].images[0].url)&&c(e,"src",n)},d(l){l&&M(e)}}}function Ml(t){let e,n=t[0].owner.display_name+"",l;return{c(){e=I("by "),l=I(n)},m(r,s){q(r,e,s),q(r,l,s)},p(r,s){s&1&&n!==(n=r[0].owner.display_name+"")&&le(l,n)},d(r){r&&(M(e),M(l))}}}function Sl(t){let e=t[0].description+"",n;return{c(){n=I(e)},m(l,r){q(l,n,r)},p(l,r){r&1&&e!==(e=l[0].description+"")&&le(n,e)},d(l){l&&M(n)}}}function Cl(t){let e,n,l,r;function s(o,u){return o[1].downloading?Al:jl}let i=s(t),a=i(t);return{c(){e=w("button"),a.c(),c(e,"class","text-xs svg-icon"),e.disabled=n=t[1].downloading||t[1].download.done},m(o,u){q(o,e,u),a.m(e,null),l||(r=H(e,"click",t[8]),l=!0)},p(o,u){i!==(i=s(o))&&(a.d(1),a=i(o),a&&(a.c(),a.m(e,null))),u&2&&n!==(n=o[1].downloading||o[1].download.done)&&(e.disabled=n)},d(o){o&&M(e),a.d(),l=!1,r()}}}function ql(t){let e,n,l,r,s;return{c(){e=w("button"),e.textContent="save",n=j(),l=w("button"),l.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2ch]"><path fill-rule="evenodd" d="M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd"></path></svg>

                local mp3`,c(e,"class","text-xs svg-icon bg-green-700 text-white"),c(l,"class","text-xs svg-icon")},m(i,a){q(i,e,a),q(i,n,a),q(i,l,a),r||(s=[H(e,"click",t[7]),H(l,"click",t[6])],r=!0)},p:F,d(i){i&&(M(e),M(n),M(l)),r=!1,Q(s)}}}function jl(t){let e,n,l;return{c(){e=J("svg"),n=J("path"),l=I(`

                  download`),c(n,"fill-rule","evenodd"),c(n,"d","M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z"),c(n,"clip-rule","evenodd"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 24 24"),c(e,"fill","currentColor"),c(e,"class","w-[2ch]")},m(r,s){q(r,e,s),f(e,n),q(r,l,s)},d(r){r&&(M(e),M(l))}}}function Al(t){let e;return{c(){e=I("downloading")},m(n,l){q(n,e,l)},d(n){n&&M(e)}}}function vt(t){let e,n,l,r=t[1].tracks.length+"",s,i,a,o,u,d=oe(t[1].tracks),p=[];for(let g=0;g<d.length;g+=1)p[g]=_t(bt(t,d,g));return{c(){e=w("div"),n=w("div"),l=w("p"),s=I(r),i=I(" tracks"),a=j();for(let g=0;g<p.length;g+=1)p[g].c();c(l,"class","bg-primary rounded-full p-2 text-black"),c(n,"class","overflow-hidden overflow-x-scroll flex flex-row items-center space-x-2 p-2"),c(e,"class","-mt-1 w-full bg-foreground ring-1 ring-border rounded-b-md text-xs flex flex-row items-center justify-center")},m(g,h){q(g,e,h),f(e,n),f(n,l),f(l,s),f(l,i),f(n,a);for(let m=0;m<p.length;m+=1)p[m]&&p[m].m(n,null);u=!0},p(g,h){if((!u||h&2)&&r!==(r=g[1].tracks.length+"")&&le(s,r),h&2){d=oe(g[1].tracks);let m;for(m=0;m<d.length;m+=1){const b=bt(g,d,m);p[m]?p[m].p(b,h):(p[m]=_t(b),p[m].c(),p[m].m(n,null))}for(;m<p.length;m+=1)p[m].d(1);p.length=d.length}},i(g){u||(g&&de(()=>{u&&(o||(o=Me(e,Oe,{duration:500},!0)),o.run(1))}),u=!0)},o(g){g&&(o||(o=Me(e,Oe,{duration:500},!1)),o.run(0)),u=!1},d(g){g&&M(e),Pe(p,g),g&&o&&o.end()}}}function Tl(t){let e;return{c(){e=w("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-[5vh]"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"></path></svg> ',c(e,"class","shadow-md shadow-black rounded-full")},m(n,l){q(n,e,l)},p:F,d(n){n&&M(e)}}}function El(t){let e,n,l;return{c(){e=w("img"),c(e,"loading","lazy"),xe(e.src,n=t[12].images[t[12].images.length-1].url)||c(e,"src",n),c(e,"class",l="aspect-square h-[5vh] ring-1 ring-border rounded-full shadow-sm shadow-black will-change-auto "+(t[1].downloading?(t[1].download.status[t[12].id]=="downloading"?" rotating-image":"")+(t[1].download.status[t[12].id]=="ready"?"ring-green-500":"")+(t[1].download.status[t[12].id]=="failed"?" ring-red-500":""):"")),c(e,"alt","album art")},m(r,s){q(r,e,s)},p(r,s){s&2&&!xe(e.src,n=r[12].images[r[12].images.length-1].url)&&c(e,"src",n),s&2&&l!==(l="aspect-square h-[5vh] ring-1 ring-border rounded-full shadow-sm shadow-black will-change-auto "+(r[1].downloading?(r[1].download.status[r[12].id]=="downloading"?" rotating-image":"")+(r[1].download.status[r[12].id]=="ready"?"ring-green-500":"")+(r[1].download.status[r[12].id]=="failed"?" ring-red-500":""):""))&&c(e,"class",l)},d(r){r&&M(e)}}}function _t(t){let e;function n(s,i){return s[12].images&&s[12].images.length>0?El:Tl}let l=n(t),r=l(t);return{c(){r.c(),e=Se()},m(s,i){r.m(s,i),q(s,e,i)},p(s,i){l===(l=n(s))&&r?r.p(s,i):(r.d(1),r=l(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&M(e),r.d(s)}}}function Ol(t){let e,n,l,r,s,i,a,o,u,d,p=t[0].name+"",g,h,m,b,y,v,k,_,x,$,C,L,O,S,Z;function be(T,W){return T[0].images&&T[0].images.length>0?Ll:xl}let ge=be(t),P=ge(t);function ce(T,W){return T[0].description?Sl:Ml}let Fe=ce(t),se=Fe(t);function nt(T,W){return T[1].download.done?ql:Cl}let He=nt(t),ie=He(t),N=t[1].showMore&&vt(t);return{c(){e=w("div"),n=w("div"),l=w("div"),s=j(),i=w("div"),a=w("div"),P.c(),o=j(),u=w("div"),d=w("p"),g=I(p),h=j(),m=w("p"),se.c(),b=j(),y=w("div"),v=w("button"),k=J("svg"),_=J("path"),$=j(),ie.c(),C=j(),L=w("div"),O=j(),N&&N.c(),c(l,"class","absolute w-full h-full rounded-md blur-[2px]"),c(l,"style",r=t[0].images&&t[0].images[0]?`background-image: url('${t[0].images[0].url}');
    background-position: center;
    background-size: cover;
    background-blend-mode: multiply;
    background-color: rgba(0, 0, 0, 0.6)
    `:"background-color: #22272E"),c(d,"class","text-left truncate font-bold -mb-1"),c(m,"class","text-left text-xs truncate mb-2"),c(_,"stroke-linecap","round"),c(_,"stroke-linejoin","round"),c(_,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),c(k,"xmlns","http://www.w3.org/2000/svg"),c(k,"fill","none"),c(k,"viewBox","0 0 24 24"),c(k,"stroke-width","2"),c(k,"stroke","currentColor"),c(k,"class",x="w-[4ch] origin-center transition-transform duration-500 "+(t[1].showMore?"rotate-180":"")),c(v,"class","text-xs svg-icon bg-black/20 p-0 text-white"),c(y,"class","flex flex-row justify-start items-center space-x-2 col-span-7"),c(u,"class","flex flex-col col-span-9"),c(a,"class","grid grid-cols-12 h-full grid-rows-1 items-center justify-center"),c(i,"class","absolute w-full h-full rounded-md"),c(n,"class","w-full h-[15vh] rounded-md relative overflow-hidden ring-1 ring-border"),c(L,"class","bg-primary h-[2px]"),Ae(L,"width",t[2]+"%"),c(e,"class","w-[95%]")},m(T,W){q(T,e,W),f(e,n),f(n,l),f(n,s),f(n,i),f(i,a),P.m(a,null),f(a,o),f(a,u),f(u,d),f(d,g),f(u,h),f(u,m),se.m(m,null),f(u,b),f(u,y),f(y,v),f(v,k),f(k,_),f(y,$),ie.m(y,null),f(e,C),f(e,L),f(e,O),N&&N.m(e,null),S||(Z=H(v,"click",t[5]),S=!0)},p(T,[W]){W&1&&r!==(r=T[0].images&&T[0].images[0]?`background-image: url('${T[0].images[0].url}');
    background-position: center;
    background-size: cover;
    background-blend-mode: multiply;
    background-color: rgba(0, 0, 0, 0.6)
    `:"background-color: #22272E")&&c(l,"style",r),ge===(ge=be(T))&&P?P.p(T,W):(P.d(1),P=ge(T),P&&(P.c(),P.m(a,o))),W&1&&p!==(p=T[0].name+"")&&le(g,p),Fe===(Fe=ce(T))&&se?se.p(T,W):(se.d(1),se=Fe(T),se&&(se.c(),se.m(m,null))),W&2&&x!==(x="w-[4ch] origin-center transition-transform duration-500 "+(T[1].showMore?"rotate-180":""))&&c(k,"class",x),He===(He=nt(T))&&ie?ie.p(T,W):(ie.d(1),ie=He(T),ie&&(ie.c(),ie.m(y,null))),W&4&&Ae(L,"width",T[2]+"%"),T[1].showMore?N?(N.p(T,W),W&2&&E(N,1)):(N=vt(T),N.c(),E(N,1),N.m(e,null)):N&&(he(),D(N,1,1,()=>{N=null}),we())},i(T){E(N)},o(T){D(N)},d(T){T&&M(e),P.d(),se.d(),ie.d(),N&&N.d(),S=!1,Z()}}}function Dl(t,e,n){let l,r,s,i;V(t,K,b=>n(9,s=b)),V(t,me,b=>n(10,i=b));let{playlist:a}=e;const o=pe({showMore:!1,detailedLoaded:!1,id:void 0,tracks:[],download:{stage:"",status:{},done:!1},downloading:!1,memblobs:[]});V(t,o,b=>n(1,l=b));let u=We(0,{duration:1e3,easing:It});V(t,u,b=>n(2,r=b));const d=async()=>{l.showMore?A(o,l.showMore=!1,l):(l.detailedLoaded||await p(),A(o,l.showMore=!0,l))},p=async()=>{const y=new URL(a.external_url).pathname.split("/")[2];B("loading playlist information",!0,1,async v=>{let k=await fe.getPlaylistInfo(y);A(o,l.tracks=k,l),A(o,l.detailedLoaded=!0,l),v()})},g=()=>{l.memblobs.forEach(({blob:b,id:y},v)=>{const k=URL.createObjectURL(b),_=document.createElement("a");_.href=k,_.download=`${y}.mp3`,_.click()})},h=()=>{B("saving to Cartier",!0,10,async b=>{const y=i.handle.tracksDir;for(let{blob:v,id:k}of l.memblobs){const _=await y.getFileHandle(`${k}.mp3`,{create:!0});A(K,s.tracks=[...s.tracks,{id:k,name:l.tracks.find($=>$.id==k).name,dependants:[]}],s);const x=await _.createWritable();await x.write(v),await x.close()}A(K,s.playlists=[...s.playlists,{name:a.name,url:a.external_url,desc:a.description,owner:a.owner.display_name,tracks:[...l.tracks.map(v=>v.id)],id:a.id}],s);for(let v of l.tracks)for(let[k,_]of s.tracks.entries())if(_.id==v.id){A(K,s.tracks[k].dependants=[...s.tracks[k].dependants,a.id],s);break}b(),B("saved to Cartier!",!1,2)})},m=async()=>{if(l.detailedLoaded||await p(),!l.tracks)return;if(l.tracks.length==0){B("nothing to download");return}A(o,l.downloading=!0,l),A(o,l.download.stage="converting",l),u.set(0,{duration:1}),u.set(10,{duration:1e4});let b=l.tracks;if(b=b.filter(v=>{let k=!1;for(let _ of s.tracks)if(v.id==_.id){k=!0;break}return k&&A(o,l.download.status[v.id]="ready",l),!k}),b.length==0){await u.set(100,{duration:500}),A(o,l.downloading=!1,l),A(o,l.download.done=!0,l);return}let y=b[0];fe.getDownloadTrack(y.url,"",!0).then(async v=>{if(v.success==!1){A(u,r=0,r),A(o,l.downloading=!1,l),B(`serverErr: ${v.info}`);return}const k=v.data.key;A(o,l.download.status[y.id]="downloading",l);for(const[x,$]of[...b].splice(1).entries())A(o,l.download.status[$.id]="downloading",l),(await fe.getDownloadTrack($.url,k,!1)).success==!1&&B(`failed downloading track (${$.name})`);await u.set(10);const _=async()=>{let x=await fe.getDownloadStatus(k);const $=x.data.filter(C=>C.status!=="downloading");if(x.data.forEach(C=>{A(o,l.download.status[C.id]=C.status,l)}),A(u,r=$.length/x.data.length*40+10,r),$.length==x.data.length){A(o,l.download.stage="downloading",l);for(let C=0;C<$.length;C++){let[L,O,S]=await fe.getStreamPlaylist(k);if(!L){B(`failed downloading a track (in "${a.name}")`);continue}A(o,l.memblobs=[...l.memblobs,{blob:O,id:S}],l),A(u,r=(C+1)/$.length*50+50,r)}await u.set(100,{duration:500}),A(o,l.downloading=!1,l),A(o,l.download.done=!0,l);return}setTimeout(_,7500)};setTimeout(_,5e3)})};return t.$$set=b=>{"playlist"in b&&n(0,a=b.playlist)},[a,l,r,o,u,d,g,h,m]}class Pl extends re{constructor(e){super(),ne(this,e,Dl,Ol,X,{playlist:0})}}function yt(t,e,n){const l=t.slice();return l[11]=e[n],l}function kt(t,e,n){const l=t.slice();return l[11]=e[n],l}function Fl(t){let e,n,l=oe(t[2]||[]),r=[];for(let i=0;i<l.length;i+=1)r[i]=$t(yt(t,l,i));const s=i=>D(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=Se()},m(i,a){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(i,a);q(i,e,a),n=!0},p(i,a){if(a&4){l=oe(i[2]||[]);let o;for(o=0;o<l.length;o+=1){const u=yt(i,l,o);r[o]?(r[o].p(u,a),E(r[o],1)):(r[o]=$t(u),r[o].c(),E(r[o],1),r[o].m(e.parentNode,e))}for(he(),o=l.length;o<r.length;o+=1)s(o);we()}},i(i){if(!n){for(let a=0;a<l.length;a+=1)E(r[a]);n=!0}},o(i){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)D(r[a]);n=!1},d(i){i&&M(e),Pe(r,i)}}}function Hl(t){let e,n,l,r;const s=[Nl,Il],i=[];function a(o,u){return!o[3].playlists||o[3].playlists.length==0?0:1}return e=a(t),n=i[e]=s[e](t),{c(){n.c(),l=Se()},m(o,u){i[e].m(o,u),q(o,l,u),r=!0},p(o,u){let d=e;e=a(o),e===d?i[e].p(o,u):(he(),D(i[d],1,1,()=>{i[d]=null}),we(),n=i[e],n?n.p(o,u):(n=i[e]=s[e](o),n.c()),E(n,1),n.m(l.parentNode,l))},i(o){r||(E(n),r=!0)},o(o){D(n),r=!1},d(o){o&&M(l),i[e].d(o)}}}function $t(t){let e,n;return e=new Pl({props:{playlist:t[11]}}),{c(){ae(e.$$.fragment)},m(l,r){ee(e,l,r),n=!0},p(l,r){const s={};r&4&&(s.playlist=l[11]),e.$set(s)},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function Il(t){let e,n,l=oe(t[3].playlists||[]),r=[];for(let i=0;i<l.length;i+=1)r[i]=xt(kt(t,l,i));const s=i=>D(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=Se()},m(i,a){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(i,a);q(i,e,a),n=!0},p(i,a){if(a&8){l=oe(i[3].playlists||[]);let o;for(o=0;o<l.length;o+=1){const u=kt(i,l,o);r[o]?(r[o].p(u,a),E(r[o],1)):(r[o]=xt(u),r[o].c(),E(r[o],1),r[o].m(e.parentNode,e))}for(he(),o=l.length;o<r.length;o+=1)s(o);we()}},i(i){if(!n){for(let a=0;a<l.length;a+=1)E(r[a]);n=!0}},o(i){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)D(r[a]);n=!1},d(i){i&&M(e),Pe(r,i)}}}function Nl(t){let e;return{c(){e=w("p"),e.textContent="no downloads",c(e,"class","pt-10")},m(n,l){q(n,e,l)},p:F,i:F,o:F,d(n){n&&M(e)}}}function xt(t){let e,n;return e=new $l({props:{playlist:t[11]}}),{c(){ae(e.$$.fragment)},m(l,r){ee(e,l,r),n=!0},p(l,r){const s={};r&8&&(s.playlist=l[11]),e.$set(s)},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function Zl(t){let e,n,l,r,s,i,a,o,u,d,p,g,h,m,b;const y=[Hl,Fl],v=[];function k(_,x){return _[1].view.tab==U.DOWNLOADED?0:1}return u=k(t),d=v[u]=y[u](t),{c(){e=w("div"),n=w("div"),l=w("div"),r=j(),s=w("button"),s.textContent="playlists",i=w("button"),i.textContent="downloaded",a=j(),o=w("div"),d.c(),c(l,"class","bg-border h-full absolute rounded-xl z-10"),c(s,"id","playlistbtn"),c(s,"class","svelte-7mzzq1"),c(i,"id","downloadedbtn"),c(i,"class","svelte-7mzzq1"),c(n,"class","stickytoggle z-10 sticky top-2 w-min flex flex-row items-center justify-between rounded-xl bg-foreground ring-1 ring-border mx-auto svelte-7mzzq1"),c(o,"class","flex flex-col justify-center items-center w-full space-y-2 pb-[11vh] relative"),c(e,"class","h-[82vh] overflow-y-scroll w-[100vw]"),c(e,"style",g=t[1].view.tab in[U.PLAYLISTS,U.DOWNLOADED]?"":"display: none")},m(_,x){q(_,e,x),f(e,n),f(n,l),t[4](l),f(n,r),f(n,s),f(n,i),f(e,a),f(e,o),v[u].m(o,null),h=!0,m||(b=[H(s,"click",t[5]),H(i,"click",t[6])],m=!0)},p(_,[x]){let $=u;u=k(_),u===$?v[u].p(_,x):(he(),D(v[$],1,1,()=>{v[$]=null}),we(),d=v[u],d?d.p(_,x):(d=v[u]=y[u](_),d.c()),E(d,1),d.m(o,null)),(!h||x&2&&g!==(g=_[1].view.tab in[U.PLAYLISTS,U.DOWNLOADED]?"":"display: none"))&&c(e,"style",g)},i(_){h||(E(d),_&&(p||de(()=>{p=nl(o,Oe,{duration:1e3}),p.start()})),h=!0)},o(_){D(d),h=!1},d(_){_&&M(e),t[4](null),v[u].d(),m=!1,Q(b)}}}function Bl(t,e,n){let l,r;V(t,wl,h=>n(7,h)),V(t,Y,h=>n(1,l=h)),V(t,K,h=>n(3,r=h));let s,i={left:We(0,{duration:50,easing:ot}),width:We(0,{duration:50,easing:ot})},a=[];Le(()=>{if(!r.playlists){n(2,a=l.playlists.all);return}n(2,a=l.playlists.all.filter(h=>{let m=!1;for(let b of r.playlists)if(b.id==h.id){m=!0;break}return!m}))}),i.left.subscribe(h=>{s&&n(0,s.style.left=`${h}px`,s)}),i.width.subscribe(h=>{s&&n(0,s.style.width=`${h}px`,s)}),Le(()=>{});function d(h){Ee[h?"unshift":"push"](()=>{s=h,n(0,s)})}const p=()=>A(Y,l.view.tab=U.PLAYLISTS,l),g=()=>A(Y,l.view.tab=U.DOWNLOADED,l);return t.$$.update=()=>{if(t.$$.dirty&3&&s)switch(l.view.tab){case U.PLAYLISTS:i.left.set(0),i.width.set(document.getElementById("playlistbtn").clientWidth);break;case U.DOWNLOADED:i.left.set(document.getElementById("playlistbtn").clientWidth),i.width.set(document.getElementById("downloadedbtn").clientWidth);break}},[s,l,a,r,d,p,g]}class Ul extends re{constructor(e){super(),ne(this,e,Bl,Zl,X,{})}}function Lt(t){let e,n,l,r,s,i,a,o,u;function d(h,m){return h[0].user.images&&h[0].user.images.length>0?zl:Wl}let p=d(t),g=p(t);return{c(){e=w("div"),n=w("button"),n.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[3em]"><path d="M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"></path><path d="m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"></path></svg>
      home`,l=j(),r=w("button"),g.c(),s=I(`
      account`),i=j(),a=w("button"),a.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[3em]"><path fill-rule="evenodd" d="M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z" clip-rule="evenodd"></path></svg>
      settings`,c(n,"class","flex flex-col items-center justify-center bg-transparent text-white text-xs svelte-gbqgsd"),c(r,"class","flex flex-col items-center justify-center bg-transparent text-white text-xs svelte-gbqgsd"),c(a,"class","flex flex-col items-center justify-center bg-transparent text-white text-xs svelte-gbqgsd"),c(e,"class","container flex flex-row justify-around items-center h-[11vh] bg-gradient-to-t from-background to-border w-[95vw] rounded-b-xl ring-1 ring-border py-5 svelte-gbqgsd")},m(h,m){q(h,e,m),f(e,n),f(e,l),f(e,r),g.m(r,null),f(r,s),f(e,i),f(e,a),o||(u=[H(n,"click",t[1]),H(r,"click",t[2]),H(a,"click",t[3])],o=!0)},p(h,m){p===(p=d(h))&&g?g.p(h,m):(g.d(1),g=p(h),g&&(g.c(),g.m(r,s)))},d(h){h&&M(e),g.d(),o=!1,Q(u)}}}function Wl(t){let e;return{c(){e=I("open")},m(n,l){q(n,e,l)},p:F,d(n){n&&M(e)}}}function zl(t){let e,n,l;return{c(){e=w("img"),c(e,"loading","lazy"),xe(e.src,n=t[0].user.images[0].url)||c(e,"src",n),c(e,"alt",l=`${t[0].user.display_name}'s profile picture`),c(e,"class","rounded-full w-[4em] ring-border ring-1 aspect-square")},m(r,s){q(r,e,s)},p(r,s){s&1&&!xe(e.src,n=r[0].user.images[0].url)&&c(e,"src",n),s&1&&l!==(l=`${r[0].user.display_name}'s profile picture`)&&c(e,"alt",l)},d(r){r&&M(e)}}}function Vl(t){let e,n=t[0].logged&&Lt(t);return{c(){n&&n.c(),e=Se()},m(l,r){n&&n.m(l,r),q(l,e,r)},p(l,[r]){l[0].logged?n?n.p(l,r):(n=Lt(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:F,o:F,d(l){l&&M(e),n&&n.d(l)}}}function Rl(t,e,n){let l;return V(t,Y,a=>n(0,l=a)),[l,()=>{A(Y,l.view.tab=U.PLAYLISTS,l)},()=>{A(Y,l.view.tab=U.ACCOUNT,l)},()=>{A(Y,l.view.tab=U.SETTINGS,l)}]}class Yl extends re{constructor(e){super(),ne(this,e,Rl,Vl,X,{})}}function Gl(t){let e,n,l;return{c(){e=w("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z" clip-rule="evenodd"></path></svg>',c(e,"class","col-span-1 svg-icon svelte-1vi17k2")},m(r,s){q(r,e,s),n||(l=H(e,"click",G.resume),n=!0)},d(r){r&&M(e),n=!1,l()}}}function Jl(t){let e,n,l;return{c(){e=w("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z" clip-rule="evenodd"></path></svg>',c(e,"class","col-span-1 svg-icon svelte-1vi17k2")},m(r,s){q(r,e,s),n||(l=H(e,"click",G.pause),n=!0)},d(r){r&&M(e),n=!1,l()}}}function Ql(t){let e,n,l,r,s,i,a,o,u=t[0].playback.name+"",d,p,g,h,m,b,y,v,k,_,x,$;n=new Ul({}),r=new _l({});function C(S,Z){return S[0].playback.playing?Jl:Gl}let L=C(t),O=L(t);return k=new Yl({}),{c(){e=w("div"),ae(n.$$.fragment),l=j(),ae(r.$$.fragment),s=j(),i=w("div"),a=w("div"),o=w("p"),d=I(u),p=j(),O.c(),g=j(),h=w("button"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M13.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L11.69 12 4.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M19.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06L17.69 12l-6.97-6.97a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg>',m=j(),b=w("div"),v=j(),ae(k.$$.fragment),c(o,"class","truncate col-span-8"),c(h,"class","col-span-1 svg-icon svelte-1vi17k2"),c(a,"class","bg-foreground rounded-t-md w-full h-full grid grid-cols-10 items-center justify-center gap-1"),c(b,"class","bottom-0 h-[2px] bg-primary"),Ae(b,"width",t[0].playback.time/t[0].playback.dur*100+"%"),c(i,"style",y=t[0].loaded?"":"visibility: hidden"),c(i,"class","ring-1 ring-border rounded-t-md w-[95%] h-[10vh] absolute bottom-[11vh]"),c(e,"class","flex flex-col items-center justify-center relative")},m(S,Z){q(S,e,Z),ee(n,e,null),f(e,l),ee(r,e,null),f(e,s),f(e,i),f(i,a),f(a,o),f(o,d),f(a,p),O.m(a,null),f(a,g),f(a,h),f(i,m),f(i,b),f(e,v),ee(k,e,null),_=!0,x||($=H(h,"click",t[1]),x=!0)},p(S,[Z]){(!_||Z&1)&&u!==(u=S[0].playback.name+"")&&le(d,u),L!==(L=C(S))&&(O.d(1),O=L(S),O&&(O.c(),O.m(a,g))),(!_||Z&1)&&Ae(b,"width",S[0].playback.time/S[0].playback.dur*100+"%"),(!_||Z&1&&y!==(y=S[0].loaded?"":"visibility: hidden"))&&c(i,"style",y)},i(S){_||(E(n.$$.fragment,S),E(r.$$.fragment,S),E(k.$$.fragment,S),_=!0)},o(S){D(n.$$.fragment,S),D(r.$$.fragment,S),D(k.$$.fragment,S),_=!1},d(S){S&&M(e),te(n),te(r),O.d(),te(k),x=!1,$()}}}function Xl(t,e,n){let l;V(t,z,i=>n(0,l=i));let r=We(0,{duration:1e3});const s=()=>{G.next()==!1?B("queue is empty"):G.play()};return t.$$.update=()=>{t.$$.dirty&1&&r.set(l.playback.time/l.playback.dur*100)},[l,s]}class Kl extends re{constructor(e){super(),ne(this,e,Xl,Ql,X,{})}}function en(t){let e,n;const l=t[1].default,r=Ct(l,t,t[0],null);return{c(){e=w("div"),r&&r.c(),c(e,"class","max-h-[90%] max-w-[90%]")},m(s,i){q(s,e,i),r&&r.m(e,null),n=!0},p(s,[i]){r&&r.p&&(!n||i&1)&&At(r,l,s,s[0],n?jt(l,s[0],i,null):Tt(s[0]),null)},i(s){n||(E(r,s),n=!0)},o(s){D(r,s),n=!1},d(s){s&&M(e),r&&r.d(s)}}}function tn(t,e,n){let{$$slots:l={},$$scope:r}=e;return t.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,l]}class ln extends re{constructor(e){super(),ne(this,e,tn,en,X,{})}}function nn(t){let e,n;return e=new Kl({}),{c(){ae(e.$$.fragment)},m(l,r){ee(e,l,r),n=!0},p:F,i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function rn(t){let e,n;return e=new ln({props:{$$slots:{default:[sn]},$$scope:{ctx:t}}}),{c(){ae(e.$$.fragment)},m(l,r){ee(e,l,r),n=!0},p(l,r){const s={};r&16&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function sn(t){let e,n;return e=new hl({props:{handleUsername:t[1]}}),{c(){ae(e.$$.fragment)},m(l,r){ee(e,l,r),n=!0},p:F,i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function an(t){let e,n,l,r,s,i,a,o,u,d;const p=[rn,nn],g=[];function h(m,b){return m[0].logged==!1?0:1}return s=h(t),i=g[s]=p[s](t),{c(){e=w("div"),n=j(),l=w("main"),r=w("div"),i.c(),a=j(),o=w("div"),c(e,"class","bg-foreground/90 p-1 rounded-md w-[80vw] max-w-[90vw] z-[1000]"),Ae(e,"display","none"),c(o,"class","absolute left-0 top-[1em] w-full flex flex-col items-center justify-center space-y-1 text-xs"),c(r,"class","flex flex-col justify-center items-center relative h-[100%] bg-background"),c(l,"class","w-screen h-screen text-white text-xl select-none text-center")},m(m,b){q(m,e,b),t[2](e),q(m,n,b),q(m,l,b),f(l,r),g[s].m(r,null),f(r,a),f(r,o),t[3](o),d=!0},p(m,[b]){let y=s;s=h(m),s===y?g[s].p(m,b):(he(),D(g[y],1,1,()=>{g[y]=null}),we(),i=g[s],i?i.p(m,b):(i=g[s]=p[s](m),i.c()),E(i,1),i.m(r,a))},i(m){d||(E(i),m&&de(()=>{d&&(u||(u=Me(o,Oe,{duration:1e4},!0)),u.run(1))}),d=!0)},o(m){D(i),m&&(u||(u=Me(o,Oe,{duration:1e4},!1)),u.run(0)),d=!1},d(m){m&&(M(e),M(n),M(l)),t[2](null),g[s].d(),t[3](null),m&&u&&u.end()}}}let Ze,Nt;const B=(t,e=!1,n=3,l)=>{const r=Nt.cloneNode(!0);r.innerHTML=e?`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.2em] animate-spin inline aspect-square mr-1" > <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" /> </svg>${t}`:t,r.style.display="block",Ze.appendChild(r),l?l(()=>Ze.removeChild(r)):setTimeout(()=>Ze.removeChild(r),n*1e3)};function on(t,e,n){let l;V(t,Y,a=>n(0,l=a));const r=async a=>{await De.login(a)};Le(De.initCartierFile);function s(a){Ee[a?"unshift":"push"](()=>{Nt=a})}function i(a){Ee[a?"unshift":"push"](()=>{Ze=a})}return[l,r,s,i]}class cn extends re{constructor(e){super(),ne(this,e,on,an,X,{})}}new cn({target:document.getElementById("app")});
