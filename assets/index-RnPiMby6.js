var ln=Object.defineProperty;var sn=(t,e,n)=>e in t?ln(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ct=(t,e,n)=>(sn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function T(){}const Nt=t=>t;function dt(t,e){for(const n in e)t[n]=e[n];return t}function Zt(t){return t()}function $t(){return Object.create(null)}function se(t){t.forEach(Zt)}function mt(t){return typeof t=="function"}function pe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ke;function De(t,e){return t===e?!0:(Ke||(Ke=document.createElement("a")),Ke.href=e,t===Ke.href)}function rn(t){return Object.keys(t).length===0}function Wt(t,...e){if(t==null){for(const l of e)l(void 0);return T}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Se(t){let e;return Wt(t,n=>e=n)(),e}function Ue(t,e,n){t.$$.on_destroy.push(Wt(e,n))}function on(t,e,n,l){if(t){const s=Rt(t,e,n,l);return t[0](s)}}function Rt(t,e,n,l){return t[1]&&l?dt(n.ctx.slice(),t[1](l(e))):n.ctx}function an(t,e,n,l){if(t[2]&&l){const s=t[2](l(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],a=Math.max(e.dirty.length,s.length);for(let f=0;f<a;f+=1)i[f]=e.dirty[f]|s[f];return i}return e.dirty|s}return e.dirty}function cn(t,e,n,l,s,i){if(s){const a=Rt(e,n,l,i);t.p(a,s)}}function un(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function ie(t,e,n){return t.set(n),e}function fn(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Vt=typeof window<"u";let Jt=Vt?()=>window.performance.now():()=>Date.now(),ht=Vt?t=>requestAnimationFrame(t):T;const Ee=new Set;function Gt(t){Ee.forEach(e=>{e.c(t)||(Ee.delete(e),e.f())}),Ee.size!==0&&ht(Gt)}function Kt(t){let e;return Ee.size===0&&ht(Gt),{promise:new Promise(n=>{Ee.add(e={c:t,f:n})}),abort(){Ee.delete(e)}}}function u(t,e){t.appendChild(e)}function Yt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function dn(t){const e=g("style");return e.textContent="/* empty */",pn(Yt(t),e),e.sheet}function pn(t,e){return u(t.head||t,e),e.sheet}function C(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function wt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function I(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function N(t){return document.createTextNode(t)}function k(){return N(" ")}function _t(){return N("")}function W(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function gn(t){return function(e){e.target===this&&t.call(this,e)}}function r(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function mn(t){return Array.from(t.childNodes)}function oe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ct(t,e){t.value=e??""}function Xe(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function Lt(t,e,n){t.classList.toggle(e,!!n)}function hn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}const et=new Map;let tt=0;function wn(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function _n(t,e){const n={stylesheet:dn(e),rules:{}};return et.set(t,n),n}function jt(t,e,n,l,s,i,a,f=0){const o=16.666/l;let c=`{
`;for(let b=0;b<=1;b+=o){const _=e+(n-e)*i(b);c+=b*100+`%{${a(_,1-_)}}
`}const p=c+`100% {${a(n,1-n)}}
}`,d=`__svelte_${wn(p)}_${f}`,h=Yt(t),{stylesheet:v,rules:m}=et.get(h)||_n(h,t);m[d]||(m[d]=!0,v.insertRule(`@keyframes ${d} ${p}`,v.cssRules.length));const j=t.style.animation||"";return t.style.animation=`${j?`${j}, `:""}${d} ${l}ms linear ${s}ms 1 both`,tt+=1,d}function vn(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=n.length-l.length;s&&(t.style.animation=l.join(", "),tt-=s,tt||bn())}function bn(){ht(()=>{tt||(et.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&x(e)}),et.clear())})}let Ve;function Ze(t){Ve=t}function yn(){if(!Ve)throw new Error("Function called outside component initialization");return Ve}function vt(t){yn().$$.on_mount.push(t)}const Ae=[],nt=[];let Ie=[];const Mt=[],kn=Promise.resolve();let pt=!1;function xn(){pt||(pt=!0,kn.then(Qt))}function ke(t){Ie.push(t)}const ut=new Set;let He=0;function Qt(){if(He!==0)return;const t=Ve;do{try{for(;He<Ae.length;){const e=Ae[He];He++,Ze(e),$n(e.$$)}}catch(e){throw Ae.length=0,He=0,e}for(Ze(null),Ae.length=0,He=0;nt.length;)nt.pop()();for(let e=0;e<Ie.length;e+=1){const n=Ie[e];ut.has(n)||(ut.add(n),n())}Ie.length=0}while(Ae.length);for(;Mt.length;)Mt.pop()();pt=!1,ut.clear(),Ze(t)}function $n(t){if(t.fragment!==null){t.update(),se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ke)}}function Cn(t){const e=[],n=[];Ie.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Ie=e}let Ne;function Ln(){return Ne||(Ne=Promise.resolve(),Ne.then(()=>{Ne=null})),Ne}function ft(t,e,n){t.dispatchEvent(hn(`${e?"intro":"outro"}${n}`))}const Ye=new Set;let me;function lt(){me={r:0,c:[],p:me}}function st(){me.r||se(me.c),me=me.p}function P(t,e){t&&t.i&&(Ye.delete(t),t.i(e))}function R(t,e,n,l){if(t&&t.o){if(Ye.has(t))return;Ye.add(t),me.c.push(()=>{Ye.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const jn={duration:0};function xe(t,e,n,l){let i=e(t,n,{direction:"both"}),a=l?0:1,f=null,o=null,c=null,p;function d(){c&&vn(t,c)}function h(m,j){const b=m.b-a;return j*=Math.abs(b),{a,b:m.b,d:b,duration:j,start:m.start,end:m.start+j,group:m.group}}function v(m){const{delay:j=0,duration:b=300,easing:_=Nt,tick:w=T,css:M}=i||jn,y={start:Jt()+j,b:m};m||(y.group=me,me.r+=1),"inert"in t&&(m?p!==void 0&&(t.inert=p):(p=t.inert,t.inert=!0)),f||o?o=y:(M&&(d(),c=jt(t,a,m,b,j,_,M)),m&&w(0,1),f=h(y,b),ke(()=>ft(t,m,"start")),Kt(S=>{if(o&&S>o.start&&(f=h(o,b),o=null,ft(t,f.b,"start"),M&&(d(),c=jt(t,a,f.b,f.duration,0,_,i.css))),f){if(S>=f.end)w(a=f.b,1-a),ft(t,f.b,"end"),o||(f.b?d():--f.group.r||se(f.group.c)),f=null;else if(S>=f.start){const F=S-f.start;a=f.a+f.d*_(F/f.duration),w(a,1-a)}}return!!(f||o)}))}return{run(m){mt(i)?Ln().then(()=>{i=i({direction:m?"in":"out"}),v(m)}):v(m)},end(){d(),f=o=null}}}function Te(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function he(t){t&&t.c()}function fe(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),ke(()=>{const i=t.$$.on_mount.map(Zt).filter(mt);t.$$.on_destroy?t.$$.on_destroy.push(...i):se(i),t.$$.on_mount=[]}),s.forEach(ke)}function de(t,e){const n=t.$$;n.fragment!==null&&(Cn(n.after_update),se(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Mn(t,e){t.$$.dirty[0]===-1&&(Ae.push(t),xn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function we(t,e,n,l,s,i,a=null,f=[-1]){const o=Ve;Ze(t);const c=t.$$={fragment:null,ctx:[],props:i,update:T,not_equal:s,bound:$t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:$t(),dirty:f,skip_bound:!1,root:e.target||o.$$.root};a&&a(c.root);let p=!1;if(c.ctx=n?n(t,e.props||{},(d,h,...v)=>{const m=v.length?v[0]:h;return c.ctx&&s(c.ctx[d],c.ctx[d]=m)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](m),p&&Mn(t,d)),h}):[],c.update(),p=!0,se(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const d=mn(e.target);c.fragment&&c.fragment.l(d),d.forEach(x)}else c.fragment&&c.fragment.c();e.intro&&P(t.$$.fragment),fe(t,e.target,e.anchor),Qt()}Ze(o)}class _e{constructor(){ct(this,"$$");ct(this,"$$set")}$destroy(){de(this,1),this.$destroy=T}$on(e,n){if(!mt(n))return T;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!rn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Sn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Sn);window["cartier-server-url"]="https://reold-cartier.glitch.me";const ye={getRoot:async()=>await(await fetch(`${window["cartier-server-url"]}/`)).json(),getUserInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/user?username=${t}`)).json(),getPlaylistInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/playlist?id=${t}`)).json(),getDownloadPlaylist:async t=>await(await fetch(`${window["cartier-server-url"]}/download?link=${t}`)).json(),getDownloadStatus:async t=>await(await fetch(`${window["cartier-server-url"]}/status?key=${t}`)).json(),getDownloadTrack:async(t,e="",n=!1)=>await(await fetch(`${window["cartier-server-url"]}/track?link=${t}&key=${e}&create=${n}`)).json(),getStreamPlaylist:async t=>{let e=await fetch(`${window["cartier-server-url"]}/stream?key=${t}`);return[await e.ok,await e.blob(),e.headers.get("x-trackid")]}},Be=[];function Pe(t,e=T){let n;const l=new Set;function s(f){if(pe(t,f)&&(t=f,n)){const o=!Be.length;for(const c of l)c[1](),Be.push(c,t);if(o){for(let c=0;c<Be.length;c+=2)Be[c][0](Be[c+1]);Be.length=0}}}function i(f){s(f(t))}function a(f,o=T){const c=[f,o];return l.add(c),l.size===1&&(n=e(s,i)||T),f(t),()=>{l.delete(c),l.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:a}}function Xt(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Fn(t){const e=t-1;return e*e*e+1}function St(t,{delay:e=0,duration:n=400,easing:l=Xt,amount:s=5,opacity:i=0}={}){const a=getComputedStyle(t),f=+a.opacity,o=a.filter==="none"?"":a.filter,c=f*(1-i),[p,d]=fn(s);return{delay:e,duration:n,easing:l,css:(h,v)=>`opacity: ${f-c*v}; filter: ${o} blur(${v*p}${d});`}}function qe(t,{delay:e=0,duration:n=400,easing:l=Fn,axis:s="y"}={}){const i=getComputedStyle(t),a=+i.opacity,f=s==="y"?"height":"width",o=parseFloat(i[f]),c=s==="y"?["top","bottom"]:["left","right"],p=c.map(_=>`${_[0].toUpperCase()}${_.slice(1)}`),d=parseFloat(i[`padding${p[0]}`]),h=parseFloat(i[`padding${p[1]}`]),v=parseFloat(i[`margin${p[0]}`]),m=parseFloat(i[`margin${p[1]}`]),j=parseFloat(i[`border${p[0]}Width`]),b=parseFloat(i[`border${p[1]}Width`]);return{delay:e,duration:n,easing:l,css:_=>`overflow: hidden;opacity: ${Math.min(_*20,1)*a};${f}: ${_*o}px;padding-${c[0]}: ${_*d}px;padding-${c[1]}: ${_*h}px;margin-${c[0]}: ${_*v}px;margin-${c[1]}: ${_*m}px;border-${c[0]}-width: ${_*j}px;border-${c[1]}-width: ${_*b}px;`}}function Ft(t){let e,n,l,s,i,a;const f=t[3].default,o=on(f,t,t[2],null);return{c(){e=g("button"),n=g("div"),o&&o.c(),r(n,"class","bg-gray-950 p-2 rounded-md ring-1 ring-zinc-500 max-w-[90vw] flex flex-col"),r(e,"class","absolute top-0 left-0 w-full h-full backdrop-blur-md bg-transparent text-white flex flex-col items-center justify-center text-center text-xs")},m(c,p){C(c,e,p),u(e,n),o&&o.m(n,null),s=!0,i||(a=W(e,"click",gn(t[4])),i=!0)},p(c,p){o&&o.p&&(!s||p&4)&&cn(o,f,c,c[2],s?an(f,c[2],p,null):un(c[2]),null)},i(c){s||(P(o,c),c&&ke(()=>{s&&(l||(l=xe(e,St,{duration:500},!0)),l.run(1))}),s=!0)},o(c){R(o,c),c&&(l||(l=xe(e,St,{duration:500},!1)),l.run(0)),s=!1},d(c){c&&x(e),o&&o.d(c),c&&l&&l.end(),i=!1,a()}}}function On(t){let e,n,l=!t[0]&&Ft(t);return{c(){l&&l.c(),e=_t()},m(s,i){l&&l.m(s,i),C(s,e,i),n=!0},p(s,[i]){s[0]?l&&(lt(),R(l,1,1,()=>{l=null}),st()):l?(l.p(s,i),i&1&&P(l,1)):(l=Ft(s),l.c(),P(l,1),l.m(e.parentNode,e))},i(s){n||(P(l),n=!0)},o(s){R(l),n=!1},d(s){s&&x(e),l&&l.d(s)}}}function Hn(t,e,n){let{$$slots:l={},$$scope:s}=e,{hidden:i=!1}=e,{onCollapse:a=()=>{}}=e;const f=o=>{a&&a()};return t.$$set=o=>{"hidden"in o&&n(0,i=o.hidden),"onCollapse"in o&&n(1,a=o.onCollapse),"$$scope"in o&&n(2,s=o.$$scope)},[i,a,s,l,f]}class en extends _e{constructor(e){super(),we(this,e,Hn,On,pe,{hidden:0,onCollapse:1})}}function Ot(t){let e,n;return{c(){e=I("svg"),n=I("path"),r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke-width","1.5"),r(e,"stroke","currentColor"),r(e,"class","aspect-square w-[1.2em] animate-spin inline")},m(l,s){C(l,e,s),u(e,n)},d(l){l&&x(e)}}}function Bn(t){let e,n,l,s,i,a,f=t[0].step+"",o,c=t[0].is&&Ot();return{c(){e=g("h1"),e.textContent="Waking up servers!",n=k(),l=g("p"),l.textContent=`Our servers take a little break every 5 minutes when things quiet down.
    We're in the process of waking them up for you. It's automatic, so no need
    to stress!`,s=k(),i=g("p"),c&&c.c(),a=k(),o=N(f),r(e,"class","text-xl"),r(l,"class","text-xs text-gray-500 inline"),r(i,"class","inline"),Lt(i,"text-green-500",!t[0].is)},m(p,d){C(p,e,d),C(p,n,d),C(p,l,d),C(p,s,d),C(p,i,d),c&&c.m(i,null),u(i,a),u(i,o)},p(p,d){p[0].is?c||(c=Ot(),c.c(),c.m(i,a)):c&&(c.d(1),c=null),d&1&&f!==(f=p[0].step+"")&&oe(o,f),d&1&&Lt(i,"text-green-500",!p[0].is)},d(p){p&&(x(e),x(n),x(l),x(s),x(i)),c&&c.d()}}}function An(t){let e,n;return e=new en({props:{hidden:!t[0].is,$$slots:{default:[Bn]},$$scope:{ctx:t}}}),{c(){he(e.$$.fragment)},m(l,s){fe(e,l,s),n=!0},p(l,[s]){const i={};s&1&&(i.hidden=!l[0].is),s&9&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){de(e,l)}}}function En(t,e,n){let l;const s=Pe({step:"trying to make contact",is:!0});Ue(t,s,a=>n(0,l=a));let{handleWakeup:i}=e;return vt(()=>{ie(s,l.step="waking up servers",l),ye.getRoot().then(a=>{ie(s,l.is=!1,l),ie(s,l.step="servers are running!",l),i()}).catch(a=>{le(`unable to reach servers. err: ${a}`),ie(s,l.step="servers unreachable (reload?)",l)})}),t.$$set=a=>{"handleWakeup"in a&&n(2,i=a.handleWakeup)},[l,s,i]}class In extends _e{constructor(e){super(),we(this,e,En,An,pe,{handleWakeup:2})}}function zn(t){let e,n,l,s,i,a,f,o,c,p,d,h,v,m,j,b,_,w,M,y,S,F,B,H,D,ee;return e=new In({props:{handleWakeup:t[2]}}),{c(){he(e.$$.fragment),n=k(),l=g("div"),s=g("div"),i=g("p"),i.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path></svg>
      fill-in to continue`,a=k(),f=g("div"),o=g("div"),c=g("input"),p=k(),d=g("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline rounded-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg>',h=k(),v=g("div"),v.innerHTML='<span>copy your</span><svg xmlns="http://www.w3.org/2000/svg" class="w-[1em] inline" viewBox="-33.4974 -55.829 290.3108 334.974"><path d="M177.707 98.987c-35.992-21.375-95.36-23.34-129.719-12.912-5.519 1.674-11.353-1.44-13.024-6.958-1.672-5.521 1.439-11.352 6.96-13.029 39.443-11.972 105.008-9.66 146.443 14.936 4.964 2.947 6.59 9.356 3.649 14.31-2.944 4.963-9.359 6.6-14.31 3.653m-1.178 31.658c-2.525 4.098-7.883 5.383-11.975 2.867-30.005-18.444-75.762-23.788-111.262-13.012-4.603 1.39-9.466-1.204-10.864-5.8a8.717 8.717 0 015.805-10.856c40.553-12.307 90.968-6.347 125.432 14.833 4.092 2.52 5.38 7.88 2.864 11.968m-13.663 30.404a6.954 6.954 0 01-9.569 2.316c-26.22-16.025-59.223-19.644-98.09-10.766a6.955 6.955 0 01-8.331-5.232 6.95 6.95 0 015.233-8.334c42.533-9.722 79.017-5.538 108.448 12.446a6.96 6.96 0 012.31 9.57M111.656 0C49.992 0 0 49.99 0 111.656c0 61.672 49.992 111.66 111.657 111.66 61.668 0 111.659-49.988 111.659-111.66C223.316 49.991 173.326 0 111.657 0" fill="#1DB954"></path></svg><span>Spotify profile link from your account page</span>',m=k(),j=g("div"),b=g("label"),_=g("input"),w=k(),M=g("span"),M.textContent="persist",y=k(),S=g("button"),S.textContent="continue",F=k(),B=g("details"),B.innerHTML=`<summary class="font-bold mb-2">Cartier Manager: Free Spotify Playlist Downloader</summary> <p class="mb-4">Mobile-friendly, free-to-use Spotify playlist downloader. Share your
      Spotify profile link to effortlessly download all your public playlists.</p> <p>Powered by <code>spotify-dl</code> on our servers, Cartier finds and downloads
      songs from YouTube based on Spotify data.</p>`,r(i,"class","text-2xl"),r(c,"type","text"),r(c,"class","w-full"),r(c,"placeholder","type Spotify profile link"),r(c,"autocomplete","url"),r(c,"aria-label","type spotify profile link"),r(d,"class","bg-zinc-500"),r(d,"aria-label","paste from clipboard"),r(o,"class","w-full flex flex-row items-center justify-center space-x-2"),r(v,"class","text-xs svg-icon"),r(f,"class","flex flex-col items-center justify-center"),r(_,"type","checkbox"),r(_,"class","inline"),r(M,"class","align-middle"),r(b,"for","persisting userid"),r(b,"class","text-base flex flex-row space-x-2 bg-gray-950 p-3 rounded-md"),r(S,"class","hover:scale-110"),r(j,"class","flex flex-row items-center justify-center space-x-3"),r(s,"class","flex flex-col items-center text-center justify-center bg-zinc-950/50 ring-1 ring-zinc-500 rounded-md w-11/12 space-y-7 p-3"),r(B,"class","text-sm w-11/12"),r(l,"class","flex flex-col justify-center items-center w-full h-full")},m(O,V){fe(e,O,V),C(O,n,V),C(O,l,V),u(l,s),u(s,i),u(s,a),u(s,f),u(f,o),u(o,c),Ct(c,t[0]),u(o,p),u(o,d),u(f,h),u(f,v),u(s,m),u(s,j),u(j,b),u(b,_),_.checked=t[1],u(b,w),u(b,M),u(j,y),u(j,S),u(l,F),u(l,B),H=!0,D||(ee=[W(c,"input",t[6]),W(d,"click",t[3]),W(_,"change",t[7]),W(S,"click",t[4])],D=!0)},p(O,[V]){V&1&&c.value!==O[0]&&Ct(c,O[0]),V&2&&(_.checked=O[1])},i(O){H||(P(e.$$.fragment,O),H=!0)},o(O){R(e.$$.fragment,O),H=!1},d(O){O&&(x(n),x(l)),de(e,O),D=!1,se(ee)}}}function Dn(t,e,n){const l=()=>{const d=localStorage.getItem("cartier-userid");console.info("performing auto login for",d),d&&le("performing auto-login",!0,5,h=>{s(d,()=>{h()})})};let{handleUsername:s}=e,i="",a=!0;const f=async()=>{navigator.clipboard.readText&&n(0,i=await navigator.clipboard.readText())},o=()=>{let d;try{d=new URL(i)}catch{n(0,i="");return}const h=d.pathname.split("/")[2];a&&(localStorage.setItem("cartier-userid",h),le("login information saved!")),s(h)};function c(){i=this.value,n(0,i)}function p(){a=this.checked,n(1,a)}return t.$$set=d=>{"handleUsername"in d&&n(5,s=d.handleUsername)},[i,a,l,f,o,s,c,p]}class Un extends _e{constructor(e){super(),we(this,e,Dn,zn,pe,{handleUsername:5})}}function Ht(t){return Object.prototype.toString.call(t)==="[object Date]"}function gt(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((s,i)=>gt(t[i],s));return s=>l.map(i=>i(s))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Ht(t)&&Ht(e)){t=t.getTime(),e=e.getTime();const i=e-t;return a=>new Date(t+a*i)}const l=Object.keys(e),s={};return l.forEach(i=>{s[i]=gt(t[i],e[i])}),i=>{const a={};return l.forEach(f=>{a[f]=s[f](i)}),a}}if(n==="number"){const l=e-t;return s=>t+s*l}throw new Error(`Cannot interpolate ${n} values`)}function Tn(t,e={}){const n=Pe(t);let l,s=t;function i(a,f){if(t==null)return n.set(t=a),Promise.resolve();s=a;let o=l,c=!1,{delay:p=0,duration:d=400,easing:h=Nt,interpolate:v=gt}=dt(dt({},e),f);if(d===0)return o&&(o.abort(),o=null),n.set(t=s),Promise.resolve();const m=Jt()+p;let j;return l=Kt(b=>{if(b<m)return!0;c||(j=v(t,a),typeof d=="function"&&(d=d(t,a)),c=!0),o&&(o.abort(),o=null);const _=b-m;return _>d?(n.set(t=a),!1):(n.set(t=j(h(_/d))),!0)}),l.promise}return{set:i,update:(a,f)=>i(a(s,t),f),subscribe:n.subscribe}}const Me=Pe({opfs:{handles:{root:{},cartierFile:{},tracksDir:{}}}}),Je=Pe({}),qn=()=>{Je.subscribe(async t=>{We.cartierFile.write(JSON.stringify(t))})},We={initialize:async()=>{let t={...Se(Me)};t.opfs.handles.root=await navigator.storage.getDirectory(),t.opfs.handles.tracksDir=await t.opfs.handles.root.getDirectoryHandle("tracks",{create:!0}),Me.set(t),await We.cartierFile.initialize()},cartierFile:{initialize:async()=>{let t={...Se(Me)};t.opfs.handles.cartierFile=await t.opfs.handles.root.getFileHandle("cartier.json",{create:!0}),Me.set(t);let e=await We.cartierFile.read(),n={};e.size==0?(n={info:{type:"cartier-file",version:1},playlists:[]},await We.cartierFile.write(JSON.stringify(n)),Je.set(n)):Je.set(JSON.parse(await e.text())),qn()},write:async t=>{const n=await Se(Me).opfs.handles.cartierFile.createWritable();n.write(t),n.close()},read:async()=>await Se(Me).opfs.handles.cartierFile.getFile()}},be=Pe({open:!1,audio:{},selectId:"",playing:!1,queue:[]}),Re={playback:{play:()=>{be.update(t=>(t.audio.play(),t))},pause:()=>{be.update(t=>(t.audio.pause(),{...t,playing:!1}))},resume:()=>{be.update(t=>({...t,playing:!0}))},next:async()=>{let t=Se(be);const e=Se(Me),n=t.queue[0];console.log("handles tracksdir get file handle",e.opfs.handles.tracksDir);const s=await(await e.opfs.handles.tracksDir.getFileHandle(`${n}.mp3`)).getFile(),i=URL.createObjectURL(s);be.update(a=>(a.audio&&a.audio.pause&&a.audio.pause(),{...a,playing:!0,selectId:n,queue:a.queue.slice(1),audio:new Audio(i)})),Re.playback.play()}},append:{playlist:t=>{const n=Se(Je).playlists.find(l=>l.id==t);n&&be.update(l=>({...l,open:!0,queue:[...l.queue,...n.tracks]}))},track:t=>{}},clear:()=>{be.set({open:!1,playing:!1,queue:[],selectId:"",audio:{}})}};function Bt(t,e,n){const l=t.slice();return l[15]=e[n],l}function Pn(t){let e,n;return{c(){e=I("svg"),n=I("path"),r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke-width","1.5"),r(e,"stroke","currentColor"),r(e,"class","w-[10vh] h-[10vh]")},m(l,s){C(l,e,s),u(e,n)},p:T,d(l){l&&x(e)}}}function Nn(t){let e,n;return{c(){e=g("img"),r(e,"loading","lazy"),De(e.src,n=t[0].images[0].url)||r(e,"src",n),r(e,"class","rounded-full max-h-[10vh] shadow-black shadow-lg ring-1 ring-black"),r(e,"alt","playlist's cover")},m(l,s){C(l,e,s)},p(l,s){s&1&&!De(e.src,n=l[0].images[0].url)&&r(e,"src",n)},d(l){l&&x(e)}}}function Zn(t){let e,n;return{c(){e=I("svg"),n=I("path"),r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke-width","4"),r(e,"stroke","currentColor"),r(e,"class","w-[1.2em] text-xs aspect-square")},m(l,s){C(l,e,s),u(e,n)},d(l){l&&x(e)}}}function Wn(t){let e,n;return{c(){e=I("svg"),n=I("path"),r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"d","m4.5 15.75 7.5-7.5 7.5 7.5"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke-width","3"),r(e,"stroke","currentColor"),r(e,"class","w-[1.2em] aspect-square text-xs")},m(l,s){C(l,e,s),u(e,n)},d(l){l&&x(e)}}}function Rn(t){let e;return{c(){e=N("download")},m(n,l){C(n,e,l)},p:T,d(n){n&&x(e)}}}function Vn(t){let e;return{c(){e=N("downloaded")},m(n,l){C(n,e,l)},p:T,d(n){n&&x(e)}}}function Jn(t){let e,n,l,s;function i(o,c){return o[3].stage=="downloading"?Kn:Gn}let a=i(t),f=a(t);return{c(){e=I("svg"),n=I("path"),l=k(),f.c(),s=_t(),r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke-width","1.5"),r(e,"stroke","currentColor"),r(e,"class","w-4 h-4 inline animate-spin")},m(o,c){C(o,e,c),u(e,n),C(o,l,c),f.m(o,c),C(o,s,c)},p(o,c){a!==(a=i(o))&&(f.d(1),f=a(o),f&&(f.c(),f.m(s.parentNode,s)))},d(o){o&&(x(e),x(l),x(s)),f.d(o)}}}function Gn(t){let e;return{c(){e=N("converting")},m(n,l){C(n,e,l)},d(n){n&&x(e)}}}function Kn(t){let e;return{c(){e=N("downloading")},m(n,l){C(n,e,l)},d(n){n&&x(e)}}}function At(t){let e,n,l;return{c(){e=g("button"),e.textContent="add to queue",r(e,"class","text-xs p-1")},m(s,i){C(s,e,i),n||(l=W(e,"click",t[13]),n=!0)},p:T,d(s){s&&x(e),n=!1,l()}}}function Et(t){let e,n,l,s,i;return{c(){e=g("button"),e.textContent="save",n=k(),l=g("button"),l.textContent="save as mp3",r(e,"class","text-xs p-1"),r(l,"class","text-xs p-1")},m(a,f){C(a,e,f),C(a,n,f),C(a,l,f),s||(i=[W(e,"click",t[10]),W(l,"click",t[9])],s=!0)},p:T,d(a){a&&(x(e),x(n),x(l)),s=!1,se(i)}}}function It(t){let e,n,l,s=t[1].tracks.total+"",i,a,f,o,c,p=Te(t[1].tracks.items),d=[];for(let h=0;h<p.length;h+=1)d[h]=zt(Bt(t,p,h));return{c(){e=g("div"),n=g("div"),l=g("div"),i=N(s),a=N(" tracks"),f=k();for(let h=0;h<d.length;h+=1)d[h].c();r(l,"class","bg-zinc-950 rounded-full text-white p-2"),r(n,"class","overflow-hidden overflow-x-scroll flex flex-row items-center space-x-2 p-1 relative"),r(e,"class","col-span-4 bg-zinc-500/10 rounded-md mx-2 text-xs flex flex-row justify-center")},m(h,v){C(h,e,v),u(e,n),u(n,l),u(l,i),u(l,a),u(n,f);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(n,null);c=!0},p(h,v){if((!c||v&2)&&s!==(s=h[1].tracks.total+"")&&oe(i,s),v&10){p=Te(h[1].tracks.items);let m;for(m=0;m<p.length;m+=1){const j=Bt(h,p,m);d[m]?d[m].p(j,v):(d[m]=zt(j),d[m].c(),d[m].m(n,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=p.length}},i(h){c||(h&&ke(()=>{c&&(o||(o=xe(e,qe,{duration:250},!0)),o.run(1))}),c=!0)},o(h){h&&(o||(o=xe(e,qe,{duration:250},!1)),o.run(0)),c=!1},d(h){h&&x(e),wt(d,h),h&&o&&o.end()}}}function Yn(t){let e;return{c(){e=g("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[5vh] h-[5vh]"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"></path></svg> ',r(e,"class","ring-1 ring-black shadow-md shadow-black rounded-full")},m(n,l){C(n,e,l)},p:T,d(n){n&&x(e)}}}function Qn(t){let e,n,l;return{c(){e=g("img"),r(e,"loading","lazy"),De(e.src,n=t[15].track.album.images[0].url)||r(e,"src",n),r(e,"class",l="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-sm shadow-black will-change-auto "+(t[3].is?(t[3].statuses[t[15].track.id]=="downloading"?" rotating-image":"")+(t[3].statuses[t[15].track.id]=="ready"?" shadow-green-500 ring-green-500":"")+(t[3].statuses[t[15].track.id]=="failed"?" shadow-red-500 ring-red-500":""):"")),r(e,"alt","album")},m(s,i){C(s,e,i)},p(s,i){i&2&&!De(e.src,n=s[15].track.album.images[0].url)&&r(e,"src",n),i&10&&l!==(l="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-sm shadow-black will-change-auto "+(s[3].is?(s[3].statuses[s[15].track.id]=="downloading"?" rotating-image":"")+(s[3].statuses[s[15].track.id]=="ready"?" shadow-green-500 ring-green-500":"")+(s[3].statuses[s[15].track.id]=="failed"?" shadow-red-500 ring-red-500":""):""))&&r(e,"class",l)},d(s){s&&x(e)}}}function zt(t){let e;function n(i,a){return i[15].track&&i[15].track.album.images.length>0?Qn:Yn}let l=n(t),s=l(t);return{c(){s.c(),e=_t()},m(i,a){s.m(i,a),C(i,e,a)},p(i,a){l===(l=n(i))&&s?s.p(i,a):(s.d(1),s=l(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&x(e),s.d(i)}}}function Xn(t){let e,n,l,s,i,a,f=t[0].name+"",o,c,p,d,h,v,m,j=(t[0].description||`by ${t[0].owner.display_name}`)+"",b,_,w,M,y,S,F,B,H=t[6].playlists.some(t[12]),D,ee,O=t[4]&&Object.keys(t[1]).length>0,V,Y,E,J,re;function Fe($,A){return $[0].images.length>0?Nn:Pn}let $e=Fe(t),G=$e(t);function ae($,A){return $[4]?Wn:Zn}let Q=ae(t),te=Q(t);function ve($,A){return $[3].is?Jn:$[2].length>0?Vn:Rn}let ge=ve(t),ne=ge(t),Z=H&&At(t),K=t[2].length>0&&!t[3].is&&Et(t),U=O&&It(t);return{c(){e=g("div"),n=g("div"),l=g("div"),G.c(),s=k(),i=g("div"),a=g("a"),o=N(f),c=k(),p=I("svg"),d=I("path"),v=k(),m=g("p"),b=N(j),_=k(),w=g("div"),M=g("button"),te.c(),y=k(),S=g("button"),ne.c(),B=k(),Z&&Z.c(),D=k(),K&&K.c(),ee=k(),U&&U.c(),V=k(),Y=g("div"),r(l,"class","col-span-1 flex flex-col items-center justify-center"),r(d,"stroke-linecap","round"),r(d,"stroke-linejoin","round"),r(d,"d","M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"),r(p,"xmlns","http://www.w3.org/2000/svg"),r(p,"fill","none"),r(p,"viewBox","0 0 24 24"),r(p,"stroke-width","1.5"),r(p,"stroke","currentColor"),r(p,"class","w-4 h-4 inline"),r(a,"class","hover:scale-110 duration-75 text-left line-clamp-1"),r(a,"href",h=t[0].external_urls.spotify),r(a,"target","_blank"),r(m,"class","text-xs line-clamp-1 text-gray-300"),r(M,"class","bg-transparent text-white ring-1 p-1 ring-zinc-500 hover:scale-110"),r(M,"aria-label","show more"),r(S,"class","text-xs bg-aodPurple p-1"),S.disabled=F=t[3].is||t[2].length>0,r(w,"class","flex flex-row space-x-2 mt-1"),r(i,"class","col-span-3 flex flex-col justify-center items-start"),r(n,"class","grid grid-cols-4 w-full gap-1"),r(Y,"class","h-1 absolute backdrop-opacity-50 bg-aodPurple rounded-sm left-0 bottom-0"),Xe(Y,"width",t[5]/100*90+"vw"),Y.hidden=E=!t[3].is,r(e,"class","bg-gray-950/50 ring-1 ring-zinc-500 py-2 rounded-md w-[90vw] text-center relative")},m($,A){C($,e,A),u(e,n),u(n,l),G.m(l,null),u(n,s),u(n,i),u(i,a),u(a,o),u(a,c),u(a,p),u(p,d),u(i,v),u(i,m),u(m,b),u(i,_),u(i,w),u(w,M),te.m(M,null),u(w,y),u(w,S),ne.m(S,null),u(w,B),Z&&Z.m(w,null),u(w,D),K&&K.m(w,null),u(n,ee),U&&U.m(n,null),u(e,V),u(e,Y),J||(re=[W(M,"click",t[8]),W(S,"click",t[11])],J=!0)},p($,[A]){$e===($e=Fe($))&&G?G.p($,A):(G.d(1),G=$e($),G&&(G.c(),G.m(l,null))),A&1&&f!==(f=$[0].name+"")&&oe(o,f),A&1&&h!==(h=$[0].external_urls.spotify)&&r(a,"href",h),A&1&&j!==(j=($[0].description||`by ${$[0].owner.display_name}`)+"")&&oe(b,j),Q!==(Q=ae($))&&(te.d(1),te=Q($),te&&(te.c(),te.m(M,null))),ge===(ge=ve($))&&ne?ne.p($,A):(ne.d(1),ne=ge($),ne&&(ne.c(),ne.m(S,null))),A&12&&F!==(F=$[3].is||$[2].length>0)&&(S.disabled=F),A&65&&(H=$[6].playlists.some($[12])),H?Z?Z.p($,A):(Z=At($),Z.c(),Z.m(w,D)):Z&&(Z.d(1),Z=null),$[2].length>0&&!$[3].is?K?K.p($,A):(K=Et($),K.c(),K.m(w,null)):K&&(K.d(1),K=null),A&18&&(O=$[4]&&Object.keys($[1]).length>0),O?U?(U.p($,A),A&18&&P(U,1)):(U=It($),U.c(),P(U,1),U.m(n,null)):U&&(lt(),R(U,1,1,()=>{U=null}),st()),A&32&&Xe(Y,"width",$[5]/100*90+"vw"),A&8&&E!==(E=!$[3].is)&&(Y.hidden=E)},i($){P(U)},o($){R(U)},d($){$&&x(e),G.d(),te.d(),ne.d(),Z&&Z.d(),K&&K.d(),U&&U.d(),J=!1,se(re)}}}function el(t,e,n){let l,s;Ue(t,Je,w=>n(6,s=w));let i={},a=[],{playlist:f}=e;const o={is:!1,statuses:{},stage:""};let c=!1,p=Tn(0,{duration:1e3,easing:Xt});Ue(t,p,w=>n(5,l=w));const d=()=>{c==!1?(Object.keys(i).length==0&&h(),n(4,c=!0)):n(4,c=!1)},h=async()=>{const w=f.external_urls.spotify,y=new URL(w).pathname.split("/")[2];le("loading playlist info",!0,1,async S=>{let F=await ye.getPlaylistInfo(y);n(1,i=F),S()})},v=()=>{a.forEach(({blob:w,trackid:M},y)=>{const S=URL.createObjectURL(w),F=document.createElement("a");F.href=S,F.download=`${M}.mp3`,F.click()})},m=async()=>{const w=await navigator.storage.getDirectory(),M=await w.getDirectoryHandle("tracks",{create:!0}),y=await w.getFileHandle("cartier.json",{create:!0});a.forEach(async({blob:H,trackid:D})=>{const O=await(await M.getFileHandle(`${D}.mp3`,{create:!0})).createWritable();await O.write(H),await O.close()});const S=await y.getFile();let F=JSON.parse(await S.text());const B=await y.createWritable();F.playlists=[...F.playlists,{name:f.name,url:f.external_urls.spotify,desc:f.description,owner:f.owner.display_name,tracks:[...i.tracks.items.map(H=>H.track.id)],id:i.id}],B.write(JSON.stringify(F)),B.close()},j=async()=>{if(Object.keys(i).length==0&&await h(),!i.tracks)return;if(i.tracks.items.length==0){le("cannot download empty playlist");return}n(3,o.is=!0,o),n(3,o.stage="converting",o),p.set(0,{duration:1}),p.set(10,{duration:1e4});let w=i.tracks.items[0].track;ye.getDownloadTrack(w.external_urls.spotify,"",!0).then(async M=>{if(M.success==!1){ie(p,l=0,l),n(3,o.is=!1,o),le(`serverErr: ${M.info}`);return}const y=M.data.key;n(3,o.statuses[w.id]="downloading",o);for(const[F,{track:B}]of[...i.tracks.items].splice(1).entries())B&&n(3,o.statuses[B.id]="downloading",o),(await ye.getDownloadTrack(B.external_urls.spotify,y,!1)).success==!1&&le(`failed downloading track (${B.name})`);await p.set(10);const S=setInterval(async()=>{let F=await ye.getDownloadStatus(y);const B=F.data.filter(H=>H.status!=="downloading");if(F.data.forEach(H=>{n(3,o.statuses[H.id]=H.status,o)}),ie(p,l=B.length/F.data.length*40+10,l),B.length==F.data.length){n(3,o.stage="downloading",o),clearInterval(S);for(let H=0;H<B.length;H++){let[D,ee,O]=await ye.getStreamPlaylist(y);if(!D){le(`failed downloading a track (in "${f.name}")`);continue}n(2,a=[...a,{blob:ee,trackid:O}]),ie(p,l=(H+1)/B.length*50+50,l)}await p.set(100,{duration:500}),n(3,o.is=!1,o)}},7500)})},b=w=>w.id==f.id,_=()=>{Re.append.playlist(f.id)};return t.$$set=w=>{"playlist"in w&&n(0,f=w.playlist)},[f,i,a,o,c,l,s,p,d,v,m,j,b,_]}class tl extends _e{constructor(e){super(),we(this,e,el,Xn,pe,{playlist:0})}}function nl(t){let e,n,l,s,i,a,f,o,c=t[0].queue.length+"",p,d,h,v;return{c(){e=g("button"),n=g("button"),n.textContent="play",l=k(),s=g("button"),s.textContent="pause",i=k(),a=g("button"),a.textContent="next",f=k(),o=g("p"),p=N(c),d=N(" tracks in queue"),r(n,"class","col-span-4 text-xs p-1"),r(s,"class","col-span-3 text-xs p-1"),r(a,"class","col-span-3 text-xs p-1"),r(o,"class","col-span-10 text-xs"),r(e,"class","select-none text-sm text-white ring-1 ring-zinc-500 bg-gray-950/50 backdrop-blur-md rounded-md w-11/12 absolute bottom-[3vh] z-[500] grid grid-cols-10 gap-1 items-center p-2")},m(m,j){C(m,e,j),u(e,n),u(e,l),u(e,s),u(e,i),u(e,a),u(e,f),u(e,o),u(o,p),u(o,d),h||(v=[W(n,"click",t[1]),W(s,"click",t[2]),W(a,"click",t[3])],h=!0)},p(m,[j]){j&1&&c!==(c=m[0].queue.length+"")&&oe(p,c)},i:T,o:T,d(m){m&&x(e),h=!1,se(v)}}}function ll(t,e,n){let l;Ue(t,be,f=>n(0,l=f));const s=()=>Re.playback.play(),i=()=>Re.playback.pause(),a=()=>Re.playback.next();return t.$$.update=()=>{t.$$.dirty&1&&l.audio&&l.playing&&l.audio.addEventListener("timeupdate",({timeStamp:f})=>{})},[l,s,i,a]}class sl extends _e{constructor(e){super(),we(this,e,ll,nl,pe,{})}}function Dt(t,e,n){const l=t.slice();return l[6]=e[n][0],l[7]=e[n][1],l}function Ut(t){let e,n;return{c(){e=I("svg"),n=I("path"),r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"d","M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"),r(n,"class","svelte-1g5vnm5"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke-width","1.5"),r(e,"stroke","currentColor"),r(e,"class","w-[1em] svelte-1g5vnm5")},m(l,s){C(l,e,s),u(e,n)},d(l){l&&x(e)}}}function Tt(t){let e,n,l=t[6].startsWith("r"),s,i=t[6].slice(1).split("_").join(" ")+"",a,f,o,c=t[7]+"",p,d=l&&Ut();return{c(){e=g("tr"),n=g("td"),d&&d.c(),s=k(),a=N(i),f=k(),o=g("td"),p=N(c),r(n,"class","svg-icon p-2 svelte-1g5vnm5"),r(o,"class","bg-gray-950 border-l-2 border-gray-900 svelte-1g5vnm5"),r(e,"class","odd:bg-gray-900 even:bg-gray-950 svelte-1g5vnm5")},m(h,v){C(h,e,v),u(e,n),d&&d.m(n,null),u(n,s),u(n,a),u(e,f),u(e,o),u(o,p)},p(h,v){v&2&&(l=h[6].startsWith("r")),l?d||(d=Ut(),d.c(),d.m(n,s)):d&&(d.d(1),d=null),v&2&&i!==(i=h[6].slice(1).split("_").join(" ")+"")&&oe(a,i),v&2&&c!==(c=h[7]+"")&&oe(p,c)},d(h){h&&x(e),d&&d.d()}}}function rl(t){let e,n,l,s,i,a,f,o,c,p,d,h,v,m,j,b=Te(Object.entries(t[1])),_=[];for(let w=0;w<b.length;w+=1)_[w]=Tt(Dt(t,b,w));return{c(){e=g("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] inline svelte-1g5vnm5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" class="svelte-1g5vnm5"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" class="svelte-1g5vnm5"></path></svg> <h1 class="svelte-1g5vnm5">Settings</h1>',n=k(),l=g("table"),s=g("thead"),s.innerHTML='<th class="svelte-1g5vnm5">parameter</th><th class="svelte-1g5vnm5">value</th>',i=k(),a=g("tbody");for(let w=0;w<_.length;w+=1)_[w].c();f=k(),o=g("div"),c=g("button"),c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] svelte-1g5vnm5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" class="svelte-1g5vnm5"></path></svg> <p class="svelte-1g5vnm5">refresh</p>',p=k(),d=g("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1g5vnm5"><path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z" clip-rule="evenodd" class="svelte-1g5vnm5"></path></svg> <p class=" svelte-1g5vnm5">delete downloads</p>',h=k(),v=g("button"),v.textContent="close",r(e,"class","text-xl mb-2 svg-icon svelte-1g5vnm5"),r(s,"class","border-b-2 border-gray-900 svelte-1g5vnm5"),r(a,"class","svelte-1g5vnm5"),r(l,"class","text-sm ring-1 ring-zinc-500 rounded-md svelte-1g5vnm5"),r(c,"class","bg-blue-500 text-black svg-icon col-span-3 svelte-1g5vnm5"),r(d,"class","bg-red-500 text-white svg-icon col-span-5 svelte-1g5vnm5"),r(v,"class","col-span-2 svelte-1g5vnm5"),r(o,"class","grid grid-cols-10 gap-1 mt-2 btns-tab font-bold svelte-1g5vnm5")},m(w,M){C(w,e,M),C(w,n,M),C(w,l,M),u(l,s),u(l,i),u(l,a);for(let y=0;y<_.length;y+=1)_[y]&&_[y].m(a,null);C(w,f,M),C(w,o,M),u(o,c),u(o,p),u(o,d),u(o,h),u(o,v),m||(j=[W(c,"click",t[3]),W(d,"click",t[2]),W(v,"click",t[4])],m=!0)},p(w,M){if(M&2){b=Te(Object.entries(w[1]));let y;for(y=0;y<b.length;y+=1){const S=Dt(w,b,y);_[y]?_[y].p(S,M):(_[y]=Tt(S),_[y].c(),_[y].m(a,null))}for(;y<_.length;y+=1)_[y].d(1);_.length=b.length}},d(w){w&&(x(e),x(n),x(l),x(f),x(o)),wt(_,w),m=!1,se(j)}}}function il(t){let e,n;return e=new en({props:{hidden:t[0],onCollapse:t[5],$$slots:{default:[rl]},$$scope:{ctx:t}}}),{c(){he(e.$$.fragment)},m(l,s){fe(e,l,s),n=!0},p(l,[s]){const i={};s&1&&(i.hidden=l[0]),s&1&&(i.onCollapse=l[5]),s&1027&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){de(e,l)}}}function ol(t,e,n){let{hidden:l}=e,s={};const i=()=>{le("deleting all downloads and refreshing",!0,10,async c=>{await(await navigator.storage.getDirectory()).remove({recursive:!0}),c(),window.location.reload()})},a=()=>{le("loading settings",!0,5,async c=>{const p=await navigator.storage.estimate();let d=0;p&&(d=p.usage/1024**2),n(1,s={rsaved_userid:localStorage.getItem("cartier-userid")||"not saved",rserver_url:window["cartier-server-url"],ropfs_used:`${d.toFixed(1)} MB`}),c()})};vt(a);const f=()=>n(0,l=!0),o=()=>{n(0,l=!0)};return t.$$set=c=>{"hidden"in c&&n(0,l=c.hidden)},[l,s,i,a,f,o]}class al extends _e{constructor(e){super(),we(this,e,ol,il,pe,{hidden:0})}}const ze=Pe({loggedIn:!1,ui:{settingsOpen:!1},user:{},playlists:{}});function cl(t){let e,n;return{c(){e=I("svg"),n=I("circle"),r(n,"cx","50"),r(n,"cy","50"),r(n,"r","50"),r(e,"viewBox","0 0 100 100"),r(e,"class","w-[0.2em] fill-white")},m(l,s){C(l,e,s),u(e,n)},p:T,i:T,o:T,d(l){l&&x(e)}}}class ul extends _e{constructor(e){super(),we(this,e,null,cl,pe,{})}}function qt(t,e,n){const l=t.slice();return l[3]=e[n],l}function fl(t){let e,n;return{c(){e=I("svg"),n=I("path"),r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke-width","1.5"),r(e,"stroke","currentColor"),r(e,"class","w-[15vw] max-w-[10vh] aspect-square rounded-full ring-aodBg ring-2")},m(l,s){C(l,e,s),u(e,n)},p:T,d(l){l&&x(e)}}}function dl(t){let e,n,l;return{c(){e=g("img"),r(e,"loading","lazy"),De(e.src,n=t[0].user.images[1].url)||r(e,"src",n),r(e,"alt",l=`${t[0].user.display_name}'s profile picture`),r(e,"class","rounded-full w-[15vw] max-w-[10vh] ring-aodBg ring-1 shadow-sm shadow-black aspect-square")},m(s,i){C(s,e,i)},p(s,i){i&1&&!De(e.src,n=s[0].user.images[1].url)&&r(e,"src",n),i&1&&l!==(l=`${s[0].user.display_name}'s profile picture`)&&r(e,"alt",l)},d(s){s&&x(e)}}}function Pt(t){let e,n;return e=new tl({props:{playlist:t[3]}}),{c(){he(e.$$.fragment)},m(l,s){fe(e,l,s),n=!0},p(l,s){const i={};s&1&&(i.playlist=l[3]),e.$set(i)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){de(e,l)}}}function pl(t){let e,n,l,s,i,a,f=t[0].user.display_name+"",o,c,p,d,h,v=t[0].user.followers.total+"",m,j,b,_,w,M,y,S,F,B=t[0].playlists.total+"",H,D,ee,O,V,Y,E,J,re=t[0].user.id+"",Fe,$e,G,ae,Q,te,ve,ge,ne,Z,K,U,$,A,bt,rt,it,Oe,ot,Ce,ce,at,yt;function kt(L,z){return L[0].user.images.length==2?dl:fl}let Ge=kt(t),ue=Ge(t);y=new ul({});let Le=Te(t[0].playlists.items),q=[];for(let L=0;L<Le.length;L+=1)q[L]=Pt(qt(t,Le,L));const nn=L=>R(q[L],1,1,()=>{q[L]=null});return Oe=new sl({}),Ce=new al({props:{hidden:!t[0].ui.settingsOpen}}),{c(){e=g("div"),n=g("div"),l=g("div"),ue.c(),s=k(),i=g("div"),a=g("p"),o=N(f),c=k(),p=g("div"),d=g("div"),h=g("p"),m=N(v),j=k(),b=I("svg"),_=I("path"),w=I("path"),M=k(),he(y.$$.fragment),S=k(),F=g("p"),H=N(B),D=N(" playlists"),ee=k(),O=g("div"),V=I("svg"),Y=I("path"),E=k(),J=g("span"),Fe=N(re),$e=k(),G=g("div"),ae=g("button"),Q=I("svg"),te=I("path"),ve=I("path"),ne=k(),Z=g("button"),Z.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"></path></svg>',K=k(),U=g("div"),$=g("div");for(let L=0;L<q.length;L+=1)q[L].c();bt=k(),rt=g("div"),it=k(),he(Oe.$$.fragment),ot=k(),he(Ce.$$.fragment),r(a,"class","font-semibold"),Xe(a,"text-shadow","4px 3px 8px rgba(0,0,0,1)"),r(_,"fill-rule","evenodd"),r(_,"d","M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z"),r(_,"clip-rule","evenodd"),r(w,"d","M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z"),r(b,"xmlns","http://www.w3.org/2000/svg"),r(b,"viewBox","0 0 24 24"),r(b,"fill","currentColor"),r(b,"class","w-[1em] inline"),r(d,"class","svg-icon"),r(p,"class","flex flex-row justify-center items-center space-x-2 text-xs text-gray-300"),r(Y,"d","M177.707 98.987c-35.992-21.375-95.36-23.34-129.719-12.912-5.519 1.674-11.353-1.44-13.024-6.958-1.672-5.521 1.439-11.352 6.96-13.029 39.443-11.972 105.008-9.66 146.443 14.936 4.964 2.947 6.59 9.356 3.649 14.31-2.944 4.963-9.359 6.6-14.31 3.653m-1.178 31.658c-2.525 4.098-7.883 5.383-11.975 2.867-30.005-18.444-75.762-23.788-111.262-13.012-4.603 1.39-9.466-1.204-10.864-5.8a8.717 8.717 0 015.805-10.856c40.553-12.307 90.968-6.347 125.432 14.833 4.092 2.52 5.38 7.88 2.864 11.968m-13.663 30.404a6.954 6.954 0 01-9.569 2.316c-26.22-16.025-59.223-19.644-98.09-10.766a6.955 6.955 0 01-8.331-5.232 6.95 6.95 0 015.233-8.334c42.533-9.722 79.017-5.538 108.448 12.446a6.96 6.96 0 012.31 9.57M111.656 0C49.992 0 0 49.99 0 111.656c0 61.672 49.992 111.66 111.657 111.66 61.668 0 111.659-49.988 111.659-111.66C223.316 49.991 173.326 0 111.657 0"),r(Y,"fill","#1DB954"),r(V,"xmlns","http://www.w3.org/2000/svg"),r(V,"class","w-[1em] inline"),r(V,"viewBox","-33.4974 -55.829 290.3108 334.974"),r(J,"class","text-ellipsis"),r(O,"class","text-xs select-text svg-icon text-gray-300"),r(i,"class","flex flex-col justify-center items-start"),r(l,"class","flex flex-row items-center justify-center space-x-2"),r(te,"stroke-linecap","round"),r(te,"stroke-linejoin","round"),r(te,"d","M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"),r(ve,"stroke-linecap","round"),r(ve,"stroke-linejoin","round"),r(ve,"d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"),r(Q,"xmlns","http://www.w3.org/2000/svg"),r(Q,"fill","none"),r(Q,"viewBox","0 0 24 24"),r(Q,"stroke-width","1.5"),r(Q,"stroke","currentColor"),r(Q,"class","w-[1em] inline"),r(ae,"class",ge="bg-gray-950 text-white svg-icon "+(t[0].ui.settingsOpen?"invert":"")),r(ae,"aria-label","settings"),r(Z,"class","bg-red-500 text-black svg-icon"),r(Z,"aria-label","logout"),r(G,"class","flex flex-row justify-center items-center space-x-1 px-1"),r(n,"class","flex flex-row justify-center items-center h-[13vh] space-x-5 bg-gradient-to-t from-gray-950/50 backdrop-blur-sm to-zinc-500 w-[90vw] rounded-t-md ring-1 ring-zinc-500 z-50"),r($,"class","flex flex-col justify-center items-center w-full space-y-2 pb-1"),r(U,"class","h-[70vh] overflow-y-scroll w-[100vw]"),r(rt,"class","backdrop-opacity-100 rounded-full backdrop-blur-sm w-[95vw] h-5 absolute bottom-0 left-auto right-auto"),r(e,"class","flex flex-col items-center -space-y-1")},m(L,z){C(L,e,z),u(e,n),u(n,l),ue.m(l,null),u(l,s),u(l,i),u(i,a),u(a,o),u(i,c),u(i,p),u(p,d),u(d,h),u(h,m),u(d,j),u(d,b),u(b,_),u(b,w),u(p,M),fe(y,p,null),u(p,S),u(p,F),u(F,H),u(F,D),u(i,ee),u(i,O),u(O,V),u(V,Y),u(O,E),u(O,J),u(J,Fe),u(n,$e),u(n,G),u(G,ae),u(ae,Q),u(Q,te),u(Q,ve),u(G,ne),u(G,Z),u(e,K),u(e,U),u(U,$);for(let je=0;je<q.length;je+=1)q[je]&&q[je].m($,null);u(e,bt),u(e,rt),C(L,it,z),fe(Oe,L,z),C(L,ot,z),fe(Ce,L,z),ce=!0,at||(yt=[W(ae,"click",t[2]),W(Z,"click",t[1])],at=!0)},p(L,[z]){if(Ge===(Ge=kt(L))&&ue?ue.p(L,z):(ue.d(1),ue=Ge(L),ue&&(ue.c(),ue.m(l,s))),(!ce||z&1)&&f!==(f=L[0].user.display_name+"")&&oe(o,f),(!ce||z&1)&&v!==(v=L[0].user.followers.total+"")&&oe(m,v),(!ce||z&1)&&B!==(B=L[0].playlists.total+"")&&oe(H,B),(!ce||z&1)&&re!==(re=L[0].user.id+"")&&oe(Fe,re),(!ce||z&1&&ge!==(ge="bg-gray-950 text-white svg-icon "+(L[0].ui.settingsOpen?"invert":"")))&&r(ae,"class",ge),z&1){Le=Te(L[0].playlists.items);let X;for(X=0;X<Le.length;X+=1){const xt=qt(L,Le,X);q[X]?(q[X].p(xt,z),P(q[X],1)):(q[X]=Pt(xt),q[X].c(),P(q[X],1),q[X].m($,null))}for(lt(),X=Le.length;X<q.length;X+=1)nn(X);st()}const je={};z&1&&(je.hidden=!L[0].ui.settingsOpen),Ce.$set(je)},i(L){if(!ce){P(y.$$.fragment,L);for(let z=0;z<Le.length;z+=1)P(q[z]);L&&ke(()=>{ce&&(A||(A=xe($,qe,{duration:1e3},!0)),A.run(1))}),P(Oe.$$.fragment,L),P(Ce.$$.fragment,L),ce=!0}},o(L){R(y.$$.fragment,L),q=q.filter(Boolean);for(let z=0;z<q.length;z+=1)R(q[z]);L&&(A||(A=xe($,qe,{duration:1e3},!1)),A.run(0)),R(Oe.$$.fragment,L),R(Ce.$$.fragment,L),ce=!1},d(L){L&&(x(e),x(it),x(ot)),ue.d(),de(y),wt(q,L),L&&A&&A.end(),de(Oe,L),de(Ce,L),at=!1,se(yt)}}}function gl(t,e,n){let l;return Ue(t,ze,a=>n(0,l=a)),[l,()=>{localStorage.removeItem("cartier-userid"),ie(ze,l.loggedIn=!1,l)},()=>{ie(ze,l.ui.settingsOpen=!l.ui.settingsOpen,l)}]}class ml extends _e{constructor(e){super(),we(this,e,gl,pl,pe,{})}}function hl(t){let e,n;return e=new ml({}),{c(){he(e.$$.fragment)},m(l,s){fe(e,l,s),n=!0},p:T,i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){de(e,l)}}}function wl(t){let e,n;return e=new Un({props:{handleUsername:t[1]}}),{c(){he(e.$$.fragment)},m(l,s){fe(e,l,s),n=!0},p:T,i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){de(e,l)}}}function _l(t){let e;return{c(){e=g("span"),e.textContent="prod",r(e,"class","rounded-sm p-0.5 bg-blue-600")},m(n,l){C(n,e,l)},d(n){n&&x(e)}}}function vl(t){let e,n,l,s,i,a,f,o,c,p,d,h,v,m,j,b,_,w,M,y,S,F,B;const H=[wl,hl],D=[];function ee(E,J){return E[0].loggedIn==!1?0:1}p=ee(t),d=D[p]=H[p](t);function O(E,J){return _l}let Y=O()(t);return{c(){e=g("div"),n=k(),l=g("main"),s=g("div"),s.innerHTML='<a href="https://github.com/reold" target="_blank" aria-label="goto reold&#39;s page" class="bg-aodPurple shadow-sm text-gray-950 shadow-gray-950 rounded-md p-2 ml-2 h-11/12 flex flex-col items-center justify-center"><svg class="h-[0.75em]" viewBox="0 0 146 28" xmlns="http://www.w3.org/2000/svg"><path d="M0.028144 14.6351C0.00946983 14.5455 0.00319455 14.4537 0.00949413 14.3623L0.935779 0.931198C0.971941 0.406861 1.40783 0 1.93341 0H27.6172C28.1215 0 28.5469 0.375536 28.6095 0.875965L29.8983 11.1865C29.9574 11.6595 29.6745 12.1085 29.2223 12.2592L26.8461 13.0513C25.7699 13.41 26.0279 15 27.1623 15H27.7891C28.2147 15 28.5937 15.2694 28.7336 15.6715L32.5 26.5L32.0196 1.51923C32.0088 0.959521 32.4596 0.5 33.0194 0.5H58.8672C59.4687 0.5 59.9341 1.02718 59.8595 1.62403L59.0947 7.7421C59.0388 8.18957 58.6903 8.54424 58.2439 8.60802L52.7135 9.39807C52.2874 9.45894 51.8702 9.24032 51.6777 8.85533L49.8879 5.27573C49.6653 4.83062 49.1493 4.61689 48.6772 4.77426L47.0077 5.33076C46.6905 5.43649 46.4472 5.69375 46.3592 6.01633L45.3445 9.73688C45.171 10.373 45.6499 11 46.3093 11H54.0723C54.7663 11 55.2493 11.6896 55.0121 12.3417L53.7538 15.8021C53.6031 16.2165 53.1988 16.4833 52.7585 16.4588L45.464 16.0536C44.9262 16.0237 44.4614 16.4251 44.4126 16.9615L44.1056 20.3387C44.0501 20.9492 44.552 21.4655 45.1638 21.4273L51.3857 21.0384C51.7624 21.0148 52.0938 20.7812 52.2425 20.4343L53.2161 18.1625C53.3856 17.7669 53.7893 17.5241 54.2183 17.5599L59.5 18L58.1458 25.6738C58.0615 26.1516 57.6463 26.5 57.161 26.5H32.5H19.3346C18.8513 26.5 18.4372 26.1544 18.3507 25.6789L17.5502 21.2759C17.5174 21.0954 17.4356 20.9275 17.3137 20.7904L15.2474 18.4658C14.6365 17.7786 13.5 18.2107 13.5 19.1302V25.5C13.5 26.0523 13.0523 26.5 12.5 26.5H3.31314C2.83946 26.5 2.43077 26.1677 2.33416 25.704L0.028144 14.6351Z" fill="url(#paint0_linear_2_5)"></path><path d="M59.5 18V11.3124C59.5 11.109 59.562 10.9104 59.6778 10.7432L63.8477 4.71999C63.9475 4.57586 64.0834 4.4605 64.2418 4.38546L73.2968 0.0962621C73.4306 0.0328787 73.5768 0 73.7249 0H84.4064C84.7723 0 85.109 0.199887 85.2843 0.521148L88 5.5L88.826 1.78307C88.9277 1.32553 89.3335 1 89.8022 1H101.839C102.45 1 102.918 1.54374 102.828 2.14834L100.149 20.0041C100.067 20.553 100.447 21.0639 100.997 21.1424L106.376 21.9109C106.757 21.9653 107.136 21.796 107.35 21.4756L109.67 17.9951C109.873 17.69 110.227 17.5207 110.593 17.5539L115.5 18V1.93112C115.5 1.40648 115.905 0.971039 116.429 0.93366L129.388 0.00801164C129.462 0.00268732 129.537 0.00573536 129.611 0.0170986L141.886 1.90548C142.262 1.96336 142.573 2.22978 142.687 2.59273L145.354 11.0381C145.446 11.3298 145.4 11.6477 145.228 11.9008L136.288 25.0761C136.107 25.3423 135.809 25.5053 135.488 25.5142L118.757 25.979C118.309 25.9914 117.908 25.7049 117.774 25.2776L115.5 18L113.689 25.2425C113.578 25.6877 113.178 26 112.719 26H89.905C89.3912 26 88.9611 25.6107 88.91 25.0995L88 16L81.673 23.7871C81.5598 23.9265 81.4111 24.0328 81.2426 24.0948L72.2892 27.3934C72.1008 27.4629 71.8958 27.474 71.701 27.4252L64.4018 25.6005C64.1445 25.5361 63.9233 25.3722 63.7869 25.1448L59.5 18Z" fill="url(#paint1_linear_2_5)"></path><defs><linearGradient id="paint0_linear_2_5" x1="72.75" y1="0" x2="72.75" y2="27.5" gradientUnits="userSpaceOnUse"><stop></stop><stop offset="1" stop-opacity="0.5"></stop></linearGradient><linearGradient id="paint1_linear_2_5" x1="72.75" y1="0" x2="72.75" y2="27.5" gradientUnits="userSpaceOnUse"><stop></stop><stop offset="1" stop-opacity="0.5"></stop></linearGradient></defs></svg></a> <p class="text-3xl">Cartier Manager</p>',i=k(),a=g("div"),f=g("div"),c=k(),d.c(),h=k(),v=g("div"),m=g("p"),Y.c(),j=N(`
      built by
      `),b=g("a"),b.textContent="reold",_=N(`.
      `),w=g("button"),w.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"></path></svg>
        use render`,M=k(),y=g("a"),y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg> <span>report issue</span>',r(e,"class","bg-black opacity-75 p-1 rounded-md w-[80vw] max-w-[90vw] z-[1000]"),Xe(e,"display","none"),r(s,"class","flex flex-row items-center justify-evenly font-bold h-[10vh] bg-gray-950 ring-1 ring-zinc-500 shadow-xl"),r(f,"class","absolute left-0 top-0 w-full flex flex-col items-center justify-center space-y-1 text-xs"),r(a,"class","flex flex-col space-y-1 items-center relative h-[85vh] bg-gradient-to-t from-gray-950 via-[#203A43] to-gray-950"),r(b,"href","https://github.com/reold"),r(b,"target","_blank"),r(b,"class","text-blue-600"),r(w,"aria-label","use alternative render service servers"),r(w,"class","p-0 bg-transparent text-orange-600 text-xs disabled:animate-pulse"),r(y,"href","https://github.com/reold/cartier/issues/new"),r(y,"target","_blank"),r(y,"class","text-blue-600"),r(v,"class","w-full h-[5vh] bg-gray-950 text-xs flex flex-col items-center justify-center"),r(l,"class","w-screen h-screen text-white text-xl select-none text-center")},m(E,J){C(E,e,J),t[2](e),C(E,n,J),C(E,l,J),u(l,s),u(l,i),u(l,a),u(a,f),t[3](f),u(a,c),D[p].m(a,null),u(l,h),u(l,v),u(v,m),Y.m(m,null),u(m,j),u(m,b),u(m,_),u(m,w),u(m,M),u(m,y),S=!0,F||(B=W(w,"click",t[4]),F=!0)},p(E,[J]){let re=p;p=ee(E),p===re?D[p].p(E,J):(lt(),R(D[re],1,1,()=>{D[re]=null}),st(),d=D[p],d?d.p(E,J):(d=D[p]=H[p](E),d.c()),P(d,1),d.m(a,null))},i(E){S||(E&&ke(()=>{S&&(o||(o=xe(f,qe,{duration:1e4},!0)),o.run(1))}),P(d),S=!0)},o(E){E&&(o||(o=xe(f,qe,{duration:1e4},!1)),o.run(0)),R(d),S=!1},d(E){E&&(x(e),x(n),x(l)),t[2](null),t[3](null),E&&o&&o.end(),D[p].d(),Y.d(),F=!1,B()}}}let Qe,tn;const le=(t,e=!1,n=3,l)=>{const s=tn.cloneNode(!0);s.innerHTML=e?`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.2em] animate-spin inline aspect-square mr-1" > <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" /> </svg>${t}`:t,s.style.display="block",Qe.appendChild(s),l?l(()=>{Qe.removeChild(s)}):setTimeout(()=>{Qe.removeChild(s)},n*1e3)};function bl(t,e,n){let l;Ue(t,ze,o=>n(0,l=o));const s=(o,c)=>{ye.getUserInfo(o).then(p=>{if(p.success==!1){le("something went wrong!");return}ie(ze,l={...l,...p.data},l),ie(ze,l.loggedIn=!0,l),c&&c()})};vt(async()=>{await We.initialize()});function i(o){nt[o?"unshift":"push"](()=>{tn=o})}function a(o){nt[o?"unshift":"push"](()=>{Qe=o})}return[l,s,i,a,async({target:o})=>{window["cartier-server-url"]="https://cartier-backend.onrender.com",o&&(o.disabled=!0,o.innerText="using render"),le("switching & waking alternate (render)server",!0,5,async c=>{await ye.getRoot(),c(),le("(render)server running")})}]}class yl extends _e{constructor(e){super(),we(this,e,bl,vl,pe,{})}}new yl({target:document.getElementById("app")});
