var ct=Object.defineProperty;var at=(t,e,n)=>e in t?ct(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ee=(t,e,n)=>(at(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function T(){}const ut=t=>t;function Oe(t,e){for(const n in e)t[n]=e[n];return t}function Qe(t){return t()}function qe(){return Object.create(null)}function re(t){t.forEach(Qe)}function Xe(t){return typeof t=="function"}function se(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let je;function he(t,e){return t===e?!0:(je||(je=document.createElement("a")),je.href=e,t===je.href)}function ft(t){return Object.keys(t).length===0}function dt(t,...e){if(t==null){for(const l of e)l(void 0);return T}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ae(t,e,n){t.$$.on_destroy.push(dt(e,n))}function pt(t,e,n,l){if(t){const r=Ye(t,e,n,l);return t[0](r)}}function Ye(t,e,n,l){return t[1]&&l?Oe(n.ctx.slice(),t[1](l(e))):n.ctx}function ht(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],c=Math.max(e.dirty.length,r.length);for(let u=0;u<c;u+=1)s[u]=e.dirty[u]|r[u];return s}return e.dirty|r}return e.dirty}function mt(t,e,n,l,r,s){if(r){const c=Ye(e,n,l,s);t.p(c,r)}}function gt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function J(t,e,n){return t.set(n),e}const Ze=typeof window<"u";let _t=Ze?()=>window.performance.now():()=>Date.now(),et=Ze?t=>requestAnimationFrame(t):T;const de=new Set;function tt(t){de.forEach(e=>{e.c(t)||(de.delete(e),e.f())}),de.size!==0&&et(tt)}function wt(t){let e;return de.size===0&&et(tt),{promise:new Promise(n=>{de.add(e={c:t,f:n})}),abort(){de.delete(e)}}}function a(t,e){t.appendChild(e)}function j(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function nt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function F(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function S(t){return document.createTextNode(t)}function C(){return S(" ")}function bt(){return S("")}function Y(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function i(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function vt(t){return Array.from(t.childNodes)}function Z(t,e){e=""+e,t.data!==e&&(t.data=e)}function Te(t,e){t.value=e??""}function me(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function De(t,e,n){t.classList.toggle(e,!!n)}let xe;function ke(t){xe=t}function kt(){if(!xe)throw new Error("Function called outside component initialization");return xe}function lt(t){kt().$$.on_mount.push(t)}const ue=[],Me=[];let pe=[];const Ne=[],yt=Promise.resolve();let Pe=!1;function xt(){Pe||(Pe=!0,yt.then(rt))}function Ue(t){pe.push(t)}const Ie=new Set;let ce=0;function rt(){if(ce!==0)return;const t=xe;do{try{for(;ce<ue.length;){const e=ue[ce];ce++,ke(e),$t(e.$$)}}catch(e){throw ue.length=0,ce=0,e}for(ke(null),ue.length=0,ce=0;Me.length;)Me.pop()();for(let e=0;e<pe.length;e+=1){const n=pe[e];Ie.has(n)||(Ie.add(n),n())}pe.length=0}while(ue.length);for(;Ne.length;)Ne.pop()();Pe=!1,Ie.clear(),ke(t)}function $t(t){if(t.fragment!==null){t.update(),re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ue)}}function jt(t){const e=[],n=[];pe.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),pe=e}const Ce=new Set;let le;function st(){le={r:0,c:[],p:le}}function it(){le.r||re(le.c),le=le.p}function K(t,e){t&&t.i&&(Ce.delete(t),t.i(e))}function Q(t,e,n,l){if(t&&t.o){if(Ce.has(t))return;Ce.add(t),le.c.push(()=>{Ce.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Le(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function $e(t){t&&t.c()}function ge(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),Ue(()=>{const s=t.$$.on_mount.map(Qe).filter(Xe);t.$$.on_destroy?t.$$.on_destroy.push(...s):re(s),t.$$.on_mount=[]}),r.forEach(Ue)}function _e(t,e){const n=t.$$;n.fragment!==null&&(jt(n.after_update),re(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ct(t,e){t.$$.dirty[0]===-1&&(ue.push(t),xt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function we(t,e,n,l,r,s,c=null,u=[-1]){const d=xe;ke(t);const o=t.$$={fragment:null,ctx:[],props:s,update:T,not_equal:r,bound:qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:qe(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};c&&c(o.root);let f=!1;if(o.ctx=n?n(t,e.props||{},(h,m,...w)=>{const _=w.length?w[0]:m;return o.ctx&&r(o.ctx[h],o.ctx[h]=_)&&(!o.skip_bound&&o.bound[h]&&o.bound[h](_),f&&Ct(t,h)),m}):[],o.update(),f=!0,re(o.before_update),o.fragment=l?l(o.ctx):!1,e.target){if(e.hydrate){const h=vt(e.target);o.fragment&&o.fragment.l(h),h.forEach(x)}else o.fragment&&o.fragment.c();e.intro&&K(t.$$.fragment),ge(t,e.target,e.anchor),rt()}ke(d)}class be{constructor(){Ee(this,"$$");Ee(this,"$$set")}$destroy(){_e(this,1),this.$destroy=T}$on(e,n){if(!Xe(n))return T;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!ft(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Mt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Mt);let ne;ne="https://reold-cartier.glitch.me";const fe={getRoot:async()=>await(await fetch(`${ne}/`)).json(),getUserInfo:async t=>await(await fetch(`${ne}/user?username=${t}`)).json(),getPlaylistInfo:async t=>await(await fetch(`${ne}/playlist?id=${t}`)).json(),getDownloadPlaylist:async t=>await(await fetch(`${ne}/download?link=${t}`)).json(),getDownloadTrack:async(t,e="",n=!1)=>await(await fetch(`${ne}/track?link=${t}&unique_code=${e}&create=${n}`)).json(),getStreamPlaylist:async t=>{let e=await fetch(`${ne}/stream?unique_code=${t}`);return[await e.ok,await e.blob()]}},ae=[];function Be(t,e=T){let n;const l=new Set;function r(u){if(se(t,u)&&(t=u,n)){const d=!ae.length;for(const o of l)o[1](),ae.push(o,t);if(d){for(let o=0;o<ae.length;o+=2)ae[o][0](ae[o+1]);ae.length=0}}}function s(u){r(u(t))}function c(u,d=T){const o=[u,d];return l.add(o),l.size===1&&(n=e(r,s)||T),u(t),()=>{l.delete(o),l.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:c}}function Lt(t){let e,n,l;const r=t[2].default,s=pt(r,t,t[1],null);return{c(){e=p("div"),n=p("div"),s&&s.c(),i(n,"class","bg-gray-950 p-2 rounded-md ring-1 ring-zinc-500 max-w-[90vw]"),i(e,"class","absolute top-0 left-0 w-full h-full backdrop-blur-md flex flex-col items-center justify-center text-center text-xs"),me(e,"visibility",t[0]?"hidden":"visible")},m(c,u){j(c,e,u),a(e,n),s&&s.m(n,null),l=!0},p(c,[u]){s&&s.p&&(!l||u&2)&&mt(s,r,c,c[1],l?ht(r,c[1],u,null):gt(c[1]),null),(!l||u&1)&&me(e,"visibility",c[0]?"hidden":"visible")},i(c){l||(K(s,c),l=!0)},o(c){Q(s,c),l=!1},d(c){c&&x(e),s&&s.d(c)}}}function At(t,e,n){let{$$slots:l={},$$scope:r}=e,{hidden:s=!1}=e;return t.$$set=c=>{"hidden"in c&&n(0,s=c.hidden),"$$scope"in c&&n(1,r=c.$$scope)},[s,r,l]}class Et extends be{constructor(e){super(),we(this,e,At,Lt,se,{hidden:0})}}function He(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","aspect-square w-[1.2em] animate-spin inline")},m(l,r){j(l,e,r),a(e,n)},d(l){l&&x(e)}}}function It(t){let e,n,l,r,s,c,u=t[0].step+"",d,o=t[0].is&&He();return{c(){e=p("h1"),e.textContent="Waking up servers!",n=C(),l=p("p"),l.textContent=`Our servers take a little break every 5 minutes when things quiet down.
    We're in the process of waking them up for you. It's automatic, so no need
    to stress!`,r=C(),s=p("p"),o&&o.c(),c=C(),d=S(u),i(e,"class","text-xl"),i(l,"class","text-xs text-gray-500 inline"),i(s,"class","inline"),De(s,"text-green-500",!t[0].is)},m(f,h){j(f,e,h),j(f,n,h),j(f,l,h),j(f,r,h),j(f,s,h),o&&o.m(s,null),a(s,c),a(s,d)},p(f,h){f[0].is?o||(o=He(),o.c(),o.m(s,c)):o&&(o.d(1),o=null),h&1&&u!==(u=f[0].step+"")&&Z(d,u),h&1&&De(s,"text-green-500",!f[0].is)},d(f){f&&(x(e),x(n),x(l),x(r),x(s)),o&&o.d()}}}function Ot(t){let e,n;return e=new Et({props:{hidden:!t[0].is,$$slots:{default:[It]},$$scope:{ctx:t}}}),{c(){$e(e.$$.fragment)},m(l,r){ge(e,l,r),n=!0},p(l,[r]){const s={};r&1&&(s.hidden=!l[0].is),r&5&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function Pt(t,e,n){let l;const r=Be({step:"trying to make contact",is:!0});return Ae(t,r,s=>n(0,l=s)),lt(()=>{J(r,l.step="waking up servers",l),fe.getRoot().then(s=>{J(r,l.is=!1,l),J(r,l.step="servers are running!",l)}).catch(s=>{X(`unable to reach servers. err: ${s}`),J(r,l.step="servers unreachable (reload?)",l)})}),[l,r]}class Ut extends be{constructor(e){super(),we(this,e,Pt,Ot,se,{})}}function St(t){let e,n,l,r,s,c,u,d,o,f,h,m,w,_,b,M,y,L,z,I,P,q,W;return e=new Ut({}),{c(){$e(e.$$.fragment),n=C(),l=p("div"),r=p("p"),r.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path></svg>
    fill-in to continue`,s=C(),c=p("div"),u=p("div"),d=p("input"),o=C(),f=p("button"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline rounded-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg>',h=C(),m=p("p"),m.textContent="copy your profile link from your spotify account page",w=C(),_=p("div"),b=p("label"),M=p("input"),y=C(),L=p("span"),L.textContent="persist",z=C(),I=p("button"),I.textContent="continue",i(r,"class","text-2xl"),i(d,"type","text"),i(d,"class","w-full"),i(d,"placeholder","spotify profile link"),i(f,"class","bg-zinc-500"),i(u,"class","w-full flex flex-row items-center justify-center space-x-2"),i(m,"class","text-sm"),i(c,"class","flex flex-col items-center justify-center"),i(M,"type","checkbox"),i(M,"class","inline"),i(L,"class","align-middle"),i(b,"for","persisting userid"),i(b,"class","text-base flex flex-row space-x-2 bg-gray-950 p-3 rounded-md"),i(I,"class","hover:scale-110"),i(_,"class","flex flex-row items-center justify-center space-x-3"),i(l,"class","flex flex-col items-center text-center justify-center bg-aodFg ring-1 ring-zinc-500 rounded-md w-11/12 py-5 space-y-7 px-5")},m($,k){ge(e,$,k),j($,n,k),j($,l,k),a(l,r),a(l,s),a(l,c),a(c,u),a(u,d),Te(d,t[0]),a(u,o),a(u,f),a(c,h),a(c,m),a(l,w),a(l,_),a(_,b),a(b,M),M.checked=t[1],a(b,y),a(b,L),a(_,z),a(_,I),P=!0,q||(W=[Y(d,"input",t[5]),Y(f,"click",t[2]),Y(M,"change",t[6]),Y(I,"click",t[3])],q=!0)},p($,[k]){k&1&&d.value!==$[0]&&Te(d,$[0]),k&2&&(M.checked=$[1])},i($){P||(K(e.$$.fragment,$),P=!0)},o($){Q(e.$$.fragment,$),P=!1},d($){$&&(x(n),x(l)),_e(e,$),q=!1,re(W)}}}function zt(t,e,n){lt(()=>{const f=localStorage.getItem("cartier-userid");f&&(X("performing auto-login",!0),l(f))});let{handleUsername:l}=e,r="",s=!0;const c=async()=>{navigator.clipboard.readText&&n(0,r=await navigator.clipboard.readText())},u=()=>{let f;try{f=new URL(r)}catch{n(0,r="");return}const h=f.pathname.split("/")[2];s&&(localStorage.setItem("cartier-userid",h),X("login information saved!")),l(h)};function d(){r=this.value,n(0,r)}function o(){s=this.checked,n(1,s)}return t.$$set=f=>{"handleUsername"in f&&n(4,l=f.handleUsername)},[r,s,c,u,l,d,o]}class Bt extends be{constructor(e){super(),we(this,e,zt,St,se,{handleUsername:4})}}function Re(t){return Object.prototype.toString.call(t)==="[object Date]"}function qt(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Se(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((r,s)=>Se(t[s],r));return r=>l.map(s=>s(r))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Re(t)&&Re(e)){t=t.getTime(),e=e.getTime();const s=e-t;return c=>new Date(t+c*s)}const l=Object.keys(e),r={};return l.forEach(s=>{r[s]=Se(t[s],e[s])}),s=>{const c={};return l.forEach(u=>{c[u]=r[u](s)}),c}}if(n==="number"){const l=e-t;return r=>t+r*l}throw new Error(`Cannot interpolate ${n} values`)}function Tt(t,e={}){const n=Be(t);let l,r=t;function s(c,u){if(t==null)return n.set(t=c),Promise.resolve();r=c;let d=l,o=!1,{delay:f=0,duration:h=400,easing:m=ut,interpolate:w=Se}=Oe(Oe({},e),u);if(h===0)return d&&(d.abort(),d=null),n.set(t=r),Promise.resolve();const _=_t()+f;let b;return l=wt(M=>{if(M<_)return!0;o||(b=w(t,c),typeof h=="function"&&(h=h(t,c)),o=!0),d&&(d.abort(),d=null);const y=M-_;return y>h?(n.set(t=c),!1):(n.set(t=b(m(y/h))),!0)}),l.promise}return{set:s,update:(c,u)=>s(c(r,t),u),subscribe:n.subscribe}}function Ve(t,e,n){const l=t.slice();return l[0]=e[n],l}function Dt(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-[10vh] h-[10vh]")},m(l,r){j(l,e,r),a(e,n)},p:T,d(l){l&&x(e)}}}function Nt(t){let e,n;return{c(){e=p("img"),i(e,"loading","lazy"),he(e.src,n=t[0].images[0].url)||i(e,"src",n),i(e,"class","rounded-full max-h-[10vh] shadow-black shadow-lg ring-1 ring-black"),i(e,"alt","playlist's cover")},m(l,r){j(l,e,r)},p(l,r){r&1&&!he(e.src,n=l[0].images[0].url)&&i(e,"src",n)},d(l){l&&x(e)}}}function Ht(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","4"),i(e,"stroke","currentColor"),i(e,"class","w-[1.2em] text-xs aspect-square")},m(l,r){j(l,e,r),a(e,n)},d(l){l&&x(e)}}}function Rt(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","m4.5 15.75 7.5-7.5 7.5 7.5"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","3"),i(e,"stroke","currentColor"),i(e,"class","w-[1.2em] aspect-square text-xs")},m(l,r){j(l,e,r),a(e,n)},d(l){l&&x(e)}}}function Vt(t){let e;return{c(){e=S("download")},m(n,l){j(n,e,l)},d(n){n&&x(e)}}}function Ft(t){let e;return{c(){e=S("downloaded")},m(n,l){j(n,e,l)},d(n){n&&x(e)}}}function Wt(t){let e,n,l;return{c(){e=F("svg"),n=F("path"),l=S(`
            downloading`),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-4 h-4 inline animate-spin")},m(r,s){j(r,e,s),a(e,n),j(r,l,s)},d(r){r&&(x(e),x(l))}}}function Fe(t){let e,n,l;return{c(){e=p("button"),e.textContent="save",i(e,"class","text-xs p-1")},m(r,s){j(r,e,s),n||(l=Y(e,"click",t[8]),n=!0)},p:T,d(r){r&&x(e),n=!1,l()}}}function We(t){let e,n,l,r=t[1].tracks.total+"",s,c,u,d=Le(t[1].tracks.items),o=[];for(let f=0;f<d.length;f+=1)o[f]=Ke(Ve(t,d,f));return{c(){e=p("div"),n=p("div"),l=p("div"),s=S(r),c=S(" tracks"),u=C();for(let f=0;f<o.length;f+=1)o[f].c();i(l,"class","bg-zinc-950 rounded-full text-white p-2"),i(n,"class","overflow-hidden overflow-x-scroll flex flex-row items-center space-x-2 p-1 relative"),i(e,"class","col-span-4 bg-zinc-500/10 rounded-md mx-2 text-xs flex flex-row justify-center")},m(f,h){j(f,e,h),a(e,n),a(n,l),a(l,s),a(l,c),a(n,u);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(n,null)},p(f,h){if(h&2&&r!==(r=f[1].tracks.total+"")&&Z(s,r),h&10){d=Le(f[1].tracks.items);let m;for(m=0;m<d.length;m+=1){const w=Ve(f,d,m);o[m]?o[m].p(w,h):(o[m]=Ke(w),o[m].c(),o[m].m(n,null))}for(;m<o.length;m+=1)o[m].d(1);o.length=d.length}},d(f){f&&x(e),nt(o,f)}}}function Kt(t){let e;return{c(){e=p("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[5vh] h-[5vh]"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"></path></svg> ',i(e,"class","ring-1 ring-black shadow-md shadow-black rounded-full")},m(n,l){j(n,e,l)},p:T,d(n){n&&x(e)}}}function Gt(t){let e,n,l;return{c(){e=p("img"),i(e,"loading","lazy"),he(e.src,n=t[0].track.album.images[0].url)||i(e,"src",n),i(e,"class",l="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-md shadow-black "+(t[0].track.id==t[3].id&&t[3].is?"animate-spin":"")),i(e,"alt","album")},m(r,s){j(r,e,s)},p(r,s){s&2&&!he(e.src,n=r[0].track.album.images[0].url)&&i(e,"src",n),s&10&&l!==(l="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-md shadow-black "+(r[0].track.id==r[3].id&&r[3].is?"animate-spin":""))&&i(e,"class",l)},d(r){r&&x(e)}}}function Ke(t){let e;function n(s,c){return s[0].track?Gt:Kt}let l=n(t),r=l(t);return{c(){r.c(),e=bt()},m(s,c){r.m(s,c),j(s,e,c)},p(s,c){l===(l=n(s))&&r?r.p(s,c):(r.d(1),r=l(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&x(e),r.d(s)}}}function Jt(t){let e,n,l,r,s,c,u,d,o,f=t[0].name+"",h,m,w,_,b,M,y,L=t[0].description+"",z,I,P,q,W,$,k,B,D,ee=t[4]&&Object.keys(t[1]).length>0,ie,ve;function te(v,H){return v[0].images.length>0?Nt:Dt}let N=te(t),U=N(t);function A(v,H){return v[4]?Rt:Ht}let oe=A(t),g=oe(t);function O(v,H){return v[3].is?Wt:v[2].length>0?Ft:Vt}let E=O(t),G=E(t),R=t[2].length>0&&!t[3].is&&Fe(t),V=ee&&We(t);return{c(){e=p("div"),n=p("div"),r=C(),s=p("div"),c=p("div"),U.c(),u=C(),d=p("div"),o=p("a"),h=S(f),m=C(),w=F("svg"),_=F("path"),M=C(),y=p("p"),z=S(L),I=C(),P=p("div"),q=p("button"),g.c(),W=C(),$=p("button"),G.c(),B=C(),R&&R.c(),D=C(),V&&V.c(),i(n,"class","h-full absolute backdrop-invert brightness-50 left-0 top-0 rounded-md"),me(n,"width",t[5]/100*90+"vw"),n.hidden=l=!t[3].is,i(c,"class","col-span-1 flex flex-col items-center justify-center"),i(_,"stroke-linecap","round"),i(_,"stroke-linejoin","round"),i(_,"d","M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"),i(w,"xmlns","http://www.w3.org/2000/svg"),i(w,"fill","none"),i(w,"viewBox","0 0 24 24"),i(w,"stroke-width","1.5"),i(w,"stroke","currentColor"),i(w,"class","w-4 h-4 inline"),i(o,"class","hover:scale-110 duration-75 text-left line-clamp-1"),i(o,"href",b=t[0].external_urls.spotify),i(o,"target","_blank"),i(y,"class","text-xs line-clamp-1"),i(q,"class","bg-transparent text-white ring-1 p-1 ring-zinc-500"),i($,"class","text-xs bg-aodPurple p-1"),$.disabled=k=t[3].is||t[2].length>0,i(P,"class","flex flex-row space-x-2"),i(d,"class","col-span-3 flex flex-col justify-center items-start"),i(s,"class","grid grid-cols-4 w-full gap-1"),i(e,"class","bg-gray-950 ring-1 ring-zinc-500 py-2 rounded-md w-[90vw] text-center relative transition-all duration-150")},m(v,H){j(v,e,H),a(e,n),a(e,r),a(e,s),a(s,c),U.m(c,null),a(s,u),a(s,d),a(d,o),a(o,h),a(o,m),a(o,w),a(w,_),a(d,M),a(d,y),a(y,z),a(d,I),a(d,P),a(P,q),g.m(q,null),a(P,W),a(P,$),G.m($,null),a(P,B),R&&R.m(P,null),a(s,D),V&&V.m(s,null),ie||(ve=[Y(q,"click",t[7]),Y($,"click",t[9])],ie=!0)},p(v,[H]){H&32&&me(n,"width",v[5]/100*90+"vw"),H&8&&l!==(l=!v[3].is)&&(n.hidden=l),N===(N=te(v))&&U?U.p(v,H):(U.d(1),U=N(v),U&&(U.c(),U.m(c,null))),H&1&&f!==(f=v[0].name+"")&&Z(h,f),H&1&&b!==(b=v[0].external_urls.spotify)&&i(o,"href",b),H&1&&L!==(L=v[0].description+"")&&Z(z,L),oe!==(oe=A(v))&&(g.d(1),g=oe(v),g&&(g.c(),g.m(q,null))),E!==(E=O(v))&&(G.d(1),G=E(v),G&&(G.c(),G.m($,null))),H&12&&k!==(k=v[3].is||v[2].length>0)&&($.disabled=k),v[2].length>0&&!v[3].is?R?R.p(v,H):(R=Fe(v),R.c(),R.m(P,null)):R&&(R.d(1),R=null),H&18&&(ee=v[4]&&Object.keys(v[1]).length>0),ee?V?V.p(v,H):(V=We(v),V.c(),V.m(s,null)):V&&(V.d(1),V=null)},i:T,o:T,d(v){v&&x(e),U.d(),g.d(),G.d(),R&&R.d(),V&&V.d(),ie=!1,re(ve)}}}function Qt(t,e,n){let l,r={},s=[],{track:c}=e;const u={is:!1,id:""};let d=!1,o=Tt(0,{duration:1e3,easing:qt});Ae(t,o,_=>n(5,l=_));const f=()=>{d==!1?(Object.keys(r).length==0&&h(),n(4,d=!0)):n(4,d=!1)},h=async()=>{const _=c.external_urls.spotify,M=new URL(_).pathname.split("/")[2];X("loading playlist info",!0,1);let y=await fe.getPlaylistInfo(M);n(1,r=y)},m=()=>{s.forEach((_,b)=>{const M=URL.createObjectURL(_),y=document.createElement("a");y.href=M,y.download=`${c.name}-${b+1}.mp3`,y.click()})},w=async()=>{if(Object.keys(r).length==0&&await h(),!r.tracks)return;if(r.tracks.items.length==0){X("nothing to download");return}n(3,u.is=!0,u),o.set(0,{duration:100}),o.set(100,{duration:1e4});let _=r.tracks.items[0].track;fe.getDownloadTrack(_.external_urls.spotify,"",!0).then(async b=>{if(b.success==!1){J(o,l=0,l),n(3,u.is=!1,u),X(`serverErr: ${b.info}`);return}J(o,l=1/r.tracks.total*100,l);const M=b.data.unique_code;for(const[y,{track:L}]of r.tracks.items.splice(1).entries())L&&n(3,u.id=L.id,u),(await fe.getDownloadTrack(L.external_urls.spotify,M,!1)).success==!1&&X(`failed downloading track (${L.name})`),J(o,l=(y+2)/r.tracks.total*100,l);await o.set(100),await o.set(0,{delay:500}),o.set(100,{duration:1e4});for(let y=0;y<r.tracks.total;y++){let[L,z]=await fe.getStreamPlaylist(M);if(!L){X(`failed streaming track (${c.name})`);continue}n(2,s=[...s,z])}n(3,u.is=!1,u)})};return t.$$set=_=>{"track"in _&&n(0,c=_.track)},[c,r,s,u,d,l,o,f,m,w]}class Xt extends be{constructor(e){super(),we(this,e,Qt,Jt,se,{track:0})}}const ye=Be({loggedIn:!1,user:{},playlists:{}});function Ge(t,e,n){const l=t.slice();return l[2]=e[n],l}function Yt(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-[10vh] h-[10vh] rounded-full ring-aodBg ring-2")},m(l,r){j(l,e,r),a(e,n)},p:T,d(l){l&&x(e)}}}function Zt(t){let e,n,l;return{c(){e=p("img"),i(e,"loading","lazy"),he(e.src,n=t[0].user.images[1].url)||i(e,"src",n),i(e,"alt",l=`${t[0].user.display_name}'s profile picture`),i(e,"class","rounded-full h-[10vh] ring-aodBg ring-2 shadow-md shadow-black")},m(r,s){j(r,e,s)},p(r,s){s&1&&!he(e.src,n=r[0].user.images[1].url)&&i(e,"src",n),s&1&&l!==(l=`${r[0].user.display_name}'s profile picture`)&&i(e,"alt",l)},d(r){r&&x(e)}}}function Je(t){let e,n;return e=new Xt({props:{track:t[2]}}),{c(){$e(e.$$.fragment)},m(l,r){ge(e,l,r),n=!0},p(l,r){const s={};r&1&&(s.track=l[2]),e.$set(s)},i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function en(t){let e,n,l,r,s,c,u=t[0].user.display_name+"",d,o,f,h=t[0].user.followers.total+"",m,w,_=t[0].playlists.total+"",b,M,y,L,z=t[0].user.id+"",I,P,q,W,$,k,B,D,ee,ie;function ve(g,O){return g[0].user.images.length==2?Zt:Yt}let te=ve(t),N=te(t),U=Le(t[0].playlists.items),A=[];for(let g=0;g<U.length;g+=1)A[g]=Je(Ge(t,U,g));const oe=g=>Q(A[g],1,1,()=>{A[g]=null});return{c(){e=p("div"),n=p("div"),l=p("div"),N.c(),r=C(),s=p("div"),c=p("p"),d=S(u),o=C(),f=p("p"),m=S(h),w=S(" followers, "),b=S(_),M=S(" playlists"),y=C(),L=p("p"),I=S(z),P=C(),q=p("div"),W=p("button"),W.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.5em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"></path></svg>logout',$=C(),k=p("div"),B=p("div");for(let g=0;g<A.length;g+=1)A[g].c();i(c,"class","font-semibold"),me(c,"text-shadow","4px 3px 8px rgba(0,0,0,1)"),i(f,"class","text-xs"),i(L,"class","text-xs"),i(s,"class","flex flex-col justify-center items-start"),i(l,"class","flex flex-row items-center justify-center space-x-5"),i(W,"class","text-sm p-0.5 bg-red-500 text-white"),i(n,"class","flex flex-row justify-center items-center h-[13vh] space-x-4 bg-gradient-to-t from-gray-950 via-zinc-500 to-zinc-500 w-[90vw] rounded-t-xl ring-1 ring-zinc-500"),i(B,"class","flex flex-col justify-center items-center w-full space-y-2 pb-1"),i(k,"class","h-[67vh] overflow-y-scroll w-[100vw]"),i(e,"class","flex flex-col items-center -space-y-1")},m(g,O){j(g,e,O),a(e,n),a(n,l),N.m(l,null),a(l,r),a(l,s),a(s,c),a(c,d),a(s,o),a(s,f),a(f,m),a(f,w),a(f,b),a(f,M),a(s,y),a(s,L),a(L,I),a(n,P),a(n,q),a(q,W),a(e,$),a(e,k),a(k,B);for(let E=0;E<A.length;E+=1)A[E]&&A[E].m(B,null);D=!0,ee||(ie=Y(W,"click",t[1]),ee=!0)},p(g,[O]){if(te===(te=ve(g))&&N?N.p(g,O):(N.d(1),N=te(g),N&&(N.c(),N.m(l,r))),(!D||O&1)&&u!==(u=g[0].user.display_name+"")&&Z(d,u),(!D||O&1)&&h!==(h=g[0].user.followers.total+"")&&Z(m,h),(!D||O&1)&&_!==(_=g[0].playlists.total+"")&&Z(b,_),(!D||O&1)&&z!==(z=g[0].user.id+"")&&Z(I,z),O&1){U=Le(g[0].playlists.items);let E;for(E=0;E<U.length;E+=1){const G=Ge(g,U,E);A[E]?(A[E].p(G,O),K(A[E],1)):(A[E]=Je(G),A[E].c(),K(A[E],1),A[E].m(B,null))}for(st(),E=U.length;E<A.length;E+=1)oe(E);it()}},i(g){if(!D){for(let O=0;O<U.length;O+=1)K(A[O]);D=!0}},o(g){A=A.filter(Boolean);for(let O=0;O<A.length;O+=1)Q(A[O]);D=!1},d(g){g&&x(e),N.d(),nt(A,g),ee=!1,ie()}}}function tn(t,e,n){let l;return Ae(t,ye,s=>n(0,l=s)),[l,()=>{localStorage.removeItem("cartier-userid"),J(ye,l.loggedIn=!1,l)}]}class nn extends be{constructor(e){super(),we(this,e,tn,en,se,{})}}function ln(t){let e,n;return e=new nn({}),{c(){$e(e.$$.fragment)},m(l,r){ge(e,l,r),n=!0},p:T,i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function rn(t){let e,n;return e=new Bt({props:{handleUsername:t[1]}}),{c(){$e(e.$$.fragment)},m(l,r){ge(e,l,r),n=!0},p:T,i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function sn(t){let e;return{c(){e=p("span"),e.textContent="PROD",i(e,"class","rounded-sm p-0.5 bg-blue-600")},m(n,l){j(n,e,l)},d(n){n&&x(e)}}}function on(t){let e,n,l,r,s,c,u,d,o,f,h,m,w,_,b,M,y,L;const z=[rn,ln],I=[];function P(k,B){return k[0].loggedIn==!1?0:1}o=P(t),f=I[o]=z[o](t);function q(k,B){return sn}let $=q()(t);return{c(){e=p("div"),n=C(),l=p("main"),r=p("div"),r.innerHTML='<div class="bg-aodPurple shadow-sm shadow-gray-950 rounded-b-md p-2 ml-2 h-full flex flex-col items-center justify-center"><span>reold&#39;s</span></div> <p class="text-3xl">Cartier Manager</p>',s=C(),c=p("div"),u=p("div"),d=C(),f.c(),h=C(),m=p("div"),w=p("p"),$.c(),_=S(`
      Built with ❤️ by
      `),b=p("a"),b.textContent="reold",M=S(`.
      `),y=p("a"),y.textContent="Report an error",i(e,"class","bg-black opacity-75 p-1 rounded-md w-[80vw] max-w-[90vw] z-50"),me(e,"display","none"),i(r,"class","flex flex-row items-center justify-evenly font-bold h-[10vh] pb-2 bg-gray-950 ring-1 ring-zinc-500 shadow-xl"),i(u,"class","absolute left-0 top-0 w-full flex flex-col items-center justify-center space-y-1 text-xs"),i(c,"class","relative w-full flex flex-col items-center justify-center h-[85vh] bg-gradient-to-t from-gray-950 via-[#203A43] to-gray-950"),i(b,"href","https://github.com/reold"),i(b,"target","_blank"),i(b,"class","text-blue-600"),i(y,"href","https://x.com/redicrafty"),i(y,"target","_blank"),i(y,"class","text-blue-600"),i(m,"class","w-full h-[5vh] bg-gray-950 text-sm flex flex-col items-center justify-center"),i(l,"class","w-screen h-screen text-white text-xl select-none text-center")},m(k,B){j(k,e,B),t[2](e),j(k,n,B),j(k,l,B),a(l,r),a(l,s),a(l,c),a(c,u),t[3](u),a(c,d),I[o].m(c,null),a(l,h),a(l,m),a(m,w),$.m(w,null),a(w,_),a(w,b),a(w,M),a(w,y),L=!0},p(k,[B]){let D=o;o=P(k),o===D?I[o].p(k,B):(st(),Q(I[D],1,1,()=>{I[D]=null}),it(),f=I[o],f?f.p(k,B):(f=I[o]=z[o](k),f.c()),K(f,1),f.m(c,null))},i(k){L||(K(f),L=!0)},o(k){Q(f),L=!1},d(k){k&&(x(e),x(n),x(l)),t[2](null),t[3](null),I[o].d(),$.d()}}}let ze,ot;const X=(t,e=!1,n=3)=>{const l=ot.cloneNode(!0);l.innerHTML=e?`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.2em] animate-spin inline aspect-square mr-1" > <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" /> </svg>${t}`:t,l.style.display="block",ze.appendChild(l),setTimeout(()=>{ze.removeChild(l)},n*1e3)};function cn(t,e,n){let l;Ae(t,ye,u=>n(0,l=u));const r=u=>{fe.getUserInfo(u).then(d=>{if(d.success==!1){X("something went wrong!");return}J(ye,l={...l,...d.data},l),J(ye,l.loggedIn=!0,l)})};function s(u){Me[u?"unshift":"push"](()=>{ot=u})}function c(u){Me[u?"unshift":"push"](()=>{ze=u})}return[l,r,s,c]}class an extends be{constructor(e){super(),we(this,e,cn,on,se,{})}}new an({target:document.getElementById("app")});
