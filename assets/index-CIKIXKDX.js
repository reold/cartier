var Ht=Object.defineProperty;var It=(t,e,n)=>e in t?Ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ze=(t,e,n)=>(It(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function D(){}const Qe=t=>t;function We(t,e){for(const n in e)t[n]=e[n];return t}function xt(t){return t()}function lt(){return Object.create(null)}function J(t){t.forEach(xt)}function Ie(t){return typeof t=="function"}function R(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let De;function be(t,e){return t===e?!0:(De||(De=document.createElement("a")),De.href=e,t===De.href)}function Bt(t){return Object.keys(t).length===0}function Ct(t,...e){if(t==null){for(const l of e)l(void 0);return D}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Te(t){let e;return Ct(t,n=>e=n)(),e}function W(t,e,n){t.$$.on_destroy.push(Ct(e,n))}function St(t,e,n,l){if(t){const r=Lt(t,e,n,l);return t[0](r)}}function Lt(t,e,n,l){return t[1]&&l?We(n.ctx.slice(),t[1](l(e))):n.ctx}function Mt(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],i=Math.max(e.dirty.length,r.length);for(let o=0;o<i;o+=1)s[o]=e.dirty[o]|r[o];return s}return e.dirty|r}return e.dirty}function qt(t,e,n,l,r,s){if(r){const i=Lt(e,n,l,s);t.p(i,r)}}function jt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function O(t,e,n){return t.set(n),e}function Zt(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const At=typeof window<"u";let Xe=At?()=>window.performance.now():()=>Date.now(),Ke=At?t=>requestAnimationFrame(t):D;const _e=new Set;function Ot(t){_e.forEach(e=>{e.c(t)||(_e.delete(e),e.f())}),_e.size!==0&&Ke(Ot)}function et(t){let e;return _e.size===0&&Ke(Ot),{promise:new Promise(n=>{_e.add(e={c:t,f:n})}),abort(){_e.delete(e)}}}function g(t,e){t.appendChild(e)}function Et(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ut(t){const e=h("style");return e.textContent="/* empty */",Wt(Et(t),e),e.sheet}function Wt(t,e){return g(t.head||t,e),e.sheet}function S(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function Ae(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function V(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function N(t){return document.createTextNode(t)}function M(){return N(" ")}function ke(){return N("")}function P(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function zt(t){return Array.from(t.childNodes)}function ne(t,e){e=""+e,t.data!==e&&(t.data=e)}function nt(t,e){t.value=e??""}function ze(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function rt(t,e,n){t.classList.toggle(e,!!n)}function Vt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}const Ne=new Map;let He=0;function Rt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Yt(t,e){const n={stylesheet:Ut(e),rules:{}};return Ne.set(t,n),n}function Ve(t,e,n,l,r,s,i,o=0){const a=16.666/l;let u=`{
`;for(let b=0;b<=1;b+=a){const v=e+(n-e)*s(b);u+=b*100+`%{${i(v,1-v)}}
`}const p=u+`100% {${i(n,1-n)}}
}`,d=`__svelte_${Rt(p)}_${o}`,f=Et(t),{stylesheet:w,rules:m}=Ne.get(f)||Yt(f,t);m[d]||(m[d]=!0,w.insertRule(`@keyframes ${d} ${p}`,w.cssRules.length));const _=t.style.animation||"";return t.style.animation=`${_?`${_}, `:""}${d} ${l}ms linear ${r}ms 1 both`,He+=1,d}function Re(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),r=n.length-l.length;r&&(t.style.animation=l.join(", "),He-=r,He||Gt())}function Gt(){Ke(()=>{He||(Ne.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&C(e)}),Ne.clear())})}let Le;function Ce(t){Le=t}function Jt(){if(!Le)throw new Error("Function called outside component initialization");return Le}function Be(t){Jt().$$.on_mount.push(t)}const he=[],Me=[];let ve=[];const st=[],Qt=Promise.resolve();let Ye=!1;function Xt(){Ye||(Ye=!0,Qt.then(Dt))}function oe(t){ve.push(t)}const Ue=new Set;let ge=0;function Dt(){if(ge!==0)return;const t=Le;do{try{for(;ge<he.length;){const e=he[ge];ge++,Ce(e),Kt(e.$$)}}catch(e){throw he.length=0,ge=0,e}for(Ce(null),he.length=0,ge=0;Me.length;)Me.pop()();for(let e=0;e<ve.length;e+=1){const n=ve[e];Ue.has(n)||(Ue.add(n),n())}ve.length=0}while(he.length);for(;st.length;)st.pop()();Ye=!1,Ue.clear(),Ce(t)}function Kt(t){if(t.fragment!==null){t.update(),J(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(oe)}}function el(t){const e=[],n=[];ve.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ve=e}let xe;function Tt(){return xe||(xe=Promise.resolve(),xe.then(()=>{xe=null})),xe}function Se(t,e,n){t.dispatchEvent(Vt(`${e?"intro":"outro"}${n}`))}const Fe=new Set;let ie;function fe(){ie={r:0,c:[],p:ie}}function de(){ie.r||J(ie.c),ie=ie.p}function A(t,e){t&&t.i&&(Fe.delete(t),t.i(e))}function T(t,e,n,l){if(t&&t.o){if(Fe.has(t))return;Fe.add(t),ie.c.push(()=>{Fe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const Ft={duration:0};function tl(t,e,n){const l={direction:"in"};let r=e(t,n,l),s=!1,i,o,a=0;function u(){i&&Re(t,i)}function p(){const{delay:f=0,duration:w=300,easing:m=Qe,tick:_=D,css:b}=r||Ft;b&&(i=Ve(t,0,1,w,f,m,b,a++)),_(0,1);const v=Xe()+f,L=v+w;o&&o.abort(),s=!0,oe(()=>Se(t,!0,"start")),o=et(y=>{if(s){if(y>=L)return _(1,0),Se(t,!0,"end"),u(),s=!1;if(y>=v){const k=m((y-v)/w);_(k,1-k)}}return s})}let d=!1;return{start(){d||(d=!0,Re(t),Ie(r)?(r=r(l),Tt().then(p)):p())},invalidate(){d=!1},end(){s&&(u(),s=!1)}}}function ye(t,e,n,l){let s=e(t,n,{direction:"both"}),i=l?0:1,o=null,a=null,u=null,p;function d(){u&&Re(t,u)}function f(m,_){const b=m.b-i;return _*=Math.abs(b),{a:i,b:m.b,d:b,duration:_,start:m.start,end:m.start+_,group:m.group}}function w(m){const{delay:_=0,duration:b=300,easing:v=Qe,tick:L=D,css:y}=s||Ft,k={start:Xe()+_,b:m};m||(k.group=ie,ie.r+=1),"inert"in t&&(m?p!==void 0&&(t.inert=p):(p=t.inert,t.inert=!0)),o||a?a=k:(y&&(d(),u=Ve(t,i,m,b,_,v,y)),m&&L(0,1),o=f(k,b),oe(()=>Se(t,m,"start")),et($=>{if(a&&$>a.start&&(o=f(a,b),a=null,Se(t,o.b,"start"),y&&(d(),u=Ve(t,i,o.b,o.duration,0,v,s.css))),o){if($>=o.end)L(i=o.b,1-i),Se(t,o.b,"end"),a||(o.b?d():--o.group.r||J(o.group.c)),o=null;else if($>=o.start){const q=$-o.start;i=o.a+o.d*v(q/o.duration),L(i,1-i)}}return!!(o||a)}))}return{run(m){Ie(s)?Tt().then(()=>{s=s({direction:m?"in":"out"}),w(m)}):w(m)},end(){d(),o=a=null}}}function re(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function le(t){t&&t.c()}function Y(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),oe(()=>{const s=t.$$.on_mount.map(xt).filter(Ie);t.$$.on_destroy?t.$$.on_destroy.push(...s):J(s),t.$$.on_mount=[]}),r.forEach(oe)}function G(t,e){const n=t.$$;n.fragment!==null&&(el(n.after_update),J(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ll(t,e){t.$$.dirty[0]===-1&&(he.push(t),Xt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(t,e,n,l,r,s,i=null,o=[-1]){const a=Le;Ce(t);const u=t.$$={fragment:null,ctx:[],props:s,update:D,not_equal:r,bound:lt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:lt(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};i&&i(u.root);let p=!1;if(u.ctx=n?n(t,e.props||{},(d,f,...w)=>{const m=w.length?w[0]:f;return u.ctx&&r(u.ctx[d],u.ctx[d]=m)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](m),p&&ll(t,d)),f}):[],u.update(),p=!0,J(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const d=zt(e.target);u.fragment&&u.fragment.l(d),d.forEach(C)}else u.fragment&&u.fragment.c();e.intro&&A(t.$$.fragment),Y(t,e.target,e.anchor),Dt()}Ce(a)}class X{constructor(){Ze(this,"$$");Ze(this,"$$set")}$destroy(){G(this,1),this.$destroy=D}$on(e,n){if(!Ie(n))return D;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!Bt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nl);window["cartier-server-url"]="https://cartier-beta.glitch.me";const ae={getRoot:async()=>await(await fetch(`${window["cartier-server-url"]}/`)).json(),getUserInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/user?username=${t}`)).json(),getPlaylistInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/playlist?id=${t}`)).json(),getDownloadPlaylist:async t=>await(await fetch(`${window["cartier-server-url"]}/download?link=${t}`)).json(),getDownloadStatus:async t=>await(await fetch(`${window["cartier-server-url"]}/status?key=${t}`)).json(),getDownloadTrack:async(t,e="",n=!1)=>await(await fetch(`${window["cartier-server-url"]}/track?link=${t}&key=${e}&create=${n}`)).json(),getStreamPlaylist:async t=>{let e=await fetch(`${window["cartier-server-url"]}/stream?key=${t}`);return[await e.ok,await e.blob(),e.headers.get("x-trackid")]}},me=[];function $e(t,e=D){let n;const l=new Set;function r(o){if(R(t,o)&&(t=o,n)){const a=!me.length;for(const u of l)u[1](),me.push(u,t);if(a){for(let u=0;u<me.length;u+=2)me[u][0](me[u+1]);me.length=0}}}function s(o){r(o(t))}function i(o,a=D){const u=[o,a];return l.add(u),l.size===1&&(n=e(r,s)||D),o(t),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:i}}function it(t){return 1-Math.sqrt(1-t*t)}function Pt(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function rl(t){const e=t-1;return e*e*e+1}function ot(t,{delay:e=0,duration:n=400,easing:l=Pt,amount:r=5,opacity:s=0}={}){const i=getComputedStyle(t),o=+i.opacity,a=i.filter==="none"?"":i.filter,u=o*(1-s),[p,d]=Zt(r);return{delay:e,duration:n,easing:l,css:(f,w)=>`opacity: ${o-u*w}; filter: ${a} blur(${w*p}${d});`}}function qe(t,{delay:e=0,duration:n=400,easing:l=rl,axis:r="y"}={}){const s=getComputedStyle(t),i=+s.opacity,o=r==="y"?"height":"width",a=parseFloat(s[o]),u=r==="y"?["top","bottom"]:["left","right"],p=u.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),d=parseFloat(s[`padding${p[0]}`]),f=parseFloat(s[`padding${p[1]}`]),w=parseFloat(s[`margin${p[0]}`]),m=parseFloat(s[`margin${p[1]}`]),_=parseFloat(s[`border${p[0]}Width`]),b=parseFloat(s[`border${p[1]}Width`]);return{delay:e,duration:n,easing:l,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*i};${o}: ${v*a}px;padding-${u[0]}: ${v*d}px;padding-${u[1]}: ${v*f}px;margin-${u[0]}: ${v*w}px;margin-${u[1]}: ${v*m}px;border-${u[0]}-width: ${v*_}px;border-${u[1]}-width: ${v*b}px;`}}function at(t){let e,n,l,r;const s=t[2].default,i=St(s,t,t[1],null);return{c(){e=h("div"),n=h("div"),i&&i.c(),c(n,"class","bg-foreground p-2 rounded-md ring-1 ring-border max-w-[90vw] flex flex-col"),c(e,"class","absolute top-0 left-0 w-full h-full backdrop-blur-md flex flex-col items-center justify-center text-center text-xs")},m(o,a){S(o,e,a),g(e,n),i&&i.m(n,null),r=!0},p(o,a){i&&i.p&&(!r||a&2)&&qt(i,s,o,o[1],r?Mt(s,o[1],a,null):jt(o[1]),null)},i(o){r||(A(i,o),o&&oe(()=>{r&&(l||(l=ye(e,ot,{duration:500},!0)),l.run(1))}),r=!0)},o(o){T(i,o),o&&(l||(l=ye(e,ot,{duration:500},!1)),l.run(0)),r=!1},d(o){o&&C(e),i&&i.d(o),o&&l&&l.end()}}}function sl(t){let e,n,l=!t[0]&&at(t);return{c(){l&&l.c(),e=ke()},m(r,s){l&&l.m(r,s),S(r,e,s),n=!0},p(r,[s]){r[0]?l&&(fe(),T(l,1,1,()=>{l=null}),de()):l?(l.p(r,s),s&1&&A(l,1)):(l=at(r),l.c(),A(l,1),l.m(e.parentNode,e))},i(r){n||(A(l),n=!0)},o(r){T(l),n=!1},d(r){r&&C(e),l&&l.d(r)}}}function il(t,e,n){let{$$slots:l={},$$scope:r}=e,{hidden:s=!1}=e;return t.$$set=i=>{"hidden"in i&&n(0,s=i.hidden),"$$scope"in i&&n(1,r=i.$$scope)},[s,r,l]}class ol extends X{constructor(e){super(),Q(this,e,il,sl,R,{hidden:0})}}function ct(t){let e,n;return{c(){e=V("svg"),n=V("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width","1.5"),c(e,"stroke","currentColor"),c(e,"class","aspect-square w-[1.2em] animate-spin inline")},m(l,r){S(l,e,r),g(e,n)},d(l){l&&C(e)}}}function al(t){let e,n,l,r,s,i,o=t[0].step+"",a,u=t[0].is&&ct();return{c(){e=h("h1"),e.textContent="Starting Up Servers!",n=M(),l=h("p"),l.textContent=`Our servers take a little break every few minutes when things quiet down.
    We're in the process of waking them up for you. It's automatic, so no need
    to stress!`,r=M(),s=h("p"),u&&u.c(),i=M(),a=N(o),c(e,"class","text-2xl"),c(l,"class","text-xs text-white/70 inline"),c(s,"class","inline"),rt(s,"text-green-500",!t[0].is)},m(p,d){S(p,e,d),S(p,n,d),S(p,l,d),S(p,r,d),S(p,s,d),u&&u.m(s,null),g(s,i),g(s,a)},p(p,d){p[0].is?u||(u=ct(),u.c(),u.m(s,i)):u&&(u.d(1),u=null),d&1&&o!==(o=p[0].step+"")&&ne(a,o),d&1&&rt(s,"text-green-500",!p[0].is)},d(p){p&&(C(e),C(n),C(l),C(r),C(s)),u&&u.d()}}}function cl(t){let e,n;return e=new ol({props:{hidden:!t[0].is,$$slots:{default:[al]},$$scope:{ctx:t}}}),{c(){le(e.$$.fragment)},m(l,r){Y(e,l,r),n=!0},p(l,[r]){const s={};r&1&&(s.hidden=!l[0].is),r&9&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function ul(t,e,n){let l;const r=$e({step:"trying to make contact",is:!0});W(t,r,i=>n(0,l=i));let{handleWakeup:s}=e;return Be(()=>{O(r,l.step="waking up servers",l),ae.getRoot().then(i=>{O(r,l.is=!1,l),O(r,l.step="servers are running!",l),s()}).catch(i=>{B(`servers are unreachable (${i})`),O(r,l.step="servers are unreachable (reload?)",l)})}),t.$$set=i=>{"handleWakeup"in i&&n(2,s=i.handleWakeup)},[l,r,s]}class fl extends X{constructor(e){super(),Q(this,e,ul,cl,R,{handleWakeup:2})}}function dl(t){let e,n,l,r,s,i,o,a,u,p,d,f,w,m,_,b,v,L,y,k,$,q,x,I,E,K,pe,ce;return e=new fl({props:{handleWakeup:t[2]}}),{c(){le(e.$$.fragment),n=M(),l=h("div"),r=h("div"),s=h("p"),s.textContent="Welcome aboard!",i=M(),o=h("div"),a=h("div"),u=h("label"),p=h("input"),d=M(),f=h("button"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline rounded-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg>',w=M(),m=h("p"),m.textContent="copy your Spotify profile link from your account page",_=M(),b=h("div"),v=h("div"),L=h("label"),y=h("input"),k=M(),$=h("span"),$.textContent="save",q=M(),x=h("button"),x.textContent="continue",I=M(),E=h("details"),E.innerHTML=`<summary class="font-bold mb-2">Know Cartier Manager, The Free Spotify Playlist Downloader</summary> <p class="mb-4">Mobile-friendly, free-to-use Spotify playlist downloader. Share your
          Spotify profile link to effortlessly download all your public
          playlists.</p> <p>Powered by <code>spotify-dl</code> on our servers, Cartier finds and downloads
          songs from YouTube and Deezer based on Spotify data.</p>`,c(s,"class","text-3xl font-black text-white border-border border-b-2 rounded-xl px-2 pb-1"),c(p,"id","spotifyprofilelinkinput"),c(p,"type","text"),c(p,"class","w-full"),c(p,"placeholder","type Spotify profile link"),c(p,"autocomplete","url"),c(p,"aria-label","type spotify profile link"),c(u,"for","spotifyprofilelinkinput"),c(f,"class","bg-background text-white ring-1 ring-border"),c(f,"aria-label","paste spotify profile link from clipboard"),c(a,"class","w-full flex flex-row items-center justify-center space-x-2"),c(m,"class","text-xs svg-icon mt-[0.5em]"),c(o,"class","flex flex-col items-center justify-center"),c(y,"type","checkbox"),c(y,"id","dopersistbtn"),c(y,"class","inline"),c($,"class","align-middle"),c(L,"for","dopersistbtn"),c(L,"class","text-base flex flex-row space-x-2 bg-black p-2 rounded-md"),c(x,"class","hover:scale-110"),c(v,"class","flex flex-row items-center justify-center space-x-3"),c(E,"class","text-xs w-11/12"),c(b,"class","flex flex-col space-x-[0.5em]"),c(r,"class","flex flex-col items-center text-center justify-center bg-foreground ring-1 ring-border rounded-md w-11/12 space-y-7 p-3 max-w-[90vw] h-full"),c(l,"class","flex flex-col justify-center items-center")},m(F,se){Y(e,F,se),S(F,n,se),S(F,l,se),g(l,r),g(r,s),g(r,i),g(r,o),g(o,a),g(a,u),g(u,p),nt(p,t[0]),g(a,d),g(a,f),g(o,w),g(o,m),g(r,_),g(r,b),g(b,v),g(v,L),g(L,y),y.checked=t[1],g(L,k),g(L,$),g(v,q),g(v,x),g(b,I),g(b,E),K=!0,pe||(ce=[P(p,"input",t[6]),P(f,"click",t[3]),P(y,"change",t[7]),P(x,"click",t[4])],pe=!0)},p(F,[se]){se&1&&p.value!==F[0]&&nt(p,F[0]),se&2&&(y.checked=F[1])},i(F){K||(A(e.$$.fragment,F),K=!0)},o(F){T(e.$$.fragment,F),K=!1},d(F){F&&(C(n),C(l)),G(e,F),pe=!1,J(ce)}}}function pl(t,e,n){const l=()=>{const d=localStorage.getItem("cartier-userid");d&&(console.info("performing auto login for",d),B("performing auto-login",!0,5,async f=>{await r(d),f()}))};let{handleUsername:r}=e,s="",i=!0;const o=async()=>{navigator.clipboard.readText?n(0,s=await navigator.clipboard.readText()):B("unable to use the clipboard",!1,.5)},a=()=>{let d;try{d=new URL(s)}catch{n(0,s="");return}const f=d.pathname.split("/")[2];i&&(localStorage.setItem("cartier-userid",f),B("login information saved!")),r(f)};function u(){s=this.value,n(0,s)}function p(){i=this.checked,n(1,i)}return t.$$set=d=>{"handleUsername"in d&&n(5,r=d.handleUsername)},[s,i,l,o,a,r,u,p]}class gl extends X{constructor(e){super(),Q(this,e,pl,dl,R,{handleUsername:5})}}var Z=(t=>(t[t.PLAYLISTS=0]="PLAYLISTS",t[t.DOWNLOADED=1]="DOWNLOADED",t[t.SETTINGS=2]="SETTINGS",t[t.ACCOUNT=3]="ACCOUNT",t))(Z||{});const z=$e({logged:!1,user:{},playlists:{downloaded:[],all:[]},view:{tab:0}}),we=$e({handle:{root:{},cartierFile:{},tracksDir:{}}}),ue=$e({playlists:[],info:{type:"",version:0}}),je={setOPFSHandle:async()=>{let t=Te(we);t.handle.root=await navigator.storage.getDirectory(),t.handle.cartierFile=await t.handle.root.getFileHandle("cartier.json",{create:!0}),t.handle.tracksDir=await t.handle.root.getDirectoryHandle("tracks",{create:!0}),we.set(t)},bufferCartierFile:async()=>{let t=Te(we);const e=await t.handle.cartierFile.getFile();ue.set(JSON.parse(await e.text())),ue.subscribe(async n=>{const l=await t.handle.cartierFile.createWritable();await l.write(JSON.stringify(n)),await l.close()})},initCartierFile:async()=>{await je.setOPFSHandle();let t=Te(we);if((await t.handle.cartierFile.getFile()).size==0){console.info("cartier file is empty!");const n=await t.handle.cartierFile.createWritable();await n.write(JSON.stringify({info:{type:"cartier-file",version:1},playlists:[]})),await n.close()}await je.bufferCartierFile()},login:async t=>{let e=await ae.getUserInfo(t);if(e.success==!1)return!1;z.set({...Te(z),...e.data,logged:!0})},logout:async()=>{localStorage.removeItem("cartier-userid"),z.update(t=>(t.logged=!1,t.playlists={all:[],downloaded:[]},t.user={},t))}};function ut(t,e,n){const l=t.slice();return l[7]=e[n][0],l[8]=e[n][1],l}function ft(t){let e,n;return{c(){e=V("svg"),n=V("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"d","M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"),c(n,"class","svelte-1qpwcl7"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width","1.5"),c(e,"stroke","currentColor"),c(e,"class","w-[1em] svelte-1qpwcl7")},m(l,r){S(l,e,r),g(e,n)},d(l){l&&C(e)}}}function dt(t){let e,n,l=t[7].startsWith("r"),r,s=t[7].slice(1).split("_").join(" ")+"",i,o,a,u=t[8]+"",p,d=l&&ft();return{c(){e=h("tr"),n=h("td"),d&&d.c(),r=M(),i=N(s),o=M(),a=h("td"),p=N(u),c(n,"class","svg-icon p-2 svelte-1qpwcl7"),c(a,"class","bg-transparent border-l-2 border-border svelte-1qpwcl7"),c(e,"class","odd:bg-foreground even:bg-background svelte-1qpwcl7")},m(f,w){S(f,e,w),g(e,n),d&&d.m(n,null),g(n,r),g(n,i),g(e,o),g(e,a),g(a,p)},p(f,w){w&1&&(l=f[7].startsWith("r")),l?d||(d=ft(),d.c(),d.m(n,r)):d&&(d.d(1),d=null),w&1&&s!==(s=f[7].slice(1).split("_").join(" ")+"")&&ne(i,s),w&1&&u!==(u=f[8]+"")&&ne(p,u)},d(f){f&&C(e),d&&d.d()}}}function ml(t){let e,n,l,r,s,i,o,a,u,p,d,f,w,m,_,b,v,L,y=re(Object.entries(t[0])),k=[];for(let $=0;$<y.length;$+=1)k[$]=dt(ut(t,y,$));return{c(){e=h("div"),n=h("table"),l=h("thead"),l.innerHTML='<th class="svelte-1qpwcl7">parameter</th><th class="svelte-1qpwcl7">value</th>',r=M(),s=h("tbody");for(let $=0;$<k.length;$+=1)k[$].c();i=M(),o=h("div"),a=h("button"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M8.478 1.6a.75.75 0 0 1 .273 1.026 3.72 3.72 0 0 0-.425 1.121c.058.058.118.114.18.168A4.491 4.491 0 0 1 12 2.25c1.413 0 2.673.651 3.497 1.668.06-.054.12-.11.178-.167a3.717 3.717 0 0 0-.426-1.125.75.75 0 1 1 1.298-.752 5.22 5.22 0 0 1 .671 2.046.75.75 0 0 1-.187.582c-.241.27-.505.52-.787.749a4.494 4.494 0 0 1 .216 2.1c-.106.792-.753 1.295-1.417 1.403-.182.03-.364.057-.547.081.152.227.273.476.359.742a23.122 23.122 0 0 0 3.832-.803 23.241 23.241 0 0 0-.345-2.634.75.75 0 0 1 1.474-.28c.21 1.115.348 2.256.404 3.418a.75.75 0 0 1-.516.75c-1.527.499-3.119.854-4.76 1.049-.074.38-.22.735-.423 1.05 2.066.209 4.058.672 5.943 1.358a.75.75 0 0 1 .492.75 24.665 24.665 0 0 1-1.189 6.25.75.75 0 0 1-1.425-.47 23.14 23.14 0 0 0 1.077-5.306c-.5-.169-1.009-.32-1.524-.455.068.234.104.484.104.746 0 3.956-2.521 7.5-6 7.5-3.478 0-6-3.544-6-7.5 0-.262.037-.511.104-.746-.514.135-1.022.286-1.522.455.154 1.838.52 3.616 1.077 5.307a.75.75 0 1 1-1.425.468 24.662 24.662 0 0 1-1.19-6.25.75.75 0 0 1 .493-.749 24.586 24.586 0 0 1 4.964-1.24h.01c.321-.046.644-.085.969-.118a2.983 2.983 0 0 1-.424-1.05 24.614 24.614 0 0 1-4.76-1.05.75.75 0 0 1-.516-.75c.057-1.16.194-2.302.405-3.417a.75.75 0 0 1 1.474.28c-.164.862-.28 1.74-.345 2.634 1.237.371 2.517.642 3.832.803.085-.266.207-.515.359-.742a18.698 18.698 0 0 1-.547-.08c-.664-.11-1.311-.612-1.417-1.404a4.535 4.535 0 0 1 .217-2.103 6.788 6.788 0 0 1-.788-.751.75.75 0 0 1-.187-.583 5.22 5.22 0 0 1 .67-2.04.75.75 0 0 1 1.026-.273Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <a href="https://github.com/reold/cartier/issues/new" target="_blank" class="svelte-1qpwcl7">report a bug</a>',u=M(),p=h("button"),p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path d="M4.08 5.227A3 3 0 0 1 6.979 3H17.02a3 3 0 0 1 2.9 2.227l2.113 7.926A5.228 5.228 0 0 0 18.75 12H5.25a5.228 5.228 0 0 0-3.284 1.153L4.08 5.227Z" class="svelte-1qpwcl7"></path><path fill-rule="evenodd" d="M5.25 13.5a3.75 3.75 0 1 0 0 7.5h13.5a3.75 3.75 0 1 0 0-7.5H5.25Zm10.5 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm3.75-.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">use Render server</p>',d=M(),f=h("button"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] svelte-1qpwcl7"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">refresh</p> ',w=h("button"),w.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M16.5 3.75a1.5 1.5 0 0 1 1.5 1.5v13.5a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5V15a.75.75 0 0 0-1.5 0v3.75a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3V5.25a3 3 0 0 0-3-3h-6a3 3 0 0 0-3 3V9A.75.75 0 1 0 9 9V5.25a1.5 1.5 0 0 1 1.5-1.5h6Zm-5.03 4.72a.75.75 0 0 0 0 1.06l1.72 1.72H2.25a.75.75 0 0 0 0 1.5h10.94l-1.72 1.72a.75.75 0 1 0 1.06 1.06l3-3a.75.75 0 0 0 0-1.06l-3-3a.75.75 0 0 0-1.06 0Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">logout</p>',m=M(),_=h("button"),_.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">delete all downloads</p>',c(l,"class","text-xl svelte-1qpwcl7"),c(s,"class","svelte-1qpwcl7"),c(n,"class","text-sm ring-1 ring-border rounded-md min-w-[95vw] svelte-1qpwcl7"),c(a,"class","bg-black text-white svg-icon col-span-5 svelte-1qpwcl7"),c(p,"class","bg-orange-500 text-black svg-icon col-span-5 svelte-1qpwcl7"),c(f,"class","bg-primary text-black svg-icon col-span-4 svelte-1qpwcl7"),c(w,"class","bg-red-500 text-white svg-icon col-span-6 svelte-1qpwcl7"),c(_,"class","bg-red-500 text-white svg-icon col-span-10 svelte-1qpwcl7"),c(o,"class","grid grid-cols-10 gap-2 btns-tab font-bold min-w-[95vw] svelte-1qpwcl7"),c(e,"class","h-[82vh] overflow-y-scroll w-[100vw] flex flex-col items-center justify-center svelte-1qpwcl7"),c(e,"style",b=t[1].view.tab==Z.SETTINGS?"":"display: none")},m($,q){S($,e,q),g(e,n),g(n,l),g(n,r),g(n,s);for(let x=0;x<k.length;x+=1)k[x]&&k[x].m(s,null);g(e,i),g(e,o),g(o,a),g(o,u),g(o,p),g(o,d),g(o,f),g(o,w),g(o,m),g(o,_),v||(L=[P(a,"click",t[3]),P(p,"click",t[5]),P(f,"click",t[3]),P(w,"click",t[4]),P(_,"click",t[2])],v=!0)},p($,[q]){if(q&1){y=re(Object.entries($[0]));let x;for(x=0;x<y.length;x+=1){const I=ut($,y,x);k[x]?k[x].p(I,q):(k[x]=dt(I),k[x].c(),k[x].m(s,null))}for(;x<k.length;x+=1)k[x].d(1);k.length=y.length}q&2&&b!==(b=$[1].view.tab==Z.SETTINGS?"":"display: none")&&c(e,"style",b)},i:D,o:D,d($){$&&C(e),Ae(k,$),v=!1,J(L)}}}function hl(t,e,n){let l,r;W(t,we,p=>n(6,l=p)),W(t,z,p=>n(1,r=p));let s={};const i=()=>{B("deleting all downloads and refreshing",!0,10,async p=>{await l.handle.root.remove({recursive:!0}),p(),window.location.reload()})},o=()=>{B("loading settings",!0,5,async p=>{const d=await navigator.storage.estimate();let f=0;d&&(f=d.usage/1024**2),n(0,s={rsaved_userid:localStorage.getItem("cartier-userid")||"not saved",rserver_url:window["cartier-server-url"],ropfs_used:`${f.toFixed(1)} MB`,wthank_you_for:"testing our beta version!"}),p()})};return Be(o),[s,r,i,o,async()=>{await je.logout()},()=>{window["cartier-server-url"]="https://cartier-backend-1.onrender.com",B("waking up Render server",!0,10,async p=>{await ae.getRoot(),p(),o()})}]}class wl extends X{constructor(e){super(),Q(this,e,hl,ml,R,{})}}function pt(t,e,n){const l=t.slice();return l[3]=e[n],l}function gt(t){let e,n,l,r=t[3].name+"",s,i;return{c(){e=h("li"),n=V("svg"),l=V("path"),s=N(r),i=M(),c(l,"fill-rule","evenodd"),c(l,"d","M19.952 1.651a.75.75 0 0 1 .298.599V16.303a3 3 0 0 1-2.176 2.884l-1.32.377a2.553 2.553 0 1 1-1.403-4.909l2.311-.66a1.5 1.5 0 0 0 1.088-1.442V6.994l-9 2.572v9.737a3 3 0 0 1-2.176 2.884l-1.32.377a2.553 2.553 0 1 1-1.402-4.909l2.31-.66a1.5 1.5 0 0 0 1.088-1.442V5.25a.75.75 0 0 1 .544-.721l10.5-3a.75.75 0 0 1 .658.122Z"),c(l,"clip-rule","evenodd"),c(n,"xmlns","http://www.w3.org/2000/svg"),c(n,"viewBox","0 0 24 24"),c(n,"fill","currentColor"),c(n,"class","w-[2ch] inline mr-1"),c(e,"class","truncate")},m(o,a){S(o,e,a),g(e,n),g(n,l),g(e,s),g(e,i)},p(o,a){a&1&&r!==(r=o[3].name+"")&&ne(s,r)},d(o){o&&C(e)}}}function _l(t){let e,n,l,r=t[0].name+"",s,i,o,a,u=t[0].owner+"",p,d,f,w,m,_,b,v,L,y,k,$=re(t[0].tracks),q=[];for(let x=0;x<$.length;x+=1)q[x]=gt(pt(t,$,x));return{c(){e=h("div"),n=h("div"),l=h("p"),s=N(r),i=M(),o=h("p"),a=N("by "),p=N(u),d=M(),f=h("ol");for(let x=0;x<q.length;x+=1)q[x].c();w=M(),m=h("button"),m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path fill-rule="evenodd" d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z" clip-rule="evenodd"></path></svg>',_=M(),b=h("button"),b.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path d="M5.625 3.75a2.625 2.625 0 1 0 0 5.25h12.75a2.625 2.625 0 0 0 0-5.25H5.625ZM3.75 11.25a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5H3.75ZM3 15.75a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75ZM3.75 18.75a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5H3.75Z"></path></svg>',v=M(),L=h("button"),L.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z" clip-rule="evenodd"></path></svg>',c(l,"class","text-xl font-bold"),c(o,"class","-mt-1"),c(n,"class","flex flex-col items-center justify-center space-x-2 col-span-2 row-span-2"),c(f,"class","ring-1 ring-border col-span-3 p-2 rounded-t-md bg-foreground overflow-x-hidden overflow-y-scroll"),c(m,"class","svg-icon ring-1 ring-border p-0 text-xs rounded-none rounded-bl-md"),c(b,"class","svg-icon ring-1 ring-border p-0 text-xs rounded-none"),c(L,"class","svg-icon ring-1 ring-border bg-red-500 text-white p-0 text-xs rounded-none rounded-br-md"),c(e,"class","bg-green-600 ring-1 ring-border w-[95%] rounded-md min-h-[15vh] max-h-[20vh] text-xs grid grid-cols-5")},m(x,I){S(x,e,I),g(e,n),g(n,l),g(l,s),g(n,i),g(n,o),g(o,a),g(o,p),g(e,d),g(e,f);for(let E=0;E<q.length;E+=1)q[E]&&q[E].m(f,null);g(e,w),g(e,m),g(e,_),g(e,b),g(e,v),g(e,L),y||(k=P(L,"click",t[1]),y=!0)},p(x,[I]){if(I&1&&r!==(r=x[0].name+"")&&ne(s,r),I&1&&u!==(u=x[0].owner+"")&&ne(p,u),I&1){$=re(x[0].tracks);let E;for(E=0;E<$.length;E+=1){const K=pt(x,$,E);q[E]?q[E].p(K,I):(q[E]=gt(K),q[E].c(),q[E].m(f,null))}for(;E<q.length;E+=1)q[E].d(1);q.length=$.length}},i:D,o:D,d(x){x&&C(e),Ae(q,x),y=!1,k()}}}function vl(t,e,n){let l;W(t,ue,i=>n(2,l=i));let{playlist:r}=e;const s=()=>{let i=l.playlists;i.splice(l.playlists.indexOf(r),1),O(ue,l.playlists=i,l),B(`removed "${r.name}" from downloads`,!1,2)};return t.$$set=i=>{"playlist"in i&&n(0,r=i.playlist)},[r,s]}class bl extends X{constructor(e){super(),Q(this,e,vl,_l,R,{playlist:0})}}function mt(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ge(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((r,s)=>Ge(t[s],r));return r=>l.map(s=>s(r))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(mt(t)&&mt(e)){t=t.getTime(),e=e.getTime();const s=e-t;return i=>new Date(t+i*s)}const l=Object.keys(e),r={};return l.forEach(s=>{r[s]=Ge(t[s],e[s])}),s=>{const i={};return l.forEach(o=>{i[o]=r[o](s)}),i}}if(n==="number"){const l=e-t;return r=>t+r*l}throw new Error(`Cannot interpolate ${n} values`)}function Je(t,e={}){const n=$e(t);let l,r=t;function s(i,o){if(t==null)return n.set(t=i),Promise.resolve();r=i;let a=l,u=!1,{delay:p=0,duration:d=400,easing:f=Qe,interpolate:w=Ge}=We(We({},e),o);if(d===0)return a&&(a.abort(),a=null),n.set(t=r),Promise.resolve();const m=Xe()+p;let _;return l=et(b=>{if(b<m)return!0;u||(_=w(t,i),typeof d=="function"&&(d=d(t,i)),u=!0),a&&(a.abort(),a=null);const v=b-m;return v>d?(n.set(t=i),!1):(n.set(t=_(f(v/d))),!0)}),l.promise}return{set:s,update:(i,o)=>s(i(r,t),o),subscribe:n.subscribe}}function ht(t,e,n){const l=t.slice();return l[12]=e[n],l}function yl(t){let e,n;return{c(){e=V("svg"),n=V("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width","1.5"),c(e,"stroke","currentColor"),c(e,"class","w-[10vh] h-[10vh] col-span-3 m-auto")},m(l,r){S(l,e,r),g(e,n)},p:D,d(l){l&&C(e)}}}function kl(t){let e,n;return{c(){e=h("img"),c(e,"loading","lazy"),be(e.src,n=t[0].images[0].url)||c(e,"src",n),c(e,"class","rounded-full max-h-[10vh] shadow-black shadow-md col-span-3 m-auto"),c(e,"alt","playlist's cover")},m(l,r){S(l,e,r)},p(l,r){r&1&&!be(e.src,n=l[0].images[0].url)&&c(e,"src",n)},d(l){l&&C(e)}}}function $l(t){let e,n=t[0].owner.display_name+"",l;return{c(){e=N("by "),l=N(n)},m(r,s){S(r,e,s),S(r,l,s)},p(r,s){s&1&&n!==(n=r[0].owner.display_name+"")&&ne(l,n)},d(r){r&&(C(e),C(l))}}}function xl(t){let e=t[0].description+"",n;return{c(){n=N(e)},m(l,r){S(l,n,r)},p(l,r){r&1&&e!==(e=l[0].description+"")&&ne(n,e)},d(l){l&&C(n)}}}function Cl(t){let e,n,l,r;function s(a,u){return a[1].downloading?Ml:Ll}let i=s(t),o=i(t);return{c(){e=h("button"),o.c(),c(e,"class","text-xs svg-icon"),e.disabled=n=t[1].downloading||t[1].download.done},m(a,u){S(a,e,u),o.m(e,null),l||(r=P(e,"click",t[8]),l=!0)},p(a,u){i!==(i=s(a))&&(o.d(1),o=i(a),o&&(o.c(),o.m(e,null))),u&2&&n!==(n=a[1].downloading||a[1].download.done)&&(e.disabled=n)},d(a){a&&C(e),o.d(),l=!1,r()}}}function Sl(t){let e,n,l,r,s;return{c(){e=h("button"),e.textContent="save",n=M(),l=h("button"),l.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2ch]"><path fill-rule="evenodd" d="M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd"></path></svg>

                local mp3`,c(e,"class","text-xs svg-icon bg-green-700 text-white"),c(l,"class","text-xs svg-icon")},m(i,o){S(i,e,o),S(i,n,o),S(i,l,o),r||(s=[P(e,"click",t[7]),P(l,"click",t[6])],r=!0)},p:D,d(i){i&&(C(e),C(n),C(l)),r=!1,J(s)}}}function Ll(t){let e,n,l;return{c(){e=V("svg"),n=V("path"),l=N(`

                  download`),c(n,"fill-rule","evenodd"),c(n,"d","M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z"),c(n,"clip-rule","evenodd"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 24 24"),c(e,"fill","currentColor"),c(e,"class","w-[2ch]")},m(r,s){S(r,e,s),g(e,n),S(r,l,s)},d(r){r&&(C(e),C(l))}}}function Ml(t){let e;return{c(){e=N("downloading")},m(n,l){S(n,e,l)},d(n){n&&C(e)}}}function wt(t){let e,n,l,r=t[1].tracks.length+"",s,i,o,a,u,p=re(t[1].tracks),d=[];for(let f=0;f<p.length;f+=1)d[f]=_t(ht(t,p,f));return{c(){e=h("div"),n=h("div"),l=h("p"),s=N(r),i=N(" tracks"),o=M();for(let f=0;f<d.length;f+=1)d[f].c();c(l,"class","bg-primary rounded-full p-2 text-black"),c(n,"class","overflow-hidden overflow-x-scroll flex flex-row items-center space-x-2 p-2"),c(e,"class","-mt-1 w-full bg-foreground ring-1 ring-border rounded-b-md text-xs flex flex-row items-center justify-center")},m(f,w){S(f,e,w),g(e,n),g(n,l),g(l,s),g(l,i),g(n,o);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(n,null);u=!0},p(f,w){if((!u||w&2)&&r!==(r=f[1].tracks.length+"")&&ne(s,r),w&2){p=re(f[1].tracks);let m;for(m=0;m<p.length;m+=1){const _=ht(f,p,m);d[m]?d[m].p(_,w):(d[m]=_t(_),d[m].c(),d[m].m(n,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=p.length}},i(f){u||(f&&oe(()=>{u&&(a||(a=ye(e,qe,{duration:500},!0)),a.run(1))}),u=!0)},o(f){f&&(a||(a=ye(e,qe,{duration:500},!1)),a.run(0)),u=!1},d(f){f&&C(e),Ae(d,f),f&&a&&a.end()}}}function ql(t){let e;return{c(){e=h("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-[5vh]"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"></path></svg> ',c(e,"class","shadow-md shadow-black rounded-full")},m(n,l){S(n,e,l)},p:D,d(n){n&&C(e)}}}function jl(t){let e,n,l;return{c(){e=h("img"),c(e,"loading","lazy"),be(e.src,n=t[12].images[t[12].images.length-1].url)||c(e,"src",n),c(e,"class",l="aspect-square h-[5vh] ring-1 ring-border rounded-full shadow-sm shadow-black will-change-auto "+(t[1].downloading?(t[1].download.status[t[12].id]=="downloading"?" rotating-image":"")+(t[1].download.status[t[12].id]=="ready"?"ring-green-500":"")+(t[1].download.status[t[12].id]=="failed"?" ring-red-500":""):"")),c(e,"alt","album art")},m(r,s){S(r,e,s)},p(r,s){s&2&&!be(e.src,n=r[12].images[r[12].images.length-1].url)&&c(e,"src",n),s&2&&l!==(l="aspect-square h-[5vh] ring-1 ring-border rounded-full shadow-sm shadow-black will-change-auto "+(r[1].downloading?(r[1].download.status[r[12].id]=="downloading"?" rotating-image":"")+(r[1].download.status[r[12].id]=="ready"?"ring-green-500":"")+(r[1].download.status[r[12].id]=="failed"?" ring-red-500":""):""))&&c(e,"class",l)},d(r){r&&C(e)}}}function _t(t){let e;function n(s,i){return s[12].images&&s[12].images.length>0?jl:ql}let l=n(t),r=l(t);return{c(){r.c(),e=ke()},m(s,i){r.m(s,i),S(s,e,i)},p(s,i){l===(l=n(s))&&r?r.p(s,i):(r.d(1),r=l(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&C(e),r.d(s)}}}function Al(t){let e,n,l,r,s,i,o,a,u,p,d=t[0].name+"",f,w,m,_,b,v,L,y,k,$,q,x,I,E,K;function pe(j,U){return j[0].images&&j[0].images.length>0?kl:yl}let ce=pe(t),F=ce(t);function se(j,U){return j[0].description?xl:$l}let Oe=se(t),ee=Oe(t);function tt(j,U){return j[1].download.done?Sl:Cl}let Ee=tt(t),te=Ee(t),H=t[1].showMore&&wt(t);return{c(){e=h("div"),n=h("div"),l=h("div"),s=M(),i=h("div"),o=h("div"),F.c(),a=M(),u=h("div"),p=h("p"),f=N(d),w=M(),m=h("p"),ee.c(),_=M(),b=h("div"),v=h("button"),L=V("svg"),y=V("path"),$=M(),te.c(),q=M(),x=h("div"),I=M(),H&&H.c(),c(l,"class","absolute w-full h-full rounded-md blur-[2px]"),c(l,"style",r=t[0].images&&t[0].images[0]?`background-image: url('${t[0].images[0].url}');
    background-position: center;
    background-size: cover;
    background-blend-mode: multiply;
    background-color: rgba(0, 0, 0, 0.6)
    `:"background-color: #22272E"),c(p,"class","text-left truncate font-bold -mb-1"),c(m,"class","text-left text-xs truncate mb-2"),c(y,"stroke-linecap","round"),c(y,"stroke-linejoin","round"),c(y,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),c(L,"xmlns","http://www.w3.org/2000/svg"),c(L,"fill","none"),c(L,"viewBox","0 0 24 24"),c(L,"stroke-width","2"),c(L,"stroke","currentColor"),c(L,"class",k="w-[4ch] origin-center transition-transform duration-500 "+(t[1].showMore?"rotate-180":"")),c(v,"class","text-xs svg-icon bg-black/20 p-0 text-white"),c(b,"class","flex flex-row justify-start items-center space-x-2 col-span-7"),c(u,"class","flex flex-col col-span-9"),c(o,"class","grid grid-cols-12 h-full grid-rows-1 items-center justify-center"),c(i,"class","absolute w-full h-full rounded-md"),c(n,"class","w-full h-[15vh] rounded-md relative overflow-hidden ring-1 ring-border"),c(x,"class","bg-primary h-[2px]"),ze(x,"width",t[2]+"%"),c(e,"class","w-[95%]")},m(j,U){S(j,e,U),g(e,n),g(n,l),g(n,s),g(n,i),g(i,o),F.m(o,null),g(o,a),g(o,u),g(u,p),g(p,f),g(u,w),g(u,m),ee.m(m,null),g(u,_),g(u,b),g(b,v),g(v,L),g(L,y),g(b,$),te.m(b,null),g(e,q),g(e,x),g(e,I),H&&H.m(e,null),E||(K=P(v,"click",t[5]),E=!0)},p(j,[U]){U&1&&r!==(r=j[0].images&&j[0].images[0]?`background-image: url('${j[0].images[0].url}');
    background-position: center;
    background-size: cover;
    background-blend-mode: multiply;
    background-color: rgba(0, 0, 0, 0.6)
    `:"background-color: #22272E")&&c(l,"style",r),ce===(ce=pe(j))&&F?F.p(j,U):(F.d(1),F=ce(j),F&&(F.c(),F.m(o,a))),U&1&&d!==(d=j[0].name+"")&&ne(f,d),Oe===(Oe=se(j))&&ee?ee.p(j,U):(ee.d(1),ee=Oe(j),ee&&(ee.c(),ee.m(m,null))),U&2&&k!==(k="w-[4ch] origin-center transition-transform duration-500 "+(j[1].showMore?"rotate-180":""))&&c(L,"class",k),Ee===(Ee=tt(j))&&te?te.p(j,U):(te.d(1),te=Ee(j),te&&(te.c(),te.m(b,null))),U&4&&ze(x,"width",j[2]+"%"),j[1].showMore?H?(H.p(j,U),U&2&&A(H,1)):(H=wt(j),H.c(),A(H,1),H.m(e,null)):H&&(fe(),T(H,1,1,()=>{H=null}),de())},i(j){A(H)},o(j){T(H)},d(j){j&&C(e),F.d(),ee.d(),te.d(),H&&H.d(),E=!1,K()}}}function Ol(t,e,n){let l,r,s,i;W(t,ue,_=>n(9,s=_)),W(t,we,_=>n(10,i=_));let{playlist:o}=e;const a=$e({showMore:!1,detailedLoaded:!1,id:void 0,tracks:[],download:{stage:"",status:{},done:!1},downloading:!1,memblobs:[]});W(t,a,_=>n(1,l=_));let u=Je(0,{duration:1e3,easing:Pt});W(t,u,_=>n(2,r=_));const p=async()=>{l.showMore?O(a,l.showMore=!1,l):(l.detailedLoaded||await d(),O(a,l.showMore=!0,l))},d=async()=>{const b=new URL(o.external_url).pathname.split("/")[2];B("loading playlist information",!0,1,async v=>{let L=await ae.getPlaylistInfo(b);O(a,l.tracks=L,l),O(a,l.detailedLoaded=!0,l),v()})},f=()=>{l.memblobs.forEach(({blob:_,id:b},v)=>{const L=URL.createObjectURL(_),y=document.createElement("a");y.href=L,y.download=`${b}.mp3`,y.click()})},w=()=>{B("saving to Cartier",!0,10,_=>{const b=i.handle.tracksDir;l.memblobs.forEach(async({blob:v,id:L})=>{const k=await(await b.getFileHandle(`${L}.mp3`,{create:!0})).createWritable();await k.write(v),await k.close()}),O(ue,s.playlists=[...s.playlists,{name:o.name,url:o.external_url,desc:o.description,owner:o.owner.display_name,tracks:[...l.tracks.map(v=>({id:v.id,name:v.name}))],id:o.id}],s),_(),B("saved to Cartier!",!1,2)})},m=async()=>{if(l.detailedLoaded||await d(),!l.tracks)return;if(l.tracks.length==0){B("nothing to download");return}O(a,l.downloading=!0,l),O(a,l.download.stage="converting",l),u.set(0,{duration:1}),u.set(10,{duration:1e4});let _=l.tracks[0];ae.getDownloadTrack(_.url,"",!0).then(async b=>{if(b.success==!1){O(u,r=0,r),O(a,l.downloading=!1,l),B(`serverErr: ${b.info}`);return}const v=b.data.key;O(a,l.download.status[_.id]="downloading",l);for(const[y,k]of[...l.tracks].splice(1).entries())O(a,l.download.status[k.id]="downloading",l),(await ae.getDownloadTrack(k.url,v,!1)).success==!1&&B(`failed downloading track (${k.name})`);await u.set(10);const L=async()=>{let y=await ae.getDownloadStatus(v);const k=y.data.filter($=>$.status!=="downloading");if(y.data.forEach($=>{O(a,l.download.status[$.id]=$.status,l)}),O(u,r=k.length/y.data.length*40+10,r),k.length==y.data.length){O(a,l.download.stage="downloading",l);for(let $=0;$<k.length;$++){let[q,x,I]=await ae.getStreamPlaylist(v);if(!q){B(`failed downloading a track (in "${o.name}")`);continue}O(a,l.memblobs=[...l.memblobs,{blob:x,id:I}],l),O(u,r=($+1)/k.length*50+50,r)}await u.set(100,{duration:500}),O(a,l.downloading=!1,l),O(a,l.download.done=!0,l);return}setTimeout(L,7500)};setTimeout(L,5e3)})};return t.$$set=_=>{"playlist"in _&&n(0,o=_.playlist)},[o,l,r,a,u,p,f,w,m]}class El extends X{constructor(e){super(),Q(this,e,Ol,Al,R,{playlist:0})}}function vt(t,e,n){const l=t.slice();return l[9]=e[n],l}function bt(t,e,n){const l=t.slice();return l[9]=e[n],l}function Dl(t){let e,n,l=re(t[2]||[]),r=[];for(let i=0;i<l.length;i+=1)r[i]=yt(vt(t,l,i));const s=i=>T(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=ke()},m(i,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,o);S(i,e,o),n=!0},p(i,o){if(o&4){l=re(i[2]||[]);let a;for(a=0;a<l.length;a+=1){const u=vt(i,l,a);r[a]?(r[a].p(u,o),A(r[a],1)):(r[a]=yt(u),r[a].c(),A(r[a],1),r[a].m(e.parentNode,e))}for(fe(),a=l.length;a<r.length;a+=1)s(a);de()}},i(i){if(!n){for(let o=0;o<l.length;o+=1)A(r[o]);n=!0}},o(i){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)T(r[o]);n=!1},d(i){i&&C(e),Ae(r,i)}}}function Tl(t){let e,n,l,r;const s=[Pl,Fl],i=[];function o(a,u){return!a[3].playlists||a[3].playlists.length==0?0:1}return e=o(t),n=i[e]=s[e](t),{c(){n.c(),l=ke()},m(a,u){i[e].m(a,u),S(a,l,u),r=!0},p(a,u){let p=e;e=o(a),e===p?i[e].p(a,u):(fe(),T(i[p],1,1,()=>{i[p]=null}),de(),n=i[e],n?n.p(a,u):(n=i[e]=s[e](a),n.c()),A(n,1),n.m(l.parentNode,l))},i(a){r||(A(n),r=!0)},o(a){T(n),r=!1},d(a){a&&C(l),i[e].d(a)}}}function yt(t){let e,n;return e=new El({props:{playlist:t[9]}}),{c(){le(e.$$.fragment)},m(l,r){Y(e,l,r),n=!0},p(l,r){const s={};r&4&&(s.playlist=l[9]),e.$set(s)},i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function Fl(t){let e,n,l=re(t[3].playlists||[]),r=[];for(let i=0;i<l.length;i+=1)r[i]=kt(bt(t,l,i));const s=i=>T(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=ke()},m(i,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,o);S(i,e,o),n=!0},p(i,o){if(o&8){l=re(i[3].playlists||[]);let a;for(a=0;a<l.length;a+=1){const u=bt(i,l,a);r[a]?(r[a].p(u,o),A(r[a],1)):(r[a]=kt(u),r[a].c(),A(r[a],1),r[a].m(e.parentNode,e))}for(fe(),a=l.length;a<r.length;a+=1)s(a);de()}},i(i){if(!n){for(let o=0;o<l.length;o+=1)A(r[o]);n=!0}},o(i){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)T(r[o]);n=!1},d(i){i&&C(e),Ae(r,i)}}}function Pl(t){let e;return{c(){e=h("p"),e.textContent="no downloads",c(e,"class","pt-10")},m(n,l){S(n,e,l)},p:D,i:D,o:D,d(n){n&&C(e)}}}function kt(t){let e,n;return e=new bl({props:{playlist:t[9]}}),{c(){le(e.$$.fragment)},m(l,r){Y(e,l,r),n=!0},p(l,r){const s={};r&8&&(s.playlist=l[9]),e.$set(s)},i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function Nl(t){let e,n,l,r,s,i,o,a,u,p,d,f,w,m,_;const b=[Tl,Dl],v=[];function L(y,k){return y[1].view.tab==Z.DOWNLOADED?0:1}return u=L(t),p=v[u]=b[u](t),{c(){e=h("div"),n=h("div"),l=h("div"),r=M(),s=h("button"),s.textContent="playlists",i=h("button"),i.textContent="downloaded",o=M(),a=h("div"),p.c(),c(l,"class","bg-border h-full absolute rounded-xl z-10"),c(s,"id","playlistbtn"),c(s,"class","svelte-7mzzq1"),c(i,"id","downloadedbtn"),c(i,"class","svelte-7mzzq1"),c(n,"class","stickytoggle z-10 sticky top-2 w-min flex flex-row items-center justify-between rounded-xl bg-foreground ring-1 ring-border mx-auto svelte-7mzzq1"),c(a,"class","flex flex-col justify-center items-center w-full space-y-2 pb-1 relative"),c(e,"class","h-[82vh] overflow-y-scroll w-[100vw]"),c(e,"style",f=t[1].view.tab in[Z.PLAYLISTS,Z.DOWNLOADED]?"":"display: none")},m(y,k){S(y,e,k),g(e,n),g(n,l),t[4](l),g(n,r),g(n,s),g(n,i),g(e,o),g(e,a),v[u].m(a,null),w=!0,m||(_=[P(s,"click",t[5]),P(i,"click",t[6])],m=!0)},p(y,[k]){let $=u;u=L(y),u===$?v[u].p(y,k):(fe(),T(v[$],1,1,()=>{v[$]=null}),de(),p=v[u],p?p.p(y,k):(p=v[u]=b[u](y),p.c()),A(p,1),p.m(a,null)),(!w||k&2&&f!==(f=y[1].view.tab in[Z.PLAYLISTS,Z.DOWNLOADED]?"":"display: none"))&&c(e,"style",f)},i(y){w||(A(p),y&&(d||oe(()=>{d=tl(a,qe,{duration:1e3}),d.start()})),w=!0)},o(y){T(p),w=!1},d(y){y&&C(e),t[4](null),v[u].d(),m=!1,J(_)}}}function Hl(t,e,n){let l,r;W(t,z,f=>n(1,l=f)),W(t,ue,f=>n(3,r=f));let s,i={left:Je(0,{duration:50,easing:it}),width:Je(0,{duration:50,easing:it})},o=[];Be(()=>{n(2,o=l.playlists.all.filter(f=>{let w=!1;for(let m of r.playlists)if(m.id==f.id){w=!0;break}return!w}))}),i.left.subscribe(f=>{s&&n(0,s.style.left=`${f}px`,s)}),i.width.subscribe(f=>{s&&n(0,s.style.width=`${f}px`,s)});function u(f){Me[f?"unshift":"push"](()=>{s=f,n(0,s)})}const p=()=>O(z,l.view.tab=Z.PLAYLISTS,l),d=()=>O(z,l.view.tab=Z.DOWNLOADED,l);return t.$$.update=()=>{if(t.$$.dirty&3&&s)switch(l.view.tab){case Z.PLAYLISTS:i.left.set(0),i.width.set(document.getElementById("playlistbtn").clientWidth);break;case Z.DOWNLOADED:i.left.set(document.getElementById("playlistbtn").clientWidth),i.width.set(document.getElementById("downloadedbtn").clientWidth);break}},[s,l,o,r,u,p,d]}class Il extends X{constructor(e){super(),Q(this,e,Hl,Nl,R,{})}}function $t(t){let e,n,l,r,s,i,o,a,u;function p(w,m){return w[0].user.images&&w[0].user.images.length>0?Zl:Bl}let d=p(t),f=d(t);return{c(){e=h("div"),n=h("button"),n.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[3em]"><path d="M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"></path><path d="m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"></path></svg>
      home`,l=M(),r=h("button"),f.c(),s=N(`
      account`),i=M(),o=h("button"),o.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[3em]"><path fill-rule="evenodd" d="M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z" clip-rule="evenodd"></path></svg>
      settings`,c(n,"class","flex flex-col items-center justify-center bg-transparent text-white text-xs svelte-gbqgsd"),c(r,"class","flex flex-col items-center justify-center bg-transparent text-white text-xs svelte-gbqgsd"),c(o,"class","flex flex-col items-center justify-center bg-transparent text-white text-xs svelte-gbqgsd"),c(e,"class","container flex flex-row justify-around items-center h-[11vh] bg-gradient-to-t from-background to-border w-[95vw] rounded-b-xl ring-1 ring-border py-5 svelte-gbqgsd")},m(w,m){S(w,e,m),g(e,n),g(e,l),g(e,r),f.m(r,null),g(r,s),g(e,i),g(e,o),a||(u=[P(n,"click",t[1]),P(r,"click",t[2]),P(o,"click",t[3])],a=!0)},p(w,m){d===(d=p(w))&&f?f.p(w,m):(f.d(1),f=d(w),f&&(f.c(),f.m(r,s)))},d(w){w&&C(e),f.d(),a=!1,J(u)}}}function Bl(t){let e;return{c(){e=N("open")},m(n,l){S(n,e,l)},p:D,d(n){n&&C(e)}}}function Zl(t){let e,n,l;return{c(){e=h("img"),c(e,"loading","lazy"),be(e.src,n=t[0].user.images[0].url)||c(e,"src",n),c(e,"alt",l=`${t[0].user.display_name}'s profile picture`),c(e,"class","rounded-full w-[4em] ring-border ring-1 aspect-square")},m(r,s){S(r,e,s)},p(r,s){s&1&&!be(e.src,n=r[0].user.images[0].url)&&c(e,"src",n),s&1&&l!==(l=`${r[0].user.display_name}'s profile picture`)&&c(e,"alt",l)},d(r){r&&C(e)}}}function Ul(t){let e,n=t[0].logged&&$t(t);return{c(){n&&n.c(),e=ke()},m(l,r){n&&n.m(l,r),S(l,e,r)},p(l,[r]){l[0].logged?n?n.p(l,r):(n=$t(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:D,o:D,d(l){l&&C(e),n&&n.d(l)}}}function Wl(t,e,n){let l;return W(t,z,o=>n(0,l=o)),[l,()=>{O(z,l.view.tab=Z.PLAYLISTS,l)},()=>{O(z,l.view.tab=Z.ACCOUNT,l)},()=>{O(z,l.view.tab=Z.SETTINGS,l)}]}class zl extends X{constructor(e){super(),Q(this,e,Wl,Ul,R,{})}}function Vl(t){let e,n,l,r,s,i,o;return n=new Il({}),r=new wl({}),i=new zl({}),{c(){e=h("div"),le(n.$$.fragment),l=M(),le(r.$$.fragment),s=M(),le(i.$$.fragment),c(e,"class","flex flex-col items-center justify-center")},m(a,u){S(a,e,u),Y(n,e,null),g(e,l),Y(r,e,null),g(e,s),Y(i,e,null),o=!0},p:D,i(a){o||(A(n.$$.fragment,a),A(r.$$.fragment,a),A(i.$$.fragment,a),o=!0)},o(a){T(n.$$.fragment,a),T(r.$$.fragment,a),T(i.$$.fragment,a),o=!1},d(a){a&&C(e),G(n),G(r),G(i)}}}class Rl extends X{constructor(e){super(),Q(this,e,null,Vl,R,{})}}function Yl(t){let e,n;const l=t[1].default,r=St(l,t,t[0],null);return{c(){e=h("div"),r&&r.c(),c(e,"class","max-h-[90%] max-w-[90%]")},m(s,i){S(s,e,i),r&&r.m(e,null),n=!0},p(s,[i]){r&&r.p&&(!n||i&1)&&qt(r,l,s,s[0],n?Mt(l,s[0],i,null):jt(s[0]),null)},i(s){n||(A(r,s),n=!0)},o(s){T(r,s),n=!1},d(s){s&&C(e),r&&r.d(s)}}}function Gl(t,e,n){let{$$slots:l={},$$scope:r}=e;return t.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,l]}class Jl extends X{constructor(e){super(),Q(this,e,Gl,Yl,R,{})}}function Ql(t){let e,n;return e=new Rl({}),{c(){le(e.$$.fragment)},m(l,r){Y(e,l,r),n=!0},p:D,i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function Xl(t){let e,n;return e=new Jl({props:{$$slots:{default:[Kl]},$$scope:{ctx:t}}}),{c(){le(e.$$.fragment)},m(l,r){Y(e,l,r),n=!0},p(l,r){const s={};r&16&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function Kl(t){let e,n;return e=new gl({props:{handleUsername:t[1]}}),{c(){le(e.$$.fragment)},m(l,r){Y(e,l,r),n=!0},p:D,i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function en(t){let e,n,l,r,s,i,o,a,u,p;const d=[Xl,Ql],f=[];function w(m,_){return m[0].logged==!1?0:1}return s=w(t),i=f[s]=d[s](t),{c(){e=h("div"),n=M(),l=h("main"),r=h("div"),i.c(),o=M(),a=h("div"),c(e,"class","bg-foreground/90 p-1 rounded-md w-[80vw] max-w-[90vw] z-[1000]"),ze(e,"display","none"),c(a,"class","absolute left-0 top-[1em] w-full flex flex-col items-center justify-center space-y-1 text-xs"),c(r,"class","flex flex-col justify-center items-center relative h-[100%] bg-background"),c(l,"class","w-screen h-screen text-white text-xl select-none text-center")},m(m,_){S(m,e,_),t[2](e),S(m,n,_),S(m,l,_),g(l,r),f[s].m(r,null),g(r,o),g(r,a),t[3](a),p=!0},p(m,[_]){let b=s;s=w(m),s===b?f[s].p(m,_):(fe(),T(f[b],1,1,()=>{f[b]=null}),de(),i=f[s],i?i.p(m,_):(i=f[s]=d[s](m),i.c()),A(i,1),i.m(r,o))},i(m){p||(A(i),m&&oe(()=>{p&&(u||(u=ye(a,qe,{duration:1e4},!0)),u.run(1))}),p=!0)},o(m){T(i),m&&(u||(u=ye(a,qe,{duration:1e4},!1)),u.run(0)),p=!1},d(m){m&&(C(e),C(n),C(l)),t[2](null),f[s].d(),t[3](null),m&&u&&u.end()}}}let Pe,Nt;const B=(t,e=!1,n=3,l)=>{const r=Nt.cloneNode(!0);r.innerHTML=e?`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.2em] animate-spin inline aspect-square mr-1" > <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" /> </svg>${t}`:t,r.style.display="block",Pe.appendChild(r),l?l(()=>Pe.removeChild(r)):setTimeout(()=>Pe.removeChild(r),n*1e3)};function tn(t,e,n){let l;W(t,z,o=>n(0,l=o));const r=async o=>{await je.login(o)};Be(je.initCartierFile);function s(o){Me[o?"unshift":"push"](()=>{Nt=o})}function i(o){Me[o?"unshift":"push"](()=>{Pe=o})}return[l,r,s,i]}class ln extends X{constructor(e){super(),Q(this,e,tn,en,R,{})}}new ln({target:document.getElementById("app")});
