var Pt=Object.defineProperty;var It=(t,e,l)=>e in t?Pt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Ue=(t,e,l)=>(It(t,typeof e!="symbol"?e+"":e,l),l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function l(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=l(r);fetch(r.href,i)}})();function D(){}const Je=t=>t;function We(t,e){for(const l in e)t[l]=e[l];return t}function kt(t){return t()}function nt(){return Object.create(null)}function W(t){t.forEach(kt)}function Ie(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Oe;function be(t,e){return t===e?!0:(Oe||(Oe=document.createElement("a")),Oe.href=e,t===Oe.href)}function Ht(t){return Object.keys(t).length===0}function $t(t,...e){if(t==null){for(const n of e)n(void 0);return D}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function Ee(t){let e;return $t(t,l=>e=l)(),e}function G(t,e,l){t.$$.on_destroy.push($t(e,l))}function xt(t,e,l,n){if(t){const r=St(t,e,l,n);return t[0](r)}}function St(t,e,l,n){return t[1]&&n?We(l.ctx.slice(),t[1](n(e))):l.ctx}function Ct(t,e,l,n){if(t[2]&&n){const r=t[2](n(l));if(e.dirty===void 0)return r;if(typeof r=="object"){const i=[],s=Math.max(e.dirty.length,r.length);for(let o=0;o<s;o+=1)i[o]=e.dirty[o]|r[o];return i}return e.dirty|r}return e.dirty}function Lt(t,e,l,n,r,i){if(r){const s=St(e,l,n,i);t.p(s,r)}}function Mt(t){if(t.ctx.length>32){const e=[],l=t.ctx.length/32;for(let n=0;n<l;n++)e[n]=-1;return e}return-1}function O(t,e,l){return t.set(l),e}function Ut(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const qt=typeof window<"u";let Qe=qt?()=>window.performance.now():()=>Date.now(),Xe=qt?t=>requestAnimationFrame(t):D;const we=new Set;function jt(t){we.forEach(e=>{e.c(t)||(we.delete(e),e.f())}),we.size!==0&&Xe(jt)}function Ke(t){let e;return we.size===0&&Xe(jt),{promise:new Promise(l=>{we.add(e={c:t,f:l})}),abort(){we.delete(e)}}}function g(t,e){t.appendChild(e)}function At(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Bt(t){const e=h("style");return e.textContent="/* empty */",Wt(At(t),e),e.sheet}function Wt(t,e){return g(t.head||t,e),e.sheet}function S(t,e,l){t.insertBefore(e,l||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function He(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function h(t){return document.createElement(t)}function J(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function P(t){return document.createTextNode(t)}function C(){return P(" ")}function ye(){return P("")}function T(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function u(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function zt(t){return Array.from(t.childNodes)}function fe(t,e){e=""+e,t.data!==e&&(t.data=e)}function lt(t,e){t.value=e??""}function ze(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,n?"important":"")}function rt(t,e,l){t.classList.toggle(e,!!l)}function Zt(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}const Te=new Map;let Ne=0;function Vt(t){let e=5381,l=t.length;for(;l--;)e=(e<<5)-e^t.charCodeAt(l);return e>>>0}function Rt(t,e){const l={stylesheet:Bt(e),rules:{}};return Te.set(t,l),l}function Ze(t,e,l,n,r,i,s,o=0){const a=16.666/n;let c=`{
`;for(let b=0;b<=1;b+=a){const y=e+(l-e)*i(b);c+=b*100+`%{${s(y,1-y)}}
`}const f=c+`100% {${s(l,1-l)}}
}`,d=`__svelte_${Vt(f)}_${o}`,p=At(t),{stylesheet:_,rules:m}=Te.get(p)||Rt(p,t);m[d]||(m[d]=!0,_.insertRule(`@keyframes ${d} ${f}`,_.cssRules.length));const w=t.style.animation||"";return t.style.animation=`${w?`${w}, `:""}${d} ${n}ms linear ${r}ms 1 both`,Ne+=1,d}function Ve(t,e){const l=(t.style.animation||"").split(", "),n=l.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),r=l.length-n.length;r&&(t.style.animation=n.join(", "),Ne-=r,Ne||Yt())}function Yt(){Xe(()=>{Ne||(Te.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&x(e)}),Te.clear())})}let Ce;function xe(t){Ce=t}function Gt(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function et(t){Gt().$$.on_mount.push(t)}const me=[],Le=[];let _e=[];const it=[],Jt=Promise.resolve();let Re=!1;function Qt(){Re||(Re=!0,Jt.then(Ot))}function ne(t){_e.push(t)}const Be=new Set;let pe=0;function Ot(){if(pe!==0)return;const t=Ce;do{try{for(;pe<me.length;){const e=me[pe];pe++,xe(e),Xt(e.$$)}}catch(e){throw me.length=0,pe=0,e}for(xe(null),me.length=0,pe=0;Le.length;)Le.pop()();for(let e=0;e<_e.length;e+=1){const l=_e[e];Be.has(l)||(Be.add(l),l())}_e.length=0}while(me.length);for(;it.length;)it.pop()();Re=!1,Be.clear(),xe(t)}function Xt(t){if(t.fragment!==null){t.update(),W(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ne)}}function Kt(t){const e=[],l=[];_e.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),_e=e}let $e;function Et(){return $e||($e=Promise.resolve(),$e.then(()=>{$e=null})),$e}function Se(t,e,l){t.dispatchEvent(Zt(`${e?"intro":"outro"}${l}`))}const De=new Set;let te;function se(){te={r:0,c:[],p:te}}function oe(){te.r||W(te.c),te=te.p}function L(t,e){t&&t.i&&(De.delete(t),t.i(e))}function q(t,e,l,n){if(t&&t.o){if(De.has(t))return;De.add(t),te.c.push(()=>{De.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}const Dt={duration:0};function en(t,e,l){const n={direction:"in"};let r=e(t,l,n),i=!1,s,o,a=0;function c(){s&&Ve(t,s)}function f(){const{delay:p=0,duration:_=300,easing:m=Je,tick:w=D,css:b}=r||Dt;b&&(s=Ze(t,0,1,_,p,m,b,a++)),w(0,1);const y=Qe()+p,v=y+_;o&&o.abort(),i=!0,ne(()=>Se(t,!0,"start")),o=Ke(k=>{if(i){if(k>=v)return w(1,0),Se(t,!0,"end"),c(),i=!1;if(k>=y){const $=m((k-y)/_);w($,1-$)}}return i})}let d=!1;return{start(){d||(d=!0,Ve(t),Ie(r)?(r=r(n),Et().then(f)):f())},invalidate(){d=!1},end(){i&&(c(),i=!1)}}}function ve(t,e,l,n){let i=e(t,l,{direction:"both"}),s=n?0:1,o=null,a=null,c=null,f;function d(){c&&Ve(t,c)}function p(m,w){const b=m.b-s;return w*=Math.abs(b),{a:s,b:m.b,d:b,duration:w,start:m.start,end:m.start+w,group:m.group}}function _(m){const{delay:w=0,duration:b=300,easing:y=Je,tick:v=D,css:k}=i||Dt,$={start:Qe()+w,b:m};m||($.group=te,te.r+=1),"inert"in t&&(m?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),o||a?a=$:(k&&(d(),c=Ze(t,s,m,b,w,y,k)),m&&v(0,1),o=p($,b),ne(()=>Se(t,m,"start")),Ke(j=>{if(a&&j>a.start&&(o=p(a,b),a=null,Se(t,o.b,"start"),k&&(d(),c=Ze(t,s,o.b,o.duration,0,y,i.css))),o){if(j>=o.end)v(s=o.b,1-s),Se(t,o.b,"end"),a||(o.b?d():--o.group.r||W(o.group.c)),o=null;else if(j>=o.start){const A=j-o.start;s=o.a+o.d*y(A/o.duration),v(s,1-s)}}return!!(o||a)}))}return{run(m){Ie(i)?Et().then(()=>{i=i({direction:m?"in":"out"}),_(m)}):_(m)},end(){d(),o=a=null}}}function ie(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Q(t){t&&t.c()}function Z(t,e,l){const{fragment:n,after_update:r}=t.$$;n&&n.m(e,l),ne(()=>{const i=t.$$.on_mount.map(kt).filter(Ie);t.$$.on_destroy?t.$$.on_destroy.push(...i):W(i),t.$$.on_mount=[]}),r.forEach(ne)}function V(t,e){const l=t.$$;l.fragment!==null&&(Kt(l.after_update),W(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function tn(t,e){t.$$.dirty[0]===-1&&(me.push(t),Qt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(t,e,l,n,r,i,s=null,o=[-1]){const a=Ce;xe(t);const c=t.$$={fragment:null,ctx:[],props:i,update:D,not_equal:r,bound:nt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:nt(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};s&&s(c.root);let f=!1;if(c.ctx=l?l(t,e.props||{},(d,p,..._)=>{const m=_.length?_[0]:p;return c.ctx&&r(c.ctx[d],c.ctx[d]=m)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](m),f&&tn(t,d)),p}):[],c.update(),f=!0,W(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const d=zt(e.target);c.fragment&&c.fragment.l(d),d.forEach(x)}else c.fragment&&c.fragment.c();e.intro&&L(t.$$.fragment),Z(t,e.target,e.anchor),Ot()}xe(a)}class K{constructor(){Ue(this,"$$");Ue(this,"$$set")}$destroy(){V(this,1),this.$destroy=D}$on(e,l){if(!Ie(l))return D;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const r=n.indexOf(l);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!Ht(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nn);window["cartier-server-url"]="https://cartier-backend-1.onrender.com";const re={getRoot:async()=>await(await fetch(`${window["cartier-server-url"]}/`)).json(),getUserInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/user?username=${t}`)).json(),getPlaylistInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/playlist?id=${t}`)).json(),getDownloadPlaylist:async t=>await(await fetch(`${window["cartier-server-url"]}/download?link=${t}`)).json(),getDownloadStatus:async t=>await(await fetch(`${window["cartier-server-url"]}/status?key=${t}`)).json(),getDownloadTrack:async(t,e="",l=!1)=>await(await fetch(`${window["cartier-server-url"]}/track?link=${t}&key=${e}&create=${l}`)).json(),getStreamPlaylist:async t=>{let e=await fetch(`${window["cartier-server-url"]}/stream?key=${t}`);return[await e.ok,await e.blob(),e.headers.get("x-trackid")]}},ge=[];function ke(t,e=D){let l;const n=new Set;function r(o){if(z(t,o)&&(t=o,l)){const a=!ge.length;for(const c of n)c[1](),ge.push(c,t);if(a){for(let c=0;c<ge.length;c+=2)ge[c][0](ge[c+1]);ge.length=0}}}function i(o){r(o(t))}function s(o,a=D){const c=[o,a];return n.add(c),n.size===1&&(l=e(r,i)||D),o(t),()=>{n.delete(c),n.size===0&&l&&(l(),l=null)}}return{set:r,update:i,subscribe:s}}function st(t){return 1-Math.sqrt(1-t*t)}function Ft(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function ln(t){const e=t-1;return e*e*e+1}function ot(t,{delay:e=0,duration:l=400,easing:n=Ft,amount:r=5,opacity:i=0}={}){const s=getComputedStyle(t),o=+s.opacity,a=s.filter==="none"?"":s.filter,c=o*(1-i),[f,d]=Ut(r);return{delay:e,duration:l,easing:n,css:(p,_)=>`opacity: ${o-c*_}; filter: ${a} blur(${_*f}${d});`}}function Me(t,{delay:e=0,duration:l=400,easing:n=ln,axis:r="y"}={}){const i=getComputedStyle(t),s=+i.opacity,o=r==="y"?"height":"width",a=parseFloat(i[o]),c=r==="y"?["top","bottom"]:["left","right"],f=c.map(y=>`${y[0].toUpperCase()}${y.slice(1)}`),d=parseFloat(i[`padding${f[0]}`]),p=parseFloat(i[`padding${f[1]}`]),_=parseFloat(i[`margin${f[0]}`]),m=parseFloat(i[`margin${f[1]}`]),w=parseFloat(i[`border${f[0]}Width`]),b=parseFloat(i[`border${f[1]}Width`]);return{delay:e,duration:l,easing:n,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*s};${o}: ${y*a}px;padding-${c[0]}: ${y*d}px;padding-${c[1]}: ${y*p}px;margin-${c[0]}: ${y*_}px;margin-${c[1]}: ${y*m}px;border-${c[0]}-width: ${y*w}px;border-${c[1]}-width: ${y*b}px;`}}function at(t){let e,l,n,r;const i=t[2].default,s=xt(i,t,t[1],null);return{c(){e=h("div"),l=h("div"),s&&s.c(),u(l,"class","bg-foreground p-2 rounded-md ring-1 ring-border max-w-[90vw] flex flex-col"),u(e,"class","absolute top-0 left-0 w-full h-full backdrop-blur-md flex flex-col items-center justify-center text-center text-xs")},m(o,a){S(o,e,a),g(e,l),s&&s.m(l,null),r=!0},p(o,a){s&&s.p&&(!r||a&2)&&Lt(s,i,o,o[1],r?Ct(i,o[1],a,null):Mt(o[1]),null)},i(o){r||(L(s,o),o&&ne(()=>{r&&(n||(n=ve(e,ot,{duration:500},!0)),n.run(1))}),r=!0)},o(o){q(s,o),o&&(n||(n=ve(e,ot,{duration:500},!1)),n.run(0)),r=!1},d(o){o&&x(e),s&&s.d(o),o&&n&&n.end()}}}function rn(t){let e,l,n=!t[0]&&at(t);return{c(){n&&n.c(),e=ye()},m(r,i){n&&n.m(r,i),S(r,e,i),l=!0},p(r,[i]){r[0]?n&&(se(),q(n,1,1,()=>{n=null}),oe()):n?(n.p(r,i),i&1&&L(n,1)):(n=at(r),n.c(),L(n,1),n.m(e.parentNode,e))},i(r){l||(L(n),l=!0)},o(r){q(n),l=!1},d(r){r&&x(e),n&&n.d(r)}}}function sn(t,e,l){let{$$slots:n={},$$scope:r}=e,{hidden:i=!1}=e;return t.$$set=s=>{"hidden"in s&&l(0,i=s.hidden),"$$scope"in s&&l(1,r=s.$$scope)},[i,r,n]}class on extends K{constructor(e){super(),X(this,e,sn,rn,z,{hidden:0})}}function ct(t){let e,l;return{c(){e=J("svg"),l=J("path"),u(l,"stroke-linecap","round"),u(l,"stroke-linejoin","round"),u(l,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"class","aspect-square w-[1.2em] animate-spin inline")},m(n,r){S(n,e,r),g(e,l)},d(n){n&&x(e)}}}function an(t){let e,l,n,r,i,s,o=t[0].step+"",a,c=t[0].is&&ct();return{c(){e=h("h1"),e.textContent="Starting Up Servers!",l=C(),n=h("p"),n.textContent=`Our servers take a little break every few minutes when things quiet down.
    We're in the process of waking them up for you. It's automatic, so no need
    to stress!`,r=C(),i=h("p"),c&&c.c(),s=C(),a=P(o),u(e,"class","text-2xl"),u(n,"class","text-xs text-white/70 inline"),u(i,"class","inline"),rt(i,"text-green-500",!t[0].is)},m(f,d){S(f,e,d),S(f,l,d),S(f,n,d),S(f,r,d),S(f,i,d),c&&c.m(i,null),g(i,s),g(i,a)},p(f,d){f[0].is?c||(c=ct(),c.c(),c.m(i,s)):c&&(c.d(1),c=null),d&1&&o!==(o=f[0].step+"")&&fe(a,o),d&1&&rt(i,"text-green-500",!f[0].is)},d(f){f&&(x(e),x(l),x(n),x(r),x(i)),c&&c.d()}}}function cn(t){let e,l;return e=new on({props:{hidden:!t[0].is,$$slots:{default:[an]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(n,r){Z(e,n,r),l=!0},p(n,[r]){const i={};r&1&&(i.hidden=!n[0].is),r&9&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){l||(L(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){V(e,n)}}}function un(t,e,l){let n;const r=ke({step:"trying to make contact",is:!0});G(t,r,s=>l(0,n=s));let{handleWakeup:i}=e;return et(()=>{O(r,n.step="waking up servers",n),re.getRoot().then(s=>{O(r,n.is=!1,n),O(r,n.step="servers are running!",n),i()}).catch(s=>{H(`servers are unreachable (${s})`),O(r,n.step="servers are unreachable (reload?)",n)})}),t.$$set=s=>{"handleWakeup"in s&&l(2,i=s.handleWakeup)},[n,r,i]}class fn extends K{constructor(e){super(),X(this,e,un,cn,z,{handleWakeup:2})}}function dn(t){let e,l,n,r,i,s,o,a,c,f,d,p,_,m,w,b,y,v,k,$,j,A,N,ae,le,ce,de,ue;return e=new fn({props:{handleWakeup:t[2]}}),{c(){Q(e.$$.fragment),l=C(),n=h("div"),r=h("div"),i=h("p"),i.textContent="Welcome aboard!",s=C(),o=h("div"),a=h("div"),c=h("label"),f=h("input"),d=C(),p=h("button"),p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline rounded-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg>',_=C(),m=h("p"),m.textContent="copy your Spotify profile link from your account page",w=C(),b=h("div"),y=h("div"),v=h("label"),k=h("input"),$=C(),j=h("span"),j.textContent="save",A=C(),N=h("button"),N.textContent="continue",ae=C(),le=h("details"),le.innerHTML=`<summary class="font-bold mb-2">Know Cartier Manager, The Free Spotify Playlist Downloader</summary> <p class="mb-4">Mobile-friendly, free-to-use Spotify playlist downloader. Share your
          Spotify profile link to effortlessly download all your public
          playlists.</p> <p>Powered by <code>spotify-dl</code> on our servers, Cartier finds and downloads
          songs from YouTube and Deezer based on Spotify data.</p>`,u(i,"class","text-3xl font-black text-white border-border border-b-2 rounded-xl px-2 pb-1"),u(f,"id","spotifyprofilelinkinput"),u(f,"type","text"),u(f,"class","w-full"),u(f,"placeholder","type Spotify profile link"),u(f,"autocomplete","url"),u(f,"aria-label","type spotify profile link"),u(c,"for","spotifyprofilelinkinput"),u(p,"class","bg-background text-white ring-1 ring-border"),u(p,"aria-label","paste spotify profile link from clipboard"),u(a,"class","w-full flex flex-row items-center justify-center space-x-2"),u(m,"class","text-xs svg-icon mt-[0.5em]"),u(o,"class","flex flex-col items-center justify-center"),u(k,"type","checkbox"),u(k,"id","dopersistbtn"),u(k,"class","inline"),u(j,"class","align-middle"),u(v,"for","dopersistbtn"),u(v,"class","text-base flex flex-row space-x-2 bg-black p-2 rounded-md"),u(N,"class","hover:scale-110"),u(y,"class","flex flex-row items-center justify-center space-x-3"),u(le,"class","text-xs w-11/12"),u(b,"class","flex flex-col space-x-[0.5em]"),u(r,"class","flex flex-col items-center text-center justify-center bg-foreground ring-1 ring-border rounded-md w-11/12 space-y-7 p-3 max-w-[90vw] h-full"),u(n,"class","flex flex-col justify-center items-center")},m(E,ee){Z(e,E,ee),S(E,l,ee),S(E,n,ee),g(n,r),g(r,i),g(r,s),g(r,o),g(o,a),g(a,c),g(c,f),lt(f,t[0]),g(a,d),g(a,p),g(o,_),g(o,m),g(r,w),g(r,b),g(b,y),g(y,v),g(v,k),k.checked=t[1],g(v,$),g(v,j),g(y,A),g(y,N),g(b,ae),g(b,le),ce=!0,de||(ue=[T(f,"input",t[6]),T(p,"click",t[3]),T(k,"change",t[7]),T(N,"click",t[4])],de=!0)},p(E,[ee]){ee&1&&f.value!==E[0]&&lt(f,E[0]),ee&2&&(k.checked=E[1])},i(E){ce||(L(e.$$.fragment,E),ce=!0)},o(E){q(e.$$.fragment,E),ce=!1},d(E){E&&(x(l),x(n)),V(e,E),de=!1,W(ue)}}}function pn(t,e,l){const n=()=>{const d=localStorage.getItem("cartier-userid");d&&(console.info("performing auto login for",d),H("performing auto-login",!0,5,async p=>{await r(d),p()}))};let{handleUsername:r}=e,i="",s=!0;const o=async()=>{navigator.clipboard.readText?l(0,i=await navigator.clipboard.readText()):H("unable to use the clipboard",!1,.5)},a=()=>{let d;try{d=new URL(i)}catch{l(0,i="");return}const p=d.pathname.split("/")[2];s&&(localStorage.setItem("cartier-userid",p),H("login information saved!")),r(p)};function c(){i=this.value,l(0,i)}function f(){s=this.checked,l(1,s)}return t.$$set=d=>{"handleUsername"in d&&l(5,r=d.handleUsername)},[i,s,n,o,a,r,c,f]}class gn extends K{constructor(e){super(),X(this,e,pn,dn,z,{handleUsername:5})}}var U=(t=>(t[t.PLAYLISTS=0]="PLAYLISTS",t[t.DOWNLOADED=1]="DOWNLOADED",t[t.SETTINGS=2]="SETTINGS",t[t.ACCOUNT=3]="ACCOUNT",t))(U||{});const B=ke({logged:!1,user:{},playlists:{downloaded:[],all:[]},view:{tab:0}}),he=ke({handle:{root:{},cartierFile:{},tracksDir:{}}}),Pe=ke({playlists:[]}),qe={setOPFSHandle:async()=>{let t=Ee(he);t.handle.root=await navigator.storage.getDirectory(),t.handle.cartierFile=await t.handle.root.getFileHandle("cartier.json",{create:!0}),t.handle.tracksDir=await t.handle.root.getDirectoryHandle("tracks",{create:!0}),he.set(t)},bufferCartierFile:async()=>{let t=Ee(he);const e=await t.handle.cartierFile.getFile();Pe.set(JSON.parse(await e.text())),Pe.subscribe(async l=>{const n=await t.handle.cartierFile.createWritable();await n.write(JSON.stringify(l)),await n.close()})},initCartierFile:async()=>{await qe.setOPFSHandle();let t=Ee(he);if((await t.handle.cartierFile.getFile()).size==0){console.info("cartier file is empty!");const l=await t.handle.cartierFile.createWritable();await l.write(JSON.stringify({info:{type:"cartier-file",version:1},playlists:[]})),await l.close()}qe.bufferCartierFile()},login:async t=>{let e=await re.getUserInfo(t);if(e.success==!1)return!1;B.set({...Ee(B),...e.data,logged:!0})},logout:async()=>{localStorage.removeItem("cartier-userid"),B.update(t=>(t.logged=!1,t.playlists={all:[],downloaded:[]},t.user={},t))}};function ut(t,e,l){const n=t.slice();return n[6]=e[l][0],n[7]=e[l][1],n}function ft(t){let e,l;return{c(){e=J("svg"),l=J("path"),u(l,"stroke-linecap","round"),u(l,"stroke-linejoin","round"),u(l,"d","M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"),u(l,"class","svelte-1qpwcl7"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"class","w-[1em] svelte-1qpwcl7")},m(n,r){S(n,e,r),g(e,l)},d(n){n&&x(e)}}}function dt(t){let e,l,n=t[6].startsWith("r"),r,i=t[6].slice(1).split("_").join(" ")+"",s,o,a,c=t[7]+"",f,d=n&&ft();return{c(){e=h("tr"),l=h("td"),d&&d.c(),r=C(),s=P(i),o=C(),a=h("td"),f=P(c),u(l,"class","svg-icon p-2 svelte-1qpwcl7"),u(a,"class","bg-transparent border-l-2 border-border svelte-1qpwcl7"),u(e,"class","odd:bg-foreground even:bg-background svelte-1qpwcl7")},m(p,_){S(p,e,_),g(e,l),d&&d.m(l,null),g(l,r),g(l,s),g(e,o),g(e,a),g(a,f)},p(p,_){_&1&&(n=p[6].startsWith("r")),n?d||(d=ft(),d.c(),d.m(l,r)):d&&(d.d(1),d=null),_&1&&i!==(i=p[6].slice(1).split("_").join(" ")+"")&&fe(s,i),_&1&&c!==(c=p[7]+"")&&fe(f,c)},d(p){p&&x(e),d&&d.d()}}}function mn(t){let e,l,n,r,i,s,o,a,c,f,d,p,_,m,w,b,y,v=ie(Object.entries(t[0])),k=[];for(let $=0;$<v.length;$+=1)k[$]=dt(ut(t,v,$));return{c(){e=h("div"),l=h("table"),n=h("thead"),n.innerHTML='<th class="svelte-1qpwcl7">parameter</th><th class="svelte-1qpwcl7">value</th>',r=C(),i=h("tbody");for(let $=0;$<k.length;$+=1)k[$].c();s=C(),o=h("div"),a=h("button"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M8.478 1.6a.75.75 0 0 1 .273 1.026 3.72 3.72 0 0 0-.425 1.121c.058.058.118.114.18.168A4.491 4.491 0 0 1 12 2.25c1.413 0 2.673.651 3.497 1.668.06-.054.12-.11.178-.167a3.717 3.717 0 0 0-.426-1.125.75.75 0 1 1 1.298-.752 5.22 5.22 0 0 1 .671 2.046.75.75 0 0 1-.187.582c-.241.27-.505.52-.787.749a4.494 4.494 0 0 1 .216 2.1c-.106.792-.753 1.295-1.417 1.403-.182.03-.364.057-.547.081.152.227.273.476.359.742a23.122 23.122 0 0 0 3.832-.803 23.241 23.241 0 0 0-.345-2.634.75.75 0 0 1 1.474-.28c.21 1.115.348 2.256.404 3.418a.75.75 0 0 1-.516.75c-1.527.499-3.119.854-4.76 1.049-.074.38-.22.735-.423 1.05 2.066.209 4.058.672 5.943 1.358a.75.75 0 0 1 .492.75 24.665 24.665 0 0 1-1.189 6.25.75.75 0 0 1-1.425-.47 23.14 23.14 0 0 0 1.077-5.306c-.5-.169-1.009-.32-1.524-.455.068.234.104.484.104.746 0 3.956-2.521 7.5-6 7.5-3.478 0-6-3.544-6-7.5 0-.262.037-.511.104-.746-.514.135-1.022.286-1.522.455.154 1.838.52 3.616 1.077 5.307a.75.75 0 1 1-1.425.468 24.662 24.662 0 0 1-1.19-6.25.75.75 0 0 1 .493-.749 24.586 24.586 0 0 1 4.964-1.24h.01c.321-.046.644-.085.969-.118a2.983 2.983 0 0 1-.424-1.05 24.614 24.614 0 0 1-4.76-1.05.75.75 0 0 1-.516-.75c.057-1.16.194-2.302.405-3.417a.75.75 0 0 1 1.474.28c-.164.862-.28 1.74-.345 2.634 1.237.371 2.517.642 3.832.803.085-.266.207-.515.359-.742a18.698 18.698 0 0 1-.547-.08c-.664-.11-1.311-.612-1.417-1.404a4.535 4.535 0 0 1 .217-2.103 6.788 6.788 0 0 1-.788-.751.75.75 0 0 1-.187-.583 5.22 5.22 0 0 1 .67-2.04.75.75 0 0 1 1.026-.273Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <a href="https://github.com/reold/cartier/issues/new" target="_blank" class="svelte-1qpwcl7">report a bug</a>',c=C(),f=h("button"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path d="M4.08 5.227A3 3 0 0 1 6.979 3H17.02a3 3 0 0 1 2.9 2.227l2.113 7.926A5.228 5.228 0 0 0 18.75 12H5.25a5.228 5.228 0 0 0-3.284 1.153L4.08 5.227Z" class="svelte-1qpwcl7"></path><path fill-rule="evenodd" d="M5.25 13.5a3.75 3.75 0 1 0 0 7.5h13.5a3.75 3.75 0 1 0 0-7.5H5.25Zm10.5 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm3.75-.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">use Render server</p>',d=C(),p=h("button"),p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] svelte-1qpwcl7"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">refresh</p> ',_=h("button"),_.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M16.5 3.75a1.5 1.5 0 0 1 1.5 1.5v13.5a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5V15a.75.75 0 0 0-1.5 0v3.75a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3V5.25a3 3 0 0 0-3-3h-6a3 3 0 0 0-3 3V9A.75.75 0 1 0 9 9V5.25a1.5 1.5 0 0 1 1.5-1.5h6Zm-5.03 4.72a.75.75 0 0 0 0 1.06l1.72 1.72H2.25a.75.75 0 0 0 0 1.5h10.94l-1.72 1.72a.75.75 0 1 0 1.06 1.06l3-3a.75.75 0 0 0 0-1.06l-3-3a.75.75 0 0 0-1.06 0Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">logout</p>',m=C(),w=h("button"),w.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">delete all downloads</p>',u(n,"class","text-xl svelte-1qpwcl7"),u(i,"class","svelte-1qpwcl7"),u(l,"class","text-sm ring-1 ring-border rounded-md min-w-[95vw] svelte-1qpwcl7"),u(a,"class","bg-black text-white svg-icon col-span-5 svelte-1qpwcl7"),u(f,"class","bg-orange-500 text-black svg-icon col-span-5 svelte-1qpwcl7"),u(p,"class","bg-primary text-black svg-icon col-span-4 svelte-1qpwcl7"),u(_,"class","bg-red-500 text-white svg-icon col-span-6 svelte-1qpwcl7"),u(w,"class","bg-red-500 text-white svg-icon col-span-10 svelte-1qpwcl7"),u(o,"class","grid grid-cols-10 gap-2 btns-tab font-bold min-w-[95vw] svelte-1qpwcl7"),u(e,"class","h-[82vh] overflow-y-scroll w-[100vw] flex flex-col items-center justify-center svelte-1qpwcl7")},m($,j){S($,e,j),g(e,l),g(l,n),g(l,r),g(l,i);for(let A=0;A<k.length;A+=1)k[A]&&k[A].m(i,null);g(e,s),g(e,o),g(o,a),g(o,c),g(o,f),g(o,d),g(o,p),g(o,_),g(o,m),g(o,w),b||(y=[T(a,"click",t[2]),T(f,"click",t[4]),T(p,"click",t[2]),T(_,"click",t[3]),T(w,"click",t[1])],b=!0)},p($,[j]){if(j&1){v=ie(Object.entries($[0]));let A;for(A=0;A<v.length;A+=1){const N=ut($,v,A);k[A]?k[A].p(N,j):(k[A]=dt(N),k[A].c(),k[A].m(i,null))}for(;A<k.length;A+=1)k[A].d(1);k.length=v.length}},i:D,o:D,d($){$&&x(e),He(k,$),b=!1,W(y)}}}function hn(t,e,l){let n;G(t,he,c=>l(5,n=c));let r={};const i=()=>{H("deleting all downloads and refreshing",!0,10,async c=>{await n.handle.root.remove({recursive:!0}),c(),window.location.reload()})},s=()=>{H("loading settings",!0,5,async c=>{const f=await navigator.storage.estimate();let d=0;f&&(d=f.usage/1024**2),l(0,r={rsaved_userid:localStorage.getItem("cartier-userid")||"not saved",rserver_url:window["cartier-server-url"],ropfs_used:`${d.toFixed(1)} MB`,wthank_you_for:"testing our beta version!"}),c()})};return et(s),[r,i,s,async()=>{await qe.logout()},()=>{window["cartier-server-url"]="https://cartier-backend-1.onrender.com",H("waking up Render server",!0,10,async c=>{await re.getRoot(),c(),s()})}]}class wn extends K{constructor(e){super(),X(this,e,hn,mn,z,{})}}function pt(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ye(t,e){if(t===e||t!==t)return()=>t;const l=typeof t;if(l!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((r,i)=>Ye(t[i],r));return r=>n.map(i=>i(r))}if(l==="object"){if(!t||!e)throw new Error("Object cannot be null");if(pt(t)&&pt(e)){t=t.getTime(),e=e.getTime();const i=e-t;return s=>new Date(t+s*i)}const n=Object.keys(e),r={};return n.forEach(i=>{r[i]=Ye(t[i],e[i])}),i=>{const s={};return n.forEach(o=>{s[o]=r[o](i)}),s}}if(l==="number"){const n=e-t;return r=>t+r*n}throw new Error(`Cannot interpolate ${l} values`)}function Ge(t,e={}){const l=ke(t);let n,r=t;function i(s,o){if(t==null)return l.set(t=s),Promise.resolve();r=s;let a=n,c=!1,{delay:f=0,duration:d=400,easing:p=Je,interpolate:_=Ye}=We(We({},e),o);if(d===0)return a&&(a.abort(),a=null),l.set(t=r),Promise.resolve();const m=Qe()+f;let w;return n=Ke(b=>{if(b<m)return!0;c||(w=_(t,s),typeof d=="function"&&(d=d(t,s)),c=!0),a&&(a.abort(),a=null);const y=b-m;return y>d?(l.set(t=s),!1):(l.set(t=w(p(y/d))),!0)}),n.promise}return{set:i,update:(s,o)=>i(s(r,t),o),subscribe:l.subscribe}}function gt(t,e,l){const n=t.slice();return n[12]=e[l],n}function _n(t){let e,l;return{c(){e=J("svg"),l=J("path"),u(l,"stroke-linecap","round"),u(l,"stroke-linejoin","round"),u(l,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"class","w-[10vh] h-[10vh] col-span-3 m-auto")},m(n,r){S(n,e,r),g(e,l)},p:D,d(n){n&&x(e)}}}function bn(t){let e,l;return{c(){e=h("img"),u(e,"loading","lazy"),be(e.src,l=t[0].images[0].url)||u(e,"src",l),u(e,"class","rounded-full max-h-[10vh] shadow-black shadow-md col-span-3 m-auto"),u(e,"alt","playlist's cover")},m(n,r){S(n,e,r)},p(n,r){r&1&&!be(e.src,l=n[0].images[0].url)&&u(e,"src",l)},d(n){n&&x(e)}}}function vn(t){let e,l=t[0].owner.display_name+"",n;return{c(){e=P("by "),n=P(l)},m(r,i){S(r,e,i),S(r,n,i)},p(r,i){i&1&&l!==(l=r[0].owner.display_name+"")&&fe(n,l)},d(r){r&&(x(e),x(n))}}}function yn(t){let e=t[0].description+"",l;return{c(){l=P(e)},m(n,r){S(n,l,r)},p(n,r){r&1&&e!==(e=n[0].description+"")&&fe(l,e)},d(n){n&&x(l)}}}function kn(t){let e,l,n,r;function i(a,c){return a[1].downloading?Sn:xn}let s=i(t),o=s(t);return{c(){e=h("button"),o.c(),u(e,"class","text-xs svg-icon"),e.disabled=l=t[1].downloading||t[1].download.done},m(a,c){S(a,e,c),o.m(e,null),n||(r=T(e,"click",t[8]),n=!0)},p(a,c){s!==(s=i(a))&&(o.d(1),o=s(a),o&&(o.c(),o.m(e,null))),c&2&&l!==(l=a[1].downloading||a[1].download.done)&&(e.disabled=l)},d(a){a&&x(e),o.d(),n=!1,r()}}}function $n(t){let e,l,n,r,i;return{c(){e=h("button"),e.textContent="save",l=C(),n=h("button"),n.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2ch]"><path fill-rule="evenodd" d="M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd"></path></svg>

                local mp3`,u(e,"class","text-xs svg-icon bg-green-700 text-white"),u(n,"class","text-xs svg-icon")},m(s,o){S(s,e,o),S(s,l,o),S(s,n,o),r||(i=[T(e,"click",t[7]),T(n,"click",t[6])],r=!0)},p:D,d(s){s&&(x(e),x(l),x(n)),r=!1,W(i)}}}function xn(t){let e,l,n;return{c(){e=J("svg"),l=J("path"),n=P(`

                  download`),u(l,"fill-rule","evenodd"),u(l,"d","M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z"),u(l,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","w-[2ch]")},m(r,i){S(r,e,i),g(e,l),S(r,n,i)},d(r){r&&(x(e),x(n))}}}function Sn(t){let e;return{c(){e=P("downloading")},m(l,n){S(l,e,n)},d(l){l&&x(e)}}}function mt(t){let e,l,n,r=t[1].tracks.length+"",i,s,o,a,c,f=ie(t[1].tracks),d=[];for(let p=0;p<f.length;p+=1)d[p]=ht(gt(t,f,p));return{c(){e=h("div"),l=h("div"),n=h("p"),i=P(r),s=P(" tracks"),o=C();for(let p=0;p<d.length;p+=1)d[p].c();u(n,"class","bg-primary rounded-full p-2 text-black"),u(l,"class","overflow-hidden overflow-x-scroll flex flex-row items-center space-x-2 p-2"),u(e,"class","-mt-1 w-full bg-foreground ring-1 ring-border rounded-b-md text-xs flex flex-row items-center justify-center")},m(p,_){S(p,e,_),g(e,l),g(l,n),g(n,i),g(n,s),g(l,o);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(l,null);c=!0},p(p,_){if((!c||_&2)&&r!==(r=p[1].tracks.length+"")&&fe(i,r),_&2){f=ie(p[1].tracks);let m;for(m=0;m<f.length;m+=1){const w=gt(p,f,m);d[m]?d[m].p(w,_):(d[m]=ht(w),d[m].c(),d[m].m(l,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=f.length}},i(p){c||(p&&ne(()=>{c&&(a||(a=ve(e,Me,{duration:500},!0)),a.run(1))}),c=!0)},o(p){p&&(a||(a=ve(e,Me,{duration:500},!1)),a.run(0)),c=!1},d(p){p&&x(e),He(d,p),p&&a&&a.end()}}}function Cn(t){let e;return{c(){e=h("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-[5vh]"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"></path></svg> ',u(e,"class","shadow-md shadow-black rounded-full")},m(l,n){S(l,e,n)},p:D,d(l){l&&x(e)}}}function Ln(t){let e,l,n;return{c(){e=h("img"),u(e,"loading","lazy"),be(e.src,l=t[12].images[t[12].images.length-1].url)||u(e,"src",l),u(e,"class",n="aspect-square h-[5vh] ring-1 ring-border rounded-full shadow-sm shadow-black will-change-auto "+(t[1].downloading?(t[1].download.status[t[12].id]=="downloading"?" rotating-image":"")+(t[1].download.status[t[12].id]=="ready"?"ring-green-500":"")+(t[1].download.status[t[12].id]=="failed"?" ring-red-500":""):"")),u(e,"alt","album art")},m(r,i){S(r,e,i)},p(r,i){i&2&&!be(e.src,l=r[12].images[r[12].images.length-1].url)&&u(e,"src",l),i&2&&n!==(n="aspect-square h-[5vh] ring-1 ring-border rounded-full shadow-sm shadow-black will-change-auto "+(r[1].downloading?(r[1].download.status[r[12].id]=="downloading"?" rotating-image":"")+(r[1].download.status[r[12].id]=="ready"?"ring-green-500":"")+(r[1].download.status[r[12].id]=="failed"?" ring-red-500":""):""))&&u(e,"class",n)},d(r){r&&x(e)}}}function ht(t){let e;function l(i,s){return i[12].images.length>0?Ln:Cn}let n=l(t),r=n(t);return{c(){r.c(),e=ye()},m(i,s){r.m(i,s),S(i,e,s)},p(i,s){n===(n=l(i))&&r?r.p(i,s):(r.d(1),r=n(i),r&&(r.c(),r.m(e.parentNode,e)))},d(i){i&&x(e),r.d(i)}}}function Mn(t){let e,l,n,r,i,s,o,a,c,f,d=t[0].name+"",p,_,m,w,b,y,v,k,$,j,A,N,ae,le,ce;function de(M,I){return M[0].images.length>0?bn:_n}let ue=de(t),E=ue(t);function ee(M,I){return M[0].description?yn:vn}let je=ee(t),R=je(t);function tt(M,I){return M[1].download.done?$n:kn}let Ae=tt(t),Y=Ae(t),F=t[1].showMore&&mt(t);return{c(){e=h("div"),l=h("div"),n=h("div"),i=C(),s=h("div"),o=h("div"),E.c(),a=C(),c=h("div"),f=h("p"),p=P(d),_=C(),m=h("p"),R.c(),w=C(),b=h("div"),y=h("button"),v=J("svg"),k=J("path"),j=C(),Y.c(),A=C(),N=h("div"),ae=C(),F&&F.c(),u(n,"class","absolute w-full h-full rounded-md blur-[2px]"),u(n,"style",r=t[0].images[0]?`background-image: url('${t[0].images[0].url}');
    background-position: center;
    background-size: cover;
    background-blend-mode: multiply;
    background-color: rgba(0, 0, 0, 0.6)
    `:"background-color: #22272E"),u(f,"class","text-left truncate font-bold -mb-1"),u(m,"class","text-left text-xs truncate mb-2"),u(k,"stroke-linecap","round"),u(k,"stroke-linejoin","round"),u(k,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),u(v,"xmlns","http://www.w3.org/2000/svg"),u(v,"fill","none"),u(v,"viewBox","0 0 24 24"),u(v,"stroke-width","2"),u(v,"stroke","currentColor"),u(v,"class",$="w-[4ch] origin-center transition-transform duration-500 "+(t[1].showMore?"rotate-180":"")),u(y,"class","text-xs svg-icon bg-black/20 p-0 text-white"),u(b,"class","flex flex-row justify-start items-center space-x-2 col-span-7"),u(c,"class","flex flex-col col-span-9"),u(o,"class","grid grid-cols-12 h-full grid-rows-1 items-center justify-center"),u(s,"class","absolute w-full h-full rounded-md"),u(l,"class","w-full h-[15vh] rounded-md relative overflow-hidden ring-1 ring-border"),u(N,"class","bg-primary h-[2px]"),ze(N,"width",t[2]+"%"),u(e,"class","w-[95%]")},m(M,I){S(M,e,I),g(e,l),g(l,n),g(l,i),g(l,s),g(s,o),E.m(o,null),g(o,a),g(o,c),g(c,f),g(f,p),g(c,_),g(c,m),R.m(m,null),g(c,w),g(c,b),g(b,y),g(y,v),g(v,k),g(b,j),Y.m(b,null),g(e,A),g(e,N),g(e,ae),F&&F.m(e,null),le||(ce=T(y,"click",t[5]),le=!0)},p(M,[I]){I&1&&r!==(r=M[0].images[0]?`background-image: url('${M[0].images[0].url}');
    background-position: center;
    background-size: cover;
    background-blend-mode: multiply;
    background-color: rgba(0, 0, 0, 0.6)
    `:"background-color: #22272E")&&u(n,"style",r),ue===(ue=de(M))&&E?E.p(M,I):(E.d(1),E=ue(M),E&&(E.c(),E.m(o,a))),I&1&&d!==(d=M[0].name+"")&&fe(p,d),je===(je=ee(M))&&R?R.p(M,I):(R.d(1),R=je(M),R&&(R.c(),R.m(m,null))),I&2&&$!==($="w-[4ch] origin-center transition-transform duration-500 "+(M[1].showMore?"rotate-180":""))&&u(v,"class",$),Ae===(Ae=tt(M))&&Y?Y.p(M,I):(Y.d(1),Y=Ae(M),Y&&(Y.c(),Y.m(b,null))),I&4&&ze(N,"width",M[2]+"%"),M[1].showMore?F?(F.p(M,I),I&2&&L(F,1)):(F=mt(M),F.c(),L(F,1),F.m(e,null)):F&&(se(),q(F,1,1,()=>{F=null}),oe())},i(M){L(F)},o(M){q(F)},d(M){M&&x(e),E.d(),R.d(),Y.d(),F&&F.d(),le=!1,ce()}}}function qn(t,e,l){let n,r,i,s;G(t,Pe,w=>l(9,i=w)),G(t,he,w=>l(10,s=w));let{playlist:o}=e;const a=ke({showMore:!1,detailedLoaded:!1,id:void 0,tracks:[],download:{stage:"",status:{},done:!1},downloading:!1,memblobs:[]});G(t,a,w=>l(1,n=w));let c=Ge(0,{duration:1e3,easing:Ft});G(t,c,w=>l(2,r=w));const f=async()=>{n.showMore?O(a,n.showMore=!1,n):(n.detailedLoaded||await d(),O(a,n.showMore=!0,n))},d=async()=>{const b=new URL(o.external_urls).pathname.split("/")[2];H("loading playlist information",!0,1,async y=>{let v=await re.getPlaylistInfo(b);console.log(v),O(a,n.tracks=v,n),O(a,n.detailedLoaded=!0,n),y()})},p=()=>{n.memblobs.forEach(({blob:w,id:b},y)=>{const v=URL.createObjectURL(w),k=document.createElement("a");k.href=v,k.download=`${b}.mp3`,k.click()})},_=()=>{H("saving to Cartier",!0,10,w=>{const b=s.handle.tracksDir;n.memblobs.forEach(async({blob:y,id:v})=>{const $=await(await b.getFileHandle(`${v}.mp3`,{create:!0})).createWritable();await $.write(y),await $.close()}),O(Pe,i.playlists=[...i.playlists,{name:o.name,url:o.external_urls,desc:o.description,owner:o.owner.display_name,tracks:[...n.tracks.map(y=>y.id)],id:o.id}],i),w(),H("saved to Cartier!",!1,2)})},m=async()=>{if(n.detailedLoaded||await d(),!n.tracks)return;if(n.tracks.length==0){H("nothing to download");return}O(a,n.downloading=!0,n),O(a,n.download.stage="converting",n),c.set(0,{duration:1}),c.set(10,{duration:1e4});let w=n.tracks[0];re.getDownloadTrack(w.url,"",!0).then(async b=>{if(b.success==!1){O(c,r=0,r),O(a,n.downloading=!1,n),H(`serverErr: ${b.info}`);return}const y=b.data.key;O(a,n.download.status[w.id]="downloading",n);for(const[k,$]of[...n.tracks].splice(1).entries())O(a,n.download.status[$.id]="downloading",n),(await re.getDownloadTrack($.url,y,!1)).success==!1&&H(`failed downloading track (${$.name})`);await c.set(10);const v=async()=>{let k=await re.getDownloadStatus(y);const $=k.data.filter(j=>j.status!=="downloading");if(k.data.forEach(j=>{O(a,n.download.status[j.id]=j.status,n)}),O(c,r=$.length/k.data.length*40+10,r),$.length==k.data.length){O(a,n.download.stage="downloading",n);for(let j=0;j<$.length;j++){let[A,N,ae]=await re.getStreamPlaylist(y);if(!A){H(`failed downloading a track (in "${o.name}")`);continue}O(a,n.memblobs=[...n.memblobs,{blob:N,id:ae}],n),O(c,r=(j+1)/$.length*50+50,r)}await c.set(100,{duration:500}),O(a,n.downloading=!1,n),O(a,n.download.done=!0,n);return}setTimeout(v,7500)};v()})};return t.$$set=w=>{"playlist"in w&&l(0,o=w.playlist)},[o,n,r,a,c,f,p,_,m]}class Tt extends K{constructor(e){super(),X(this,e,qn,Mn,z,{playlist:0})}}function wt(t,e,l){const n=t.slice();return n[6]=e[l],n}function _t(t,e,l){const n=t.slice();return n[6]=e[l],n}function jn(t){let e,l,n,r;const i=[En,On],s=[];function o(a,c){return!a[1].playlists.downloaded||a[1].playlists.downloaded.length==0?0:1}return e=o(t),l=s[e]=i[e](t),{c(){l.c(),n=ye()},m(a,c){s[e].m(a,c),S(a,n,c),r=!0},p(a,c){let f=e;e=o(a),e===f?s[e].p(a,c):(se(),q(s[f],1,1,()=>{s[f]=null}),oe(),l=s[e],l?l.p(a,c):(l=s[e]=i[e](a),l.c()),L(l,1),l.m(n.parentNode,n))},i(a){r||(L(l),r=!0)},o(a){q(l),r=!1},d(a){a&&x(n),s[e].d(a)}}}function An(t){let e,l,n=ie(t[1].playlists.all||[]),r=[];for(let s=0;s<n.length;s+=1)r[s]=vt(_t(t,n,s));const i=s=>q(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=ye()},m(s,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,o);S(s,e,o),l=!0},p(s,o){if(o&2){n=ie(s[1].playlists.all||[]);let a;for(a=0;a<n.length;a+=1){const c=_t(s,n,a);r[a]?(r[a].p(c,o),L(r[a],1)):(r[a]=vt(c),r[a].c(),L(r[a],1),r[a].m(e.parentNode,e))}for(se(),a=n.length;a<r.length;a+=1)i(a);oe()}},i(s){if(!l){for(let o=0;o<n.length;o+=1)L(r[o]);l=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)q(r[o]);l=!1},d(s){s&&x(e),He(r,s)}}}function On(t){let e,l,n=ie(t[1].playlists.downloaded||[]),r=[];for(let s=0;s<n.length;s+=1)r[s]=bt(wt(t,n,s));const i=s=>q(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=ye()},m(s,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,o);S(s,e,o),l=!0},p(s,o){if(o&2){n=ie(s[1].playlists.downloaded||[]);let a;for(a=0;a<n.length;a+=1){const c=wt(s,n,a);r[a]?(r[a].p(c,o),L(r[a],1)):(r[a]=bt(c),r[a].c(),L(r[a],1),r[a].m(e.parentNode,e))}for(se(),a=n.length;a<r.length;a+=1)i(a);oe()}},i(s){if(!l){for(let o=0;o<n.length;o+=1)L(r[o]);l=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)q(r[o]);l=!1},d(s){s&&x(e),He(r,s)}}}function En(t){let e;return{c(){e=h("p"),e.textContent="no downloads",u(e,"class","pt-10")},m(l,n){S(l,e,n)},p:D,i:D,o:D,d(l){l&&x(e)}}}function bt(t){let e,l;return e=new Tt({props:{playlist:t[6]}}),{c(){Q(e.$$.fragment)},m(n,r){Z(e,n,r),l=!0},p(n,r){const i={};r&2&&(i.playlist=n[6]),e.$set(i)},i(n){l||(L(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){V(e,n)}}}function vt(t){let e,l;return e=new Tt({props:{playlist:t[6]}}),{c(){Q(e.$$.fragment)},m(n,r){Z(e,n,r),l=!0},p(n,r){const i={};r&2&&(i.playlist=n[6]),e.$set(i)},i(n){l||(L(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){V(e,n)}}}function Dn(t){let e,l,n,r,i,s,o,a,c,f,d,p,_,m;const w=[An,jn],b=[];function y(v,k){return v[1].view.tab==U.PLAYLISTS?0:v[1].view.tab==U.DOWNLOADED?1:-1}return~(c=y(t))&&(f=b[c]=w[c](t)),{c(){e=h("div"),l=h("div"),n=h("div"),r=C(),i=h("button"),i.textContent="playlists",s=h("button"),s.textContent="downloaded",o=C(),a=h("div"),f&&f.c(),u(n,"class","bg-border h-full absolute rounded-xl z-10"),u(i,"id","playlistbtn"),u(i,"class","svelte-7mzzq1"),u(s,"id","downloadedbtn"),u(s,"class","svelte-7mzzq1"),u(l,"class","stickytoggle z-10 sticky top-2 w-min flex flex-row items-center justify-between rounded-xl bg-foreground ring-1 ring-border mx-auto svelte-7mzzq1"),u(a,"class","flex flex-col justify-center items-center w-full space-y-2 pb-1 relative"),u(e,"class","h-[82vh] overflow-y-scroll w-[100vw]")},m(v,k){S(v,e,k),g(e,l),g(l,n),t[2](n),g(l,r),g(l,i),g(l,s),g(e,o),g(e,a),~c&&b[c].m(a,null),p=!0,_||(m=[T(i,"click",t[3]),T(s,"click",t[4])],_=!0)},p(v,[k]){let $=c;c=y(v),c===$?~c&&b[c].p(v,k):(f&&(se(),q(b[$],1,1,()=>{b[$]=null}),oe()),~c?(f=b[c],f?f.p(v,k):(f=b[c]=w[c](v),f.c()),L(f,1),f.m(a,null)):f=null)},i(v){p||(L(f),v&&(d||ne(()=>{d=en(a,Me,{duration:1e3}),d.start()})),p=!0)},o(v){q(f),p=!1},d(v){v&&x(e),t[2](null),~c&&b[c].d(),_=!1,W(m)}}}function Fn(t,e,l){let n;G(t,B,c=>l(1,n=c));let r,i={left:Ge(0,{duration:50,easing:st}),width:Ge(0,{duration:50,easing:st})};i.left.subscribe(c=>{r&&l(0,r.style.left=`${c}px`,r)}),i.width.subscribe(c=>{r&&l(0,r.style.width=`${c}px`,r)});function s(c){Le[c?"unshift":"push"](()=>{r=c,l(0,r)})}const o=()=>O(B,n.view.tab=U.PLAYLISTS,n),a=()=>O(B,n.view.tab=U.DOWNLOADED,n);return t.$$.update=()=>{if(t.$$.dirty&3&&r)switch(n.view.tab){case U.PLAYLISTS:i.left.set(0),i.width.set(document.getElementById("playlistbtn").clientWidth);break;case U.DOWNLOADED:i.left.set(document.getElementById("playlistbtn").clientWidth),i.width.set(document.getElementById("downloadedbtn").clientWidth);break}},[r,n,s,o,a]}class Tn extends K{constructor(e){super(),X(this,e,Fn,Dn,z,{})}}function yt(t){let e,l,n,r,i,s,o,a,c;function f(_,m){return _[0].user.images.length>0?Pn:Nn}let d=f(t),p=d(t);return{c(){e=h("div"),l=h("button"),l.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[3em]"><path d="M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"></path><path d="m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"></path></svg>
      home`,n=C(),r=h("button"),p.c(),i=P(`
      account`),s=C(),o=h("button"),o.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[3em]"><path fill-rule="evenodd" d="M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z" clip-rule="evenodd"></path></svg>
      settings`,u(l,"class","flex flex-col items-center justify-center bg-transparent text-white text-xs svelte-gbqgsd"),u(r,"class","flex flex-col items-center justify-center bg-transparent text-white text-xs svelte-gbqgsd"),u(o,"class","flex flex-col items-center justify-center bg-transparent text-white text-xs svelte-gbqgsd"),u(e,"class","container flex flex-row justify-around items-center h-[11vh] bg-gradient-to-t from-background to-border w-[95vw] rounded-b-xl ring-1 ring-border py-5 svelte-gbqgsd")},m(_,m){S(_,e,m),g(e,l),g(e,n),g(e,r),p.m(r,null),g(r,i),g(e,s),g(e,o),a||(c=[T(l,"click",t[1]),T(r,"click",t[2]),T(o,"click",t[3])],a=!0)},p(_,m){d===(d=f(_))&&p?p.p(_,m):(p.d(1),p=d(_),p&&(p.c(),p.m(r,i)))},d(_){_&&x(e),p.d(),a=!1,W(c)}}}function Nn(t){let e;return{c(){e=P("open")},m(l,n){S(l,e,n)},p:D,d(l){l&&x(e)}}}function Pn(t){let e,l,n;return{c(){e=h("img"),u(e,"loading","lazy"),be(e.src,l=t[0].user.images[0].url)||u(e,"src",l),u(e,"alt",n=`${t[0].user.display_name}'s profile picture`),u(e,"class","rounded-full w-[4em] ring-border ring-1 aspect-square")},m(r,i){S(r,e,i)},p(r,i){i&1&&!be(e.src,l=r[0].user.images[0].url)&&u(e,"src",l),i&1&&n!==(n=`${r[0].user.display_name}'s profile picture`)&&u(e,"alt",n)},d(r){r&&x(e)}}}function In(t){let e,l=t[0].logged&&yt(t);return{c(){l&&l.c(),e=ye()},m(n,r){l&&l.m(n,r),S(n,e,r)},p(n,[r]){n[0].logged?l?l.p(n,r):(l=yt(n),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:D,o:D,d(n){n&&x(e),l&&l.d(n)}}}function Hn(t,e,l){let n;return G(t,B,o=>l(0,n=o)),[n,()=>{O(B,n.view.tab=U.PLAYLISTS,n)},()=>{O(B,n.view.tab=U.ACCOUNT,n)},()=>{O(B,n.view.tab=U.SETTINGS,n)}]}class Un extends K{constructor(e){super(),X(this,e,Hn,In,z,{})}}function Bn(t){let e,l;return e=new wn({}),{c(){Q(e.$$.fragment)},m(n,r){Z(e,n,r),l=!0},i(n){l||(L(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){V(e,n)}}}function Wn(t){let e,l;return e=new Tn({}),{c(){Q(e.$$.fragment)},m(n,r){Z(e,n,r),l=!0},i(n){l||(L(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){V(e,n)}}}function zn(t){let e,l,n,r,i,s;const o=[Wn,Bn],a=[];function c(f,d){return f[0].view.tab in[U.DOWNLOADED,U.PLAYLISTS]?0:f[0].view.tab==U.SETTINGS?1:-1}return~(l=c(t))&&(n=a[l]=o[l](t)),i=new Un({}),{c(){e=h("div"),n&&n.c(),r=C(),Q(i.$$.fragment),u(e,"class","flex flex-col items-center justify-center")},m(f,d){S(f,e,d),~l&&a[l].m(e,null),g(e,r),Z(i,e,null),s=!0},p(f,[d]){let p=l;l=c(f),l!==p&&(n&&(se(),q(a[p],1,1,()=>{a[p]=null}),oe()),~l?(n=a[l],n||(n=a[l]=o[l](f),n.c()),L(n,1),n.m(e,r)):n=null)},i(f){s||(L(n),L(i.$$.fragment,f),s=!0)},o(f){q(n),q(i.$$.fragment,f),s=!1},d(f){f&&x(e),~l&&a[l].d(),V(i)}}}function Zn(t,e,l){let n;return G(t,B,r=>l(0,n=r)),[n]}class Vn extends K{constructor(e){super(),X(this,e,Zn,zn,z,{})}}function Rn(t){let e,l;const n=t[1].default,r=xt(n,t,t[0],null);return{c(){e=h("div"),r&&r.c(),u(e,"class","max-h-[90%] max-w-[90%]")},m(i,s){S(i,e,s),r&&r.m(e,null),l=!0},p(i,[s]){r&&r.p&&(!l||s&1)&&Lt(r,n,i,i[0],l?Ct(n,i[0],s,null):Mt(i[0]),null)},i(i){l||(L(r,i),l=!0)},o(i){q(r,i),l=!1},d(i){i&&x(e),r&&r.d(i)}}}function Yn(t,e,l){let{$$slots:n={},$$scope:r}=e;return t.$$set=i=>{"$$scope"in i&&l(0,r=i.$$scope)},[r,n]}class Gn extends K{constructor(e){super(),X(this,e,Yn,Rn,z,{})}}function Jn(t){let e,l;return e=new Vn({}),{c(){Q(e.$$.fragment)},m(n,r){Z(e,n,r),l=!0},p:D,i(n){l||(L(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){V(e,n)}}}function Qn(t){let e,l;return e=new Gn({props:{$$slots:{default:[Xn]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(n,r){Z(e,n,r),l=!0},p(n,r){const i={};r&16&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){l||(L(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){V(e,n)}}}function Xn(t){let e,l;return e=new gn({props:{handleUsername:t[1]}}),{c(){Q(e.$$.fragment)},m(n,r){Z(e,n,r),l=!0},p:D,i(n){l||(L(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){V(e,n)}}}function Kn(t){let e,l,n,r,i,s,o,a,c,f;const d=[Qn,Jn],p=[];function _(m,w){return m[0].logged==!1?0:1}return i=_(t),s=p[i]=d[i](t),{c(){e=h("div"),l=C(),n=h("main"),r=h("div"),s.c(),o=C(),a=h("div"),u(e,"class","bg-foreground/90 p-1 rounded-md w-[80vw] max-w-[90vw] z-[1000]"),ze(e,"display","none"),u(a,"class","absolute left-0 top-[1em] w-full flex flex-col items-center justify-center space-y-1 text-xs"),u(r,"class","flex flex-col justify-center items-center relative h-[100%] bg-background"),u(n,"class","w-screen h-screen text-white text-xl select-none text-center")},m(m,w){S(m,e,w),t[2](e),S(m,l,w),S(m,n,w),g(n,r),p[i].m(r,null),g(r,o),g(r,a),t[3](a),f=!0},p(m,[w]){let b=i;i=_(m),i===b?p[i].p(m,w):(se(),q(p[b],1,1,()=>{p[b]=null}),oe(),s=p[i],s?s.p(m,w):(s=p[i]=d[i](m),s.c()),L(s,1),s.m(r,o))},i(m){f||(L(s),m&&ne(()=>{f&&(c||(c=ve(a,Me,{duration:1e4},!0)),c.run(1))}),f=!0)},o(m){q(s),m&&(c||(c=ve(a,Me,{duration:1e4},!1)),c.run(0)),f=!1},d(m){m&&(x(e),x(l),x(n)),t[2](null),p[i].d(),t[3](null),m&&c&&c.end()}}}let Fe,Nt;const H=(t,e=!1,l=3,n)=>{const r=Nt.cloneNode(!0);r.innerHTML=e?`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.2em] animate-spin inline aspect-square mr-1" > <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" /> </svg>${t}`:t,r.style.display="block",Fe.appendChild(r),n?n(()=>Fe.removeChild(r)):setTimeout(()=>Fe.removeChild(r),l*1e3)};function el(t,e,l){let n;G(t,B,o=>l(0,n=o));const r=async o=>{await qe.login(o)};et(qe.initCartierFile);function i(o){Le[o?"unshift":"push"](()=>{Nt=o})}function s(o){Le[o?"unshift":"push"](()=>{Fe=o})}return[n,r,i,s]}class tl extends K{constructor(e){super(),X(this,e,el,Kn,z,{})}}new tl({target:document.getElementById("app")});
