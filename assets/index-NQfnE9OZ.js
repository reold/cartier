var at=Object.defineProperty;var ct=(t,e,n)=>e in t?at(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ie=(t,e,n)=>(ct(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function q(){}const ut=t=>t;function Se(t,e){for(const n in e)t[n]=e[n];return t}function Qe(t){return t()}function Te(){return Object.create(null)}function se(t){t.forEach(Qe)}function Xe(t){return typeof t=="function"}function ie(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let je;function ge(t,e){return t===e?!0:(je||(je=document.createElement("a")),je.href=e,t===je.href)}function ft(t){return Object.keys(t).length===0}function dt(t,...e){if(t==null){for(const l of e)l(void 0);return q}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ae(t,e,n){t.$$.on_destroy.push(dt(e,n))}function pt(t,e,n,l){if(t){const r=Ye(t,e,n,l);return t[0](r)}}function Ye(t,e,n,l){return t[1]&&l?Se(n.ctx.slice(),t[1](l(e))):n.ctx}function gt(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],a=Math.max(e.dirty.length,r.length);for(let u=0;u<a;u+=1)s[u]=e.dirty[u]|r[u];return s}return e.dirty|r}return e.dirty}function ht(t,e,n,l,r,s){if(r){const a=Ye(e,n,l,s);t.p(a,r)}}function mt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function J(t,e,n){return t.set(n),e}const Ze=typeof window<"u";let wt=Ze?()=>window.performance.now():()=>Date.now(),et=Ze?t=>requestAnimationFrame(t):q;const de=new Set;function tt(t){de.forEach(e=>{e.c(t)||(de.delete(e),e.f())}),de.size!==0&&et(tt)}function _t(t){let e;return de.size===0&&et(tt),{promise:new Promise(n=>{de.add(e={c:t,f:n})}),abort(){de.delete(e)}}}function c(t,e){t.appendChild(e)}function j(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function nt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function F(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function B(t){return document.createTextNode(t)}function M(){return B(" ")}function bt(){return B("")}function Z(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function i(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function vt(t){return Array.from(t.childNodes)}function ee(t,e){e=""+e,t.data!==e&&(t.data=e)}function qe(t,e){t.value=e??""}function he(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function De(t,e,n){t.classList.toggle(e,!!n)}let xe;function ke(t){xe=t}function kt(){if(!xe)throw new Error("Function called outside component initialization");return xe}function lt(t){kt().$$.on_mount.push(t)}const fe=[],Me=[];let pe=[];const Ne=[],yt=Promise.resolve();let Oe=!1;function xt(){Oe||(Oe=!0,yt.then(rt))}function Pe(t){pe.push(t)}const Ee=new Set;let ce=0;function rt(){if(ce!==0)return;const t=xe;do{try{for(;ce<fe.length;){const e=fe[ce];ce++,ke(e),$t(e.$$)}}catch(e){throw fe.length=0,ce=0,e}for(ke(null),fe.length=0,ce=0;Me.length;)Me.pop()();for(let e=0;e<pe.length;e+=1){const n=pe[e];Ee.has(n)||(Ee.add(n),n())}pe.length=0}while(fe.length);for(;Ne.length;)Ne.pop()();Oe=!1,Ee.clear(),ke(t)}function $t(t){if(t.fragment!==null){t.update(),se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Pe)}}function jt(t){const e=[],n=[];pe.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),pe=e}const Ce=new Set;let re;function st(){re={r:0,c:[],p:re}}function it(){re.r||se(re.c),re=re.p}function K(t,e){t&&t.i&&(Ce.delete(t),t.i(e))}function Q(t,e,n,l){if(t&&t.o){if(Ce.has(t))return;Ce.add(t),re.c.push(()=>{Ce.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Le(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function $e(t){t&&t.c()}function me(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),Pe(()=>{const s=t.$$.on_mount.map(Qe).filter(Xe);t.$$.on_destroy?t.$$.on_destroy.push(...s):se(s),t.$$.on_mount=[]}),r.forEach(Pe)}function we(t,e){const n=t.$$;n.fragment!==null&&(jt(n.after_update),se(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ct(t,e){t.$$.dirty[0]===-1&&(fe.push(t),xt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function _e(t,e,n,l,r,s,a=null,u=[-1]){const d=xe;ke(t);const o=t.$$={fragment:null,ctx:[],props:s,update:q,not_equal:r,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Te(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};a&&a(o.root);let f=!1;if(o.ctx=n?n(t,e.props||{},(g,h,..._)=>{const w=_.length?_[0]:h;return o.ctx&&r(o.ctx[g],o.ctx[g]=w)&&(!o.skip_bound&&o.bound[g]&&o.bound[g](w),f&&Ct(t,g)),h}):[],o.update(),f=!0,se(o.before_update),o.fragment=l?l(o.ctx):!1,e.target){if(e.hydrate){const g=vt(e.target);o.fragment&&o.fragment.l(g),g.forEach(x)}else o.fragment&&o.fragment.c();e.intro&&K(t.$$.fragment),me(t,e.target,e.anchor),rt()}ke(d)}class be{constructor(){Ie(this,"$$");Ie(this,"$$set")}$destroy(){we(this,1),this.$destroy=q}$on(e,n){if(!Xe(n))return q;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!ft(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Mt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Mt);let Y;Y="https://reold-cartier.glitch.me";const le={getRoot:async()=>await(await fetch(`${Y}/`)).json(),getUserInfo:async t=>await(await fetch(`${Y}/user?username=${t}`)).json(),getPlaylistInfo:async t=>await(await fetch(`${Y}/playlist?id=${t}`)).json(),getDownloadPlaylist:async t=>await(await fetch(`${Y}/download?link=${t}`)).json(),getDownloadStatus:async t=>await(await fetch(`${Y}/status?key=${t}`)).json(),getDownloadTrack:async(t,e="",n=!1)=>await(await fetch(`${Y}/track?link=${t}&key=${e}&create=${n}`)).json(),getStreamPlaylist:async t=>{let e=await fetch(`${Y}/stream?key=${t}`);return[await e.ok,await e.blob()]}},ue=[];function Be(t,e=q){let n;const l=new Set;function r(u){if(ie(t,u)&&(t=u,n)){const d=!ue.length;for(const o of l)o[1](),ue.push(o,t);if(d){for(let o=0;o<ue.length;o+=2)ue[o][0](ue[o+1]);ue.length=0}}}function s(u){r(u(t))}function a(u,d=q){const o=[u,d];return l.add(o),l.size===1&&(n=e(r,s)||q),u(t),()=>{l.delete(o),l.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:a}}function Lt(t){let e,n,l;const r=t[2].default,s=pt(r,t,t[1],null);return{c(){e=p("div"),n=p("div"),s&&s.c(),i(n,"class","bg-gray-950 p-2 rounded-md ring-1 ring-zinc-500 max-w-[90vw]"),i(e,"class","absolute top-0 left-0 w-full h-full backdrop-blur-md flex flex-col items-center justify-center text-center text-xs"),he(e,"visibility",t[0]?"hidden":"visible")},m(a,u){j(a,e,u),c(e,n),s&&s.m(n,null),l=!0},p(a,[u]){s&&s.p&&(!l||u&2)&&ht(s,r,a,a[1],l?gt(r,a[1],u,null):mt(a[1]),null),(!l||u&1)&&he(e,"visibility",a[0]?"hidden":"visible")},i(a){l||(K(s,a),l=!0)},o(a){Q(s,a),l=!1},d(a){a&&x(e),s&&s.d(a)}}}function At(t,e,n){let{$$slots:l={},$$scope:r}=e,{hidden:s=!1}=e;return t.$$set=a=>{"hidden"in a&&n(0,s=a.hidden),"$$scope"in a&&n(1,r=a.$$scope)},[s,r,l]}class It extends be{constructor(e){super(),_e(this,e,At,Lt,ie,{hidden:0})}}function He(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","aspect-square w-[1.2em] animate-spin inline")},m(l,r){j(l,e,r),c(e,n)},d(l){l&&x(e)}}}function Et(t){let e,n,l,r,s,a,u=t[0].step+"",d,o=t[0].is&&He();return{c(){e=p("h1"),e.textContent="Waking up servers!",n=M(),l=p("p"),l.textContent=`Our servers take a little break every 5 minutes when things quiet down.
    We're in the process of waking them up for you. It's automatic, so no need
    to stress!`,r=M(),s=p("p"),o&&o.c(),a=M(),d=B(u),i(e,"class","text-xl"),i(l,"class","text-xs text-gray-500 inline"),i(s,"class","inline"),De(s,"text-green-500",!t[0].is)},m(f,g){j(f,e,g),j(f,n,g),j(f,l,g),j(f,r,g),j(f,s,g),o&&o.m(s,null),c(s,a),c(s,d)},p(f,g){f[0].is?o||(o=He(),o.c(),o.m(s,a)):o&&(o.d(1),o=null),g&1&&u!==(u=f[0].step+"")&&ee(d,u),g&1&&De(s,"text-green-500",!f[0].is)},d(f){f&&(x(e),x(n),x(l),x(r),x(s)),o&&o.d()}}}function St(t){let e,n;return e=new It({props:{hidden:!t[0].is,$$slots:{default:[Et]},$$scope:{ctx:t}}}),{c(){$e(e.$$.fragment)},m(l,r){me(e,l,r),n=!0},p(l,[r]){const s={};r&1&&(s.hidden=!l[0].is),r&5&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){we(e,l)}}}function Ot(t,e,n){let l;const r=Be({step:"trying to make contact",is:!0});return Ae(t,r,s=>n(0,l=s)),lt(()=>{J(r,l.step="waking up servers",l),le.getRoot().then(s=>{J(r,l.is=!1,l),J(r,l.step="servers are running!",l)}).catch(s=>{X(`unable to reach servers. err: ${s}`),J(r,l.step="servers unreachable (reload?)",l)})}),[l,r]}class Pt extends be{constructor(e){super(),_e(this,e,Ot,St,ie,{})}}function Ut(t){let e,n,l,r,s,a,u,d,o,f,g,h,_,w,b,L,C,A,S,y,O,U,W;return e=new Pt({}),{c(){$e(e.$$.fragment),n=M(),l=p("div"),r=p("p"),r.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path></svg>
    fill-in to continue`,s=M(),a=p("div"),u=p("div"),d=p("input"),o=M(),f=p("button"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline rounded-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg>',g=M(),h=p("p"),h.textContent="copy your profile link from your spotify account page",_=M(),w=p("div"),b=p("label"),L=p("input"),C=M(),A=p("span"),A.textContent="persist",S=M(),y=p("button"),y.textContent="continue",i(r,"class","text-2xl"),i(d,"type","text"),i(d,"class","w-full"),i(d,"placeholder","spotify profile link"),i(f,"class","bg-zinc-500"),i(f,"aria-label","paste from clipboard"),i(u,"class","w-full flex flex-row items-center justify-center space-x-2"),i(h,"class","text-sm"),i(a,"class","flex flex-col items-center justify-center"),i(L,"type","checkbox"),i(L,"class","inline"),i(A,"class","align-middle"),i(b,"for","persisting userid"),i(b,"class","text-base flex flex-row space-x-2 bg-gray-950 p-3 rounded-md"),i(y,"class","hover:scale-110"),i(w,"class","flex flex-row items-center justify-center space-x-3"),i(l,"class","flex flex-col items-center text-center justify-center bg-aodFg ring-1 ring-zinc-500 rounded-md w-11/12 py-5 space-y-7 px-5")},m($,k){me(e,$,k),j($,n,k),j($,l,k),c(l,r),c(l,s),c(l,a),c(a,u),c(u,d),qe(d,t[0]),c(u,o),c(u,f),c(a,g),c(a,h),c(l,_),c(l,w),c(w,b),c(b,L),L.checked=t[1],c(b,C),c(b,A),c(w,S),c(w,y),O=!0,U||(W=[Z(d,"input",t[5]),Z(f,"click",t[2]),Z(L,"change",t[6]),Z(y,"click",t[3])],U=!0)},p($,[k]){k&1&&d.value!==$[0]&&qe(d,$[0]),k&2&&(L.checked=$[1])},i($){O||(K(e.$$.fragment,$),O=!0)},o($){Q(e.$$.fragment,$),O=!1},d($){$&&(x(n),x(l)),we(e,$),U=!1,se(W)}}}function zt(t,e,n){lt(()=>{const f=localStorage.getItem("cartier-userid");f&&(X("performing auto-login",!0),l(f))});let{handleUsername:l}=e,r="",s=!0;const a=async()=>{navigator.clipboard.readText&&n(0,r=await navigator.clipboard.readText())},u=()=>{let f;try{f=new URL(r)}catch{n(0,r="");return}const g=f.pathname.split("/")[2];s&&(localStorage.setItem("cartier-userid",g),X("login information saved!")),l(g)};function d(){r=this.value,n(0,r)}function o(){s=this.checked,n(1,s)}return t.$$set=f=>{"handleUsername"in f&&n(4,l=f.handleUsername)},[r,s,a,u,l,d,o]}class Bt extends be{constructor(e){super(),_e(this,e,zt,Ut,ie,{handleUsername:4})}}function Re(t){return Object.prototype.toString.call(t)==="[object Date]"}function Tt(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Ue(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((r,s)=>Ue(t[s],r));return r=>l.map(s=>s(r))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Re(t)&&Re(e)){t=t.getTime(),e=e.getTime();const s=e-t;return a=>new Date(t+a*s)}const l=Object.keys(e),r={};return l.forEach(s=>{r[s]=Ue(t[s],e[s])}),s=>{const a={};return l.forEach(u=>{a[u]=r[u](s)}),a}}if(n==="number"){const l=e-t;return r=>t+r*l}throw new Error(`Cannot interpolate ${n} values`)}function qt(t,e={}){const n=Be(t);let l,r=t;function s(a,u){if(t==null)return n.set(t=a),Promise.resolve();r=a;let d=l,o=!1,{delay:f=0,duration:g=400,easing:h=ut,interpolate:_=Ue}=Se(Se({},e),u);if(g===0)return d&&(d.abort(),d=null),n.set(t=r),Promise.resolve();const w=wt()+f;let b;return l=_t(L=>{if(L<w)return!0;o||(b=_(t,a),typeof g=="function"&&(g=g(t,a)),o=!0),d&&(d.abort(),d=null);const C=L-w;return C>g?(n.set(t=a),!1):(n.set(t=b(h(C/g))),!0)}),l.promise}return{set:s,update:(a,u)=>s(a(r,t),u),subscribe:n.subscribe}}function Ve(t,e,n){const l=t.slice();return l[0]=e[n],l}function Dt(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-[10vh] h-[10vh]")},m(l,r){j(l,e,r),c(e,n)},p:q,d(l){l&&x(e)}}}function Nt(t){let e,n;return{c(){e=p("img"),i(e,"loading","lazy"),ge(e.src,n=t[0].images[0].url)||i(e,"src",n),i(e,"class","rounded-full max-h-[10vh] shadow-black shadow-lg ring-1 ring-black"),i(e,"alt","playlist's cover")},m(l,r){j(l,e,r)},p(l,r){r&1&&!ge(e.src,n=l[0].images[0].url)&&i(e,"src",n)},d(l){l&&x(e)}}}function Ht(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","4"),i(e,"stroke","currentColor"),i(e,"class","w-[1.2em] text-xs aspect-square")},m(l,r){j(l,e,r),c(e,n)},d(l){l&&x(e)}}}function Rt(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","m4.5 15.75 7.5-7.5 7.5 7.5"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","3"),i(e,"stroke","currentColor"),i(e,"class","w-[1.2em] aspect-square text-xs")},m(l,r){j(l,e,r),c(e,n)},d(l){l&&x(e)}}}function Vt(t){let e;return{c(){e=B("download")},m(n,l){j(n,e,l)},d(n){n&&x(e)}}}function Ft(t){let e;return{c(){e=B("downloaded")},m(n,l){j(n,e,l)},d(n){n&&x(e)}}}function Wt(t){let e,n,l;return{c(){e=F("svg"),n=F("path"),l=B(`
            downloading`),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-4 h-4 inline animate-spin")},m(r,s){j(r,e,s),c(e,n),j(r,l,s)},d(r){r&&(x(e),x(l))}}}function Fe(t){let e,n,l;return{c(){e=p("button"),e.textContent="save",i(e,"class","text-xs p-1")},m(r,s){j(r,e,s),n||(l=Z(e,"click",t[8]),n=!0)},p:q,d(r){r&&x(e),n=!1,l()}}}function We(t){let e,n,l,r=t[1].tracks.total+"",s,a,u,d=Le(t[1].tracks.items),o=[];for(let f=0;f<d.length;f+=1)o[f]=Ke(Ve(t,d,f));return{c(){e=p("div"),n=p("div"),l=p("div"),s=B(r),a=B(" tracks"),u=M();for(let f=0;f<o.length;f+=1)o[f].c();i(l,"class","bg-zinc-950 rounded-full text-white p-2"),i(n,"class","overflow-hidden overflow-x-scroll flex flex-row items-center space-x-2 p-1 relative"),i(e,"class","col-span-4 bg-zinc-500/10 rounded-md mx-2 text-xs flex flex-row justify-center")},m(f,g){j(f,e,g),c(e,n),c(n,l),c(l,s),c(l,a),c(n,u);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(n,null)},p(f,g){if(g&2&&r!==(r=f[1].tracks.total+"")&&ee(s,r),g&10){d=Le(f[1].tracks.items);let h;for(h=0;h<d.length;h+=1){const _=Ve(f,d,h);o[h]?o[h].p(_,g):(o[h]=Ke(_),o[h].c(),o[h].m(n,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=d.length}},d(f){f&&x(e),nt(o,f)}}}function Kt(t){let e;return{c(){e=p("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[5vh] h-[5vh]"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"></path></svg> ',i(e,"class","ring-1 ring-black shadow-md shadow-black rounded-full")},m(n,l){j(n,e,l)},p:q,d(n){n&&x(e)}}}function Gt(t){let e,n,l;return{c(){e=p("img"),i(e,"loading","lazy"),ge(e.src,n=t[0].track.album.images[0].url)||i(e,"src",n),i(e,"class",l="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-sm shadow-black "+(t[3].is&&t[3].statuses[t[0].track.id]=="downloading"?"rotating-image will-change-auto":"")+" "+(t[3].is&&t[3].statuses[t[0].track.id]=="ready"?"shadow-green-500 ring-green-500":"")),i(e,"alt","album")},m(r,s){j(r,e,s)},p(r,s){s&2&&!ge(e.src,n=r[0].track.album.images[0].url)&&i(e,"src",n),s&10&&l!==(l="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-sm shadow-black "+(r[3].is&&r[3].statuses[r[0].track.id]=="downloading"?"rotating-image will-change-auto":"")+" "+(r[3].is&&r[3].statuses[r[0].track.id]=="ready"?"shadow-green-500 ring-green-500":""))&&i(e,"class",l)},d(r){r&&x(e)}}}function Ke(t){let e;function n(s,a){return s[0].track?Gt:Kt}let l=n(t),r=l(t);return{c(){r.c(),e=bt()},m(s,a){r.m(s,a),j(s,e,a)},p(s,a){l===(l=n(s))&&r?r.p(s,a):(r.d(1),r=l(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&x(e),r.d(s)}}}function Jt(t){let e,n,l,r,s,a,u,d,o,f=t[0].name+"",g,h,_,w,b,L,C,A=t[0].description+"",S,y,O,U,W,$,k,T,D,te=t[4]&&Object.keys(t[1]).length>0,oe,ve;function ne(v,H){return v[0].images.length>0?Nt:Dt}let N=ne(t),z=N(t);function I(v,H){return v[4]?Rt:Ht}let ae=I(t),m=ae(t);function P(v,H){return v[3].is?Wt:v[2].length>0?Ft:Vt}let E=P(t),G=E(t),R=t[2].length>0&&!t[3].is&&Fe(t),V=te&&We(t);return{c(){e=p("div"),n=p("div"),r=M(),s=p("div"),a=p("div"),z.c(),u=M(),d=p("div"),o=p("a"),g=B(f),h=M(),_=F("svg"),w=F("path"),L=M(),C=p("p"),S=B(A),y=M(),O=p("div"),U=p("button"),m.c(),W=M(),$=p("button"),G.c(),T=M(),R&&R.c(),D=M(),V&&V.c(),i(n,"class","h-full absolute backdrop-invert brightness-50 left-0 top-0 rounded-md"),he(n,"width",t[5]/100*90+"vw"),n.hidden=l=!t[3].is,i(a,"class","col-span-1 flex flex-col items-center justify-center"),i(w,"stroke-linecap","round"),i(w,"stroke-linejoin","round"),i(w,"d","M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"),i(_,"xmlns","http://www.w3.org/2000/svg"),i(_,"fill","none"),i(_,"viewBox","0 0 24 24"),i(_,"stroke-width","1.5"),i(_,"stroke","currentColor"),i(_,"class","w-4 h-4 inline"),i(o,"class","hover:scale-110 duration-75 text-left line-clamp-1"),i(o,"href",b=t[0].external_urls.spotify),i(o,"target","_blank"),i(C,"class","text-xs line-clamp-1"),i(U,"class","bg-transparent text-white ring-1 p-1 ring-zinc-500"),i($,"class","text-xs bg-aodPurple p-1"),$.disabled=k=t[3].is||t[2].length>0,i(O,"class","flex flex-row space-x-2"),i(d,"class","col-span-3 flex flex-col justify-center items-start"),i(s,"class","grid grid-cols-4 w-full gap-1"),i(e,"class","bg-gray-950 ring-1 ring-zinc-500 py-2 rounded-md w-[90vw] text-center relative transition-all duration-150")},m(v,H){j(v,e,H),c(e,n),c(e,r),c(e,s),c(s,a),z.m(a,null),c(s,u),c(s,d),c(d,o),c(o,g),c(o,h),c(o,_),c(_,w),c(d,L),c(d,C),c(C,S),c(d,y),c(d,O),c(O,U),m.m(U,null),c(O,W),c(O,$),G.m($,null),c(O,T),R&&R.m(O,null),c(s,D),V&&V.m(s,null),oe||(ve=[Z(U,"click",t[7]),Z($,"click",t[9])],oe=!0)},p(v,[H]){H&32&&he(n,"width",v[5]/100*90+"vw"),H&8&&l!==(l=!v[3].is)&&(n.hidden=l),N===(N=ne(v))&&z?z.p(v,H):(z.d(1),z=N(v),z&&(z.c(),z.m(a,null))),H&1&&f!==(f=v[0].name+"")&&ee(g,f),H&1&&b!==(b=v[0].external_urls.spotify)&&i(o,"href",b),H&1&&A!==(A=v[0].description+"")&&ee(S,A),ae!==(ae=I(v))&&(m.d(1),m=ae(v),m&&(m.c(),m.m(U,null))),E!==(E=P(v))&&(G.d(1),G=E(v),G&&(G.c(),G.m($,null))),H&12&&k!==(k=v[3].is||v[2].length>0)&&($.disabled=k),v[2].length>0&&!v[3].is?R?R.p(v,H):(R=Fe(v),R.c(),R.m(O,null)):R&&(R.d(1),R=null),H&18&&(te=v[4]&&Object.keys(v[1]).length>0),te?V?V.p(v,H):(V=We(v),V.c(),V.m(s,null)):V&&(V.d(1),V=null)},i:q,o:q,d(v){v&&x(e),z.d(),m.d(),G.d(),R&&R.d(),V&&V.d(),oe=!1,se(ve)}}}function Qt(t,e,n){let l,r={},s=[],{track:a}=e;const u={is:!1,statuses:{}};let d=!1,o=qt(0,{duration:1e3,easing:Tt});Ae(t,o,w=>n(5,l=w));const f=()=>{d==!1?(Object.keys(r).length==0&&g(),n(4,d=!0)):n(4,d=!1)},g=async()=>{const w=a.external_urls.spotify,L=new URL(w).pathname.split("/")[2];X("loading playlist info",!0,1);let C=await le.getPlaylistInfo(L);n(1,r=C)},h=()=>{s.forEach((w,b)=>{const L=URL.createObjectURL(w),C=document.createElement("a");C.href=L,C.download=`${a.name}-${b+1}.mp3`,C.click()})},_=async()=>{if(Object.keys(r).length==0&&await g(),!r.tracks)return;if(r.tracks.items.length==0){X("cannot download empty playlist");return}n(3,u.is=!0,u),o.set(0,{duration:1}),o.set(10,{duration:1e4});let w=r.tracks.items[0].track;le.getDownloadTrack(w.external_urls.spotify,"",!0).then(async b=>{if(b.success==!1){J(o,l=0,l),n(3,u.is=!1,u),X(`serverErr: ${b.info}`);return}const L=b.data.key;for(const[A,{track:S}]of[...r.tracks.items].splice(1).entries())S&&n(3,u.statuses[S.id]="downloading",u),(await le.getDownloadTrack(S.external_urls.spotify,L,!1)).success==!1&&X(`failed downloading track (${S.name})`);await o.set(10);const C=setInterval(async()=>{let A=await le.getDownloadStatus(L);const S=A.data.filter(y=>y.status==="ready");if(A.data.forEach(y=>{n(3,u.statuses[y.id]=y.status,u)}),J(o,l=S.length/A.data.length*40+10,l),S.length==A.data.length){clearInterval(C);for(let y=0;y<S.length;y++){let[O,U]=await le.getStreamPlaylist(L);if(!O){X(`failed streaming track (${a.name})`);continue}n(2,s=[...s,U]),J(o,l=(y+1)/S.length*50+50,l)}await o.set(100,{duration:500}),n(3,u.is=!1,u)}},5e3)})};return t.$$set=w=>{"track"in w&&n(0,a=w.track)},[a,r,s,u,d,l,o,f,h,_]}class Xt extends be{constructor(e){super(),_e(this,e,Qt,Jt,ie,{track:0})}}const ye=Be({loggedIn:!1,user:{},playlists:{}});function Ge(t,e,n){const l=t.slice();return l[2]=e[n],l}function Yt(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-[10vh] h-[10vh] rounded-full ring-aodBg ring-2")},m(l,r){j(l,e,r),c(e,n)},p:q,d(l){l&&x(e)}}}function Zt(t){let e,n,l;return{c(){e=p("img"),i(e,"loading","lazy"),ge(e.src,n=t[0].user.images[1].url)||i(e,"src",n),i(e,"alt",l=`${t[0].user.display_name}'s profile picture`),i(e,"class","rounded-full h-[10vh] ring-aodBg ring-2 shadow-md shadow-black")},m(r,s){j(r,e,s)},p(r,s){s&1&&!ge(e.src,n=r[0].user.images[1].url)&&i(e,"src",n),s&1&&l!==(l=`${r[0].user.display_name}'s profile picture`)&&i(e,"alt",l)},d(r){r&&x(e)}}}function Je(t){let e,n;return e=new Xt({props:{track:t[2]}}),{c(){$e(e.$$.fragment)},m(l,r){me(e,l,r),n=!0},p(l,r){const s={};r&1&&(s.track=l[2]),e.$set(s)},i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){we(e,l)}}}function en(t){let e,n,l,r,s,a,u=t[0].user.display_name+"",d,o,f,g=t[0].user.followers.total+"",h,_,w=t[0].playlists.total+"",b,L,C,A,S=t[0].user.id+"",y,O,U,W,$,k,T,D,te,oe;function ve(m,P){return m[0].user.images.length==2?Zt:Yt}let ne=ve(t),N=ne(t),z=Le(t[0].playlists.items),I=[];for(let m=0;m<z.length;m+=1)I[m]=Je(Ge(t,z,m));const ae=m=>Q(I[m],1,1,()=>{I[m]=null});return{c(){e=p("div"),n=p("div"),l=p("div"),N.c(),r=M(),s=p("div"),a=p("p"),d=B(u),o=M(),f=p("p"),h=B(g),_=B(" followers, "),b=B(w),L=B(" playlists"),C=M(),A=p("p"),y=B(S),O=M(),U=p("div"),W=p("button"),W.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.5em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"></path></svg>logout',$=M(),k=p("div"),T=p("div");for(let m=0;m<I.length;m+=1)I[m].c();i(a,"class","font-semibold"),he(a,"text-shadow","4px 3px 8px rgba(0,0,0,1)"),i(f,"class","text-xs"),i(A,"class","text-xs"),i(s,"class","flex flex-col justify-center items-start"),i(l,"class","flex flex-row items-center justify-center space-x-5"),i(W,"class","text-sm p-0.5 bg-red-500 text-white"),i(n,"class","flex flex-row justify-center items-center h-[13vh] space-x-4 bg-gradient-to-t from-gray-950 via-zinc-500 to-zinc-500 w-[90vw] rounded-t-xl ring-1 ring-zinc-500"),i(T,"class","flex flex-col justify-center items-center w-full space-y-2 pb-1"),i(k,"class","h-[67vh] overflow-y-scroll w-[100vw]"),i(e,"class","flex flex-col items-center -space-y-1")},m(m,P){j(m,e,P),c(e,n),c(n,l),N.m(l,null),c(l,r),c(l,s),c(s,a),c(a,d),c(s,o),c(s,f),c(f,h),c(f,_),c(f,b),c(f,L),c(s,C),c(s,A),c(A,y),c(n,O),c(n,U),c(U,W),c(e,$),c(e,k),c(k,T);for(let E=0;E<I.length;E+=1)I[E]&&I[E].m(T,null);D=!0,te||(oe=Z(W,"click",t[1]),te=!0)},p(m,[P]){if(ne===(ne=ve(m))&&N?N.p(m,P):(N.d(1),N=ne(m),N&&(N.c(),N.m(l,r))),(!D||P&1)&&u!==(u=m[0].user.display_name+"")&&ee(d,u),(!D||P&1)&&g!==(g=m[0].user.followers.total+"")&&ee(h,g),(!D||P&1)&&w!==(w=m[0].playlists.total+"")&&ee(b,w),(!D||P&1)&&S!==(S=m[0].user.id+"")&&ee(y,S),P&1){z=Le(m[0].playlists.items);let E;for(E=0;E<z.length;E+=1){const G=Ge(m,z,E);I[E]?(I[E].p(G,P),K(I[E],1)):(I[E]=Je(G),I[E].c(),K(I[E],1),I[E].m(T,null))}for(st(),E=z.length;E<I.length;E+=1)ae(E);it()}},i(m){if(!D){for(let P=0;P<z.length;P+=1)K(I[P]);D=!0}},o(m){I=I.filter(Boolean);for(let P=0;P<I.length;P+=1)Q(I[P]);D=!1},d(m){m&&x(e),N.d(),nt(I,m),te=!1,oe()}}}function tn(t,e,n){let l;return Ae(t,ye,s=>n(0,l=s)),[l,()=>{localStorage.removeItem("cartier-userid"),J(ye,l.loggedIn=!1,l)}]}class nn extends be{constructor(e){super(),_e(this,e,tn,en,ie,{})}}function ln(t){let e,n;return e=new nn({}),{c(){$e(e.$$.fragment)},m(l,r){me(e,l,r),n=!0},p:q,i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){we(e,l)}}}function rn(t){let e,n;return e=new Bt({props:{handleUsername:t[1]}}),{c(){$e(e.$$.fragment)},m(l,r){me(e,l,r),n=!0},p:q,i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){we(e,l)}}}function sn(t){let e;return{c(){e=p("span"),e.textContent="PROD",i(e,"class","rounded-sm p-0.5 bg-blue-600")},m(n,l){j(n,e,l)},d(n){n&&x(e)}}}function on(t){let e,n,l,r,s,a,u,d,o,f,g,h,_,w,b,L,C,A;const S=[rn,ln],y=[];function O(k,T){return k[0].loggedIn==!1?0:1}o=O(t),f=y[o]=S[o](t);function U(k,T){return sn}let $=U()(t);return{c(){e=p("div"),n=M(),l=p("main"),r=p("div"),r.innerHTML='<div class="bg-aodPurple shadow-sm text-gray-950 shadow-gray-950 rounded-b-md p-2 ml-2 h-full flex flex-col items-center justify-center"><span>reold&#39;s</span></div> <p class="text-3xl">Cartier Manager</p>',s=M(),a=p("div"),u=p("div"),d=M(),f.c(),g=M(),h=p("div"),_=p("p"),$.c(),w=B(`
      Built with ❤️ by
      `),b=p("a"),b.textContent="reold",L=B(`.
      `),C=p("a"),C.textContent="Report an error",i(e,"class","bg-black opacity-75 p-1 rounded-md w-[80vw] max-w-[90vw] z-50"),he(e,"display","none"),i(r,"class","flex flex-row items-center justify-evenly font-bold h-[10vh] pb-2 bg-gray-950 ring-1 ring-zinc-500 shadow-xl"),i(u,"class","absolute left-0 top-0 w-full flex flex-col items-center justify-center space-y-1 text-xs"),i(a,"class","relative w-full flex flex-col items-center justify-center h-[85vh] bg-gradient-to-t from-gray-950 via-[#203A43] to-gray-950"),i(b,"href","https://github.com/reold"),i(b,"target","_blank"),i(b,"class","text-blue-600"),i(C,"href","https://x.com/redicrafty"),i(C,"target","_blank"),i(C,"class","text-blue-600"),i(h,"class","w-full h-[5vh] bg-gray-950 text-sm flex flex-col items-center justify-center"),i(l,"class","w-screen h-screen text-white text-xl select-none text-center")},m(k,T){j(k,e,T),t[2](e),j(k,n,T),j(k,l,T),c(l,r),c(l,s),c(l,a),c(a,u),t[3](u),c(a,d),y[o].m(a,null),c(l,g),c(l,h),c(h,_),$.m(_,null),c(_,w),c(_,b),c(_,L),c(_,C),A=!0},p(k,[T]){let D=o;o=O(k),o===D?y[o].p(k,T):(st(),Q(y[D],1,1,()=>{y[D]=null}),it(),f=y[o],f?f.p(k,T):(f=y[o]=S[o](k),f.c()),K(f,1),f.m(a,null))},i(k){A||(K(f),A=!0)},o(k){Q(f),A=!1},d(k){k&&(x(e),x(n),x(l)),t[2](null),t[3](null),y[o].d(),$.d()}}}let ze,ot;const X=(t,e=!1,n=3)=>{const l=ot.cloneNode(!0);l.innerHTML=e?`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.2em] animate-spin inline aspect-square mr-1" > <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" /> </svg>${t}`:t,l.style.display="block",ze.appendChild(l),setTimeout(()=>{ze.removeChild(l)},n*1e3)};function an(t,e,n){let l;Ae(t,ye,u=>n(0,l=u));const r=u=>{le.getUserInfo(u).then(d=>{if(d.success==!1){X("something went wrong!");return}J(ye,l={...l,...d.data},l),J(ye,l.loggedIn=!0,l)})};function s(u){Me[u?"unshift":"push"](()=>{ot=u})}function a(u){Me[u?"unshift":"push"](()=>{ze=u})}return[l,r,s,a]}class cn extends be{constructor(e){super(),_e(this,e,an,on,ie,{})}}new cn({target:document.getElementById("app")});
