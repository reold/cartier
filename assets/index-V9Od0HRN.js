var ct=Object.defineProperty;var at=(t,e,n)=>e in t?ct(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ie=(t,e,n)=>(at(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function q(){}const ut=t=>t;function Se(t,e){for(const n in e)t[n]=e[n];return t}function Qe(t){return t()}function Te(){return Object.create(null)}function se(t){t.forEach(Qe)}function Xe(t){return typeof t=="function"}function ie(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let je;function he(t,e){return t===e?!0:(je||(je=document.createElement("a")),je.href=e,t===je.href)}function ft(t){return Object.keys(t).length===0}function dt(t,...e){if(t==null){for(const l of e)l(void 0);return q}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ae(t,e,n){t.$$.on_destroy.push(dt(e,n))}function pt(t,e,n,l){if(t){const r=Ye(t,e,n,l);return t[0](r)}}function Ye(t,e,n,l){return t[1]&&l?Se(n.ctx.slice(),t[1](l(e))):n.ctx}function ht(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],c=Math.max(e.dirty.length,r.length);for(let u=0;u<c;u+=1)s[u]=e.dirty[u]|r[u];return s}return e.dirty|r}return e.dirty}function gt(t,e,n,l,r,s){if(r){const c=Ye(e,n,l,s);t.p(c,r)}}function mt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function J(t,e,n){return t.set(n),e}const Ze=typeof window<"u";let _t=Ze?()=>window.performance.now():()=>Date.now(),et=Ze?t=>requestAnimationFrame(t):q;const de=new Set;function tt(t){de.forEach(e=>{e.c(t)||(de.delete(e),e.f())}),de.size!==0&&et(tt)}function wt(t){let e;return de.size===0&&et(tt),{promise:new Promise(n=>{de.add(e={c:t,f:n})}),abort(){de.delete(e)}}}function a(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode&&t.parentNode.removeChild(t)}function nt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function F(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function B(t){return document.createTextNode(t)}function M(){return B(" ")}function vt(){return B("")}function Z(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function i(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function bt(t){return Array.from(t.childNodes)}function ee(t,e){e=""+e,t.data!==e&&(t.data=e)}function qe(t,e){t.value=e??""}function ge(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function De(t,e,n){t.classList.toggle(e,!!n)}let xe;function ke(t){xe=t}function kt(){if(!xe)throw new Error("Function called outside component initialization");return xe}function lt(t){kt().$$.on_mount.push(t)}const fe=[],Me=[];let pe=[];const Ne=[],yt=Promise.resolve();let Oe=!1;function xt(){Oe||(Oe=!0,yt.then(rt))}function Pe(t){pe.push(t)}const Ee=new Set;let ae=0;function rt(){if(ae!==0)return;const t=xe;do{try{for(;ae<fe.length;){const e=fe[ae];ae++,ke(e),$t(e.$$)}}catch(e){throw fe.length=0,ae=0,e}for(ke(null),fe.length=0,ae=0;Me.length;)Me.pop()();for(let e=0;e<pe.length;e+=1){const n=pe[e];Ee.has(n)||(Ee.add(n),n())}pe.length=0}while(fe.length);for(;Ne.length;)Ne.pop()();Oe=!1,Ee.clear(),ke(t)}function $t(t){if(t.fragment!==null){t.update(),se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Pe)}}function jt(t){const e=[],n=[];pe.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),pe=e}const Ce=new Set;let re;function st(){re={r:0,c:[],p:re}}function it(){re.r||se(re.c),re=re.p}function K(t,e){t&&t.i&&(Ce.delete(t),t.i(e))}function Q(t,e,n,l){if(t&&t.o){if(Ce.has(t))return;Ce.add(t),re.c.push(()=>{Ce.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Le(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function $e(t){t&&t.c()}function me(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),Pe(()=>{const s=t.$$.on_mount.map(Qe).filter(Xe);t.$$.on_destroy?t.$$.on_destroy.push(...s):se(s),t.$$.on_mount=[]}),r.forEach(Pe)}function _e(t,e){const n=t.$$;n.fragment!==null&&(jt(n.after_update),se(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ct(t,e){t.$$.dirty[0]===-1&&(fe.push(t),xt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function we(t,e,n,l,r,s,c=null,u=[-1]){const d=xe;ke(t);const o=t.$$={fragment:null,ctx:[],props:s,update:q,not_equal:r,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Te(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};c&&c(o.root);let f=!1;if(o.ctx=n?n(t,e.props||{},(h,g,...w)=>{const _=w.length?w[0]:g;return o.ctx&&r(o.ctx[h],o.ctx[h]=_)&&(!o.skip_bound&&o.bound[h]&&o.bound[h](_),f&&Ct(t,h)),g}):[],o.update(),f=!0,se(o.before_update),o.fragment=l?l(o.ctx):!1,e.target){if(e.hydrate){const h=bt(e.target);o.fragment&&o.fragment.l(h),h.forEach(y)}else o.fragment&&o.fragment.c();e.intro&&K(t.$$.fragment),me(t,e.target,e.anchor),rt()}ke(d)}class ve{constructor(){Ie(this,"$$");Ie(this,"$$set")}$destroy(){_e(this,1),this.$destroy=q}$on(e,n){if(!Xe(n))return q;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!ft(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Mt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Mt);let Y;Y="https://reold-cartier.glitch.me";const le={getRoot:async()=>await(await fetch(`${Y}/`)).json(),getUserInfo:async t=>await(await fetch(`${Y}/user?username=${t}`)).json(),getPlaylistInfo:async t=>await(await fetch(`${Y}/playlist?id=${t}`)).json(),getDownloadPlaylist:async t=>await(await fetch(`${Y}/download?link=${t}`)).json(),getDownloadStatus:async t=>await(await fetch(`${Y}/status?key=${t}`)).json(),getDownloadTrack:async(t,e="",n=!1)=>await(await fetch(`${Y}/track?link=${t}&key=${e}&create=${n}`)).json(),getStreamPlaylist:async t=>{let e=await fetch(`${Y}/stream?key=${t}`);return[await e.ok,await e.blob()]}},ue=[];function Be(t,e=q){let n;const l=new Set;function r(u){if(ie(t,u)&&(t=u,n)){const d=!ue.length;for(const o of l)o[1](),ue.push(o,t);if(d){for(let o=0;o<ue.length;o+=2)ue[o][0](ue[o+1]);ue.length=0}}}function s(u){r(u(t))}function c(u,d=q){const o=[u,d];return l.add(o),l.size===1&&(n=e(r,s)||q),u(t),()=>{l.delete(o),l.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:c}}function Lt(t){let e,n,l;const r=t[2].default,s=pt(r,t,t[1],null);return{c(){e=p("div"),n=p("div"),s&&s.c(),i(n,"class","bg-gray-950 p-2 rounded-md ring-1 ring-zinc-500 max-w-[90vw]"),i(e,"class","absolute top-0 left-0 w-full h-full backdrop-blur-md flex flex-col items-center justify-center text-center text-xs"),ge(e,"visibility",t[0]?"hidden":"visible")},m(c,u){$(c,e,u),a(e,n),s&&s.m(n,null),l=!0},p(c,[u]){s&&s.p&&(!l||u&2)&&gt(s,r,c,c[1],l?ht(r,c[1],u,null):mt(c[1]),null),(!l||u&1)&&ge(e,"visibility",c[0]?"hidden":"visible")},i(c){l||(K(s,c),l=!0)},o(c){Q(s,c),l=!1},d(c){c&&y(e),s&&s.d(c)}}}function At(t,e,n){let{$$slots:l={},$$scope:r}=e,{hidden:s=!1}=e;return t.$$set=c=>{"hidden"in c&&n(0,s=c.hidden),"$$scope"in c&&n(1,r=c.$$scope)},[s,r,l]}class It extends ve{constructor(e){super(),we(this,e,At,Lt,ie,{hidden:0})}}function He(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","aspect-square w-[1.2em] animate-spin inline")},m(l,r){$(l,e,r),a(e,n)},d(l){l&&y(e)}}}function Et(t){let e,n,l,r,s,c,u=t[0].step+"",d,o=t[0].is&&He();return{c(){e=p("h1"),e.textContent="Waking up servers!",n=M(),l=p("p"),l.textContent=`Our servers take a little break every 5 minutes when things quiet down.
    We're in the process of waking them up for you. It's automatic, so no need
    to stress!`,r=M(),s=p("p"),o&&o.c(),c=M(),d=B(u),i(e,"class","text-xl"),i(l,"class","text-xs text-gray-500 inline"),i(s,"class","inline"),De(s,"text-green-500",!t[0].is)},m(f,h){$(f,e,h),$(f,n,h),$(f,l,h),$(f,r,h),$(f,s,h),o&&o.m(s,null),a(s,c),a(s,d)},p(f,h){f[0].is?o||(o=He(),o.c(),o.m(s,c)):o&&(o.d(1),o=null),h&1&&u!==(u=f[0].step+"")&&ee(d,u),h&1&&De(s,"text-green-500",!f[0].is)},d(f){f&&(y(e),y(n),y(l),y(r),y(s)),o&&o.d()}}}function St(t){let e,n;return e=new It({props:{hidden:!t[0].is,$$slots:{default:[Et]},$$scope:{ctx:t}}}),{c(){$e(e.$$.fragment)},m(l,r){me(e,l,r),n=!0},p(l,[r]){const s={};r&1&&(s.hidden=!l[0].is),r&5&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function Ot(t,e,n){let l;const r=Be({step:"trying to make contact",is:!0});return Ae(t,r,s=>n(0,l=s)),lt(()=>{J(r,l.step="waking up servers",l),le.getRoot().then(s=>{J(r,l.is=!1,l),J(r,l.step="servers are running!",l)}).catch(s=>{X(`unable to reach servers. err: ${s}`),J(r,l.step="servers unreachable (reload?)",l)})}),[l,r]}class Pt extends ve{constructor(e){super(),we(this,e,Ot,St,ie,{})}}function Ut(t){let e,n,l,r,s,c,u,d,o,f,h,g,w,_,v,L,j,E,S,C,O,U,W;return e=new Pt({}),{c(){$e(e.$$.fragment),n=M(),l=p("div"),r=p("p"),r.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path></svg>
    fill-in to continue`,s=M(),c=p("div"),u=p("div"),d=p("input"),o=M(),f=p("button"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline rounded-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg>',h=M(),g=p("p"),g.textContent="copy your profile link from your spotify account page",w=M(),_=p("div"),v=p("label"),L=p("input"),j=M(),E=p("span"),E.textContent="persist",S=M(),C=p("button"),C.textContent="continue",i(r,"class","text-2xl"),i(d,"type","text"),i(d,"class","w-full"),i(d,"placeholder","spotify profile link"),i(f,"class","bg-zinc-500"),i(u,"class","w-full flex flex-row items-center justify-center space-x-2"),i(g,"class","text-sm"),i(c,"class","flex flex-col items-center justify-center"),i(L,"type","checkbox"),i(L,"class","inline"),i(E,"class","align-middle"),i(v,"for","persisting userid"),i(v,"class","text-base flex flex-row space-x-2 bg-gray-950 p-3 rounded-md"),i(C,"class","hover:scale-110"),i(_,"class","flex flex-row items-center justify-center space-x-3"),i(l,"class","flex flex-col items-center text-center justify-center bg-aodFg ring-1 ring-zinc-500 rounded-md w-11/12 py-5 space-y-7 px-5")},m(x,k){me(e,x,k),$(x,n,k),$(x,l,k),a(l,r),a(l,s),a(l,c),a(c,u),a(u,d),qe(d,t[0]),a(u,o),a(u,f),a(c,h),a(c,g),a(l,w),a(l,_),a(_,v),a(v,L),L.checked=t[1],a(v,j),a(v,E),a(_,S),a(_,C),O=!0,U||(W=[Z(d,"input",t[5]),Z(f,"click",t[2]),Z(L,"change",t[6]),Z(C,"click",t[3])],U=!0)},p(x,[k]){k&1&&d.value!==x[0]&&qe(d,x[0]),k&2&&(L.checked=x[1])},i(x){O||(K(e.$$.fragment,x),O=!0)},o(x){Q(e.$$.fragment,x),O=!1},d(x){x&&(y(n),y(l)),_e(e,x),U=!1,se(W)}}}function zt(t,e,n){lt(()=>{const f=localStorage.getItem("cartier-userid");f&&(X("performing auto-login",!0),l(f))});let{handleUsername:l}=e,r="",s=!0;const c=async()=>{navigator.clipboard.readText&&n(0,r=await navigator.clipboard.readText())},u=()=>{let f;try{f=new URL(r)}catch{n(0,r="");return}const h=f.pathname.split("/")[2];s&&(localStorage.setItem("cartier-userid",h),X("login information saved!")),l(h)};function d(){r=this.value,n(0,r)}function o(){s=this.checked,n(1,s)}return t.$$set=f=>{"handleUsername"in f&&n(4,l=f.handleUsername)},[r,s,c,u,l,d,o]}class Bt extends ve{constructor(e){super(),we(this,e,zt,Ut,ie,{handleUsername:4})}}function Re(t){return Object.prototype.toString.call(t)==="[object Date]"}function Tt(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Ue(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((r,s)=>Ue(t[s],r));return r=>l.map(s=>s(r))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Re(t)&&Re(e)){t=t.getTime(),e=e.getTime();const s=e-t;return c=>new Date(t+c*s)}const l=Object.keys(e),r={};return l.forEach(s=>{r[s]=Ue(t[s],e[s])}),s=>{const c={};return l.forEach(u=>{c[u]=r[u](s)}),c}}if(n==="number"){const l=e-t;return r=>t+r*l}throw new Error(`Cannot interpolate ${n} values`)}function qt(t,e={}){const n=Be(t);let l,r=t;function s(c,u){if(t==null)return n.set(t=c),Promise.resolve();r=c;let d=l,o=!1,{delay:f=0,duration:h=400,easing:g=ut,interpolate:w=Ue}=Se(Se({},e),u);if(h===0)return d&&(d.abort(),d=null),n.set(t=r),Promise.resolve();const _=_t()+f;let v;return l=wt(L=>{if(L<_)return!0;o||(v=w(t,c),typeof h=="function"&&(h=h(t,c)),o=!0),d&&(d.abort(),d=null);const j=L-_;return j>h?(n.set(t=c),!1):(n.set(t=v(g(j/h))),!0)}),l.promise}return{set:s,update:(c,u)=>s(c(r,t),u),subscribe:n.subscribe}}function Ve(t,e,n){const l=t.slice();return l[0]=e[n],l}function Dt(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-[10vh] h-[10vh]")},m(l,r){$(l,e,r),a(e,n)},p:q,d(l){l&&y(e)}}}function Nt(t){let e,n;return{c(){e=p("img"),i(e,"loading","lazy"),he(e.src,n=t[0].images[0].url)||i(e,"src",n),i(e,"class","rounded-full max-h-[10vh] shadow-black shadow-lg ring-1 ring-black"),i(e,"alt","playlist's cover")},m(l,r){$(l,e,r)},p(l,r){r&1&&!he(e.src,n=l[0].images[0].url)&&i(e,"src",n)},d(l){l&&y(e)}}}function Ht(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","4"),i(e,"stroke","currentColor"),i(e,"class","w-[1.2em] text-xs aspect-square")},m(l,r){$(l,e,r),a(e,n)},d(l){l&&y(e)}}}function Rt(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","m4.5 15.75 7.5-7.5 7.5 7.5"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","3"),i(e,"stroke","currentColor"),i(e,"class","w-[1.2em] aspect-square text-xs")},m(l,r){$(l,e,r),a(e,n)},d(l){l&&y(e)}}}function Vt(t){let e;return{c(){e=B("download")},m(n,l){$(n,e,l)},d(n){n&&y(e)}}}function Ft(t){let e;return{c(){e=B("downloaded")},m(n,l){$(n,e,l)},d(n){n&&y(e)}}}function Wt(t){let e,n,l;return{c(){e=F("svg"),n=F("path"),l=B(`
            downloading`),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-4 h-4 inline animate-spin")},m(r,s){$(r,e,s),a(e,n),$(r,l,s)},d(r){r&&(y(e),y(l))}}}function Fe(t){let e,n,l;return{c(){e=p("button"),e.textContent="save",i(e,"class","text-xs p-1")},m(r,s){$(r,e,s),n||(l=Z(e,"click",t[8]),n=!0)},p:q,d(r){r&&y(e),n=!1,l()}}}function We(t){let e,n,l,r=t[1].tracks.total+"",s,c,u,d=Le(t[1].tracks.items),o=[];for(let f=0;f<d.length;f+=1)o[f]=Ke(Ve(t,d,f));return{c(){e=p("div"),n=p("div"),l=p("div"),s=B(r),c=B(" tracks"),u=M();for(let f=0;f<o.length;f+=1)o[f].c();i(l,"class","bg-zinc-950 rounded-full text-white p-2"),i(n,"class","overflow-hidden overflow-x-scroll flex flex-row items-center space-x-2 p-1 relative"),i(e,"class","col-span-4 bg-zinc-500/10 rounded-md mx-2 text-xs flex flex-row justify-center")},m(f,h){$(f,e,h),a(e,n),a(n,l),a(l,s),a(l,c),a(n,u);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(n,null)},p(f,h){if(h&2&&r!==(r=f[1].tracks.total+"")&&ee(s,r),h&10){d=Le(f[1].tracks.items);let g;for(g=0;g<d.length;g+=1){const w=Ve(f,d,g);o[g]?o[g].p(w,h):(o[g]=Ke(w),o[g].c(),o[g].m(n,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=d.length}},d(f){f&&y(e),nt(o,f)}}}function Kt(t){let e;return{c(){e=p("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[5vh] h-[5vh]"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"></path></svg> ',i(e,"class","ring-1 ring-black shadow-md shadow-black rounded-full")},m(n,l){$(n,e,l)},p:q,d(n){n&&y(e)}}}function Gt(t){let e,n,l;return{c(){e=p("img"),i(e,"loading","lazy"),he(e.src,n=t[0].track.album.images[0].url)||i(e,"src",n),i(e,"class",l="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-md shadow-black "+(t[0].track.id==t[3].id&&t[3].is?"animate-spin":"")),i(e,"alt","album")},m(r,s){$(r,e,s)},p(r,s){s&2&&!he(e.src,n=r[0].track.album.images[0].url)&&i(e,"src",n),s&10&&l!==(l="aspect-square h-[5vh] rounded-full ring-1 ring-black shadow-md shadow-black "+(r[0].track.id==r[3].id&&r[3].is?"animate-spin":""))&&i(e,"class",l)},d(r){r&&y(e)}}}function Ke(t){let e;function n(s,c){return s[0].track?Gt:Kt}let l=n(t),r=l(t);return{c(){r.c(),e=vt()},m(s,c){r.m(s,c),$(s,e,c)},p(s,c){l===(l=n(s))&&r?r.p(s,c):(r.d(1),r=l(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&y(e),r.d(s)}}}function Jt(t){let e,n,l,r,s,c,u,d,o,f=t[0].name+"",h,g,w,_,v,L,j,E=t[0].description+"",S,C,O,U,W,x,k,T,D,te=t[4]&&Object.keys(t[1]).length>0,oe,be;function ne(b,H){return b[0].images.length>0?Nt:Dt}let N=ne(t),z=N(t);function A(b,H){return b[4]?Rt:Ht}let ce=A(t),m=ce(t);function P(b,H){return b[3].is?Wt:b[2].length>0?Ft:Vt}let I=P(t),G=I(t),R=t[2].length>0&&!t[3].is&&Fe(t),V=te&&We(t);return{c(){e=p("div"),n=p("div"),r=M(),s=p("div"),c=p("div"),z.c(),u=M(),d=p("div"),o=p("a"),h=B(f),g=M(),w=F("svg"),_=F("path"),L=M(),j=p("p"),S=B(E),C=M(),O=p("div"),U=p("button"),m.c(),W=M(),x=p("button"),G.c(),T=M(),R&&R.c(),D=M(),V&&V.c(),i(n,"class","h-full absolute backdrop-invert brightness-50 left-0 top-0 rounded-md"),ge(n,"width",t[5]/100*90+"vw"),n.hidden=l=!t[3].is,i(c,"class","col-span-1 flex flex-col items-center justify-center"),i(_,"stroke-linecap","round"),i(_,"stroke-linejoin","round"),i(_,"d","M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"),i(w,"xmlns","http://www.w3.org/2000/svg"),i(w,"fill","none"),i(w,"viewBox","0 0 24 24"),i(w,"stroke-width","1.5"),i(w,"stroke","currentColor"),i(w,"class","w-4 h-4 inline"),i(o,"class","hover:scale-110 duration-75 text-left line-clamp-1"),i(o,"href",v=t[0].external_urls.spotify),i(o,"target","_blank"),i(j,"class","text-xs line-clamp-1"),i(U,"class","bg-transparent text-white ring-1 p-1 ring-zinc-500"),i(x,"class","text-xs bg-aodPurple p-1"),x.disabled=k=t[3].is||t[2].length>0,i(O,"class","flex flex-row space-x-2"),i(d,"class","col-span-3 flex flex-col justify-center items-start"),i(s,"class","grid grid-cols-4 w-full gap-1"),i(e,"class","bg-gray-950 ring-1 ring-zinc-500 py-2 rounded-md w-[90vw] text-center relative transition-all duration-150")},m(b,H){$(b,e,H),a(e,n),a(e,r),a(e,s),a(s,c),z.m(c,null),a(s,u),a(s,d),a(d,o),a(o,h),a(o,g),a(o,w),a(w,_),a(d,L),a(d,j),a(j,S),a(d,C),a(d,O),a(O,U),m.m(U,null),a(O,W),a(O,x),G.m(x,null),a(O,T),R&&R.m(O,null),a(s,D),V&&V.m(s,null),oe||(be=[Z(U,"click",t[7]),Z(x,"click",t[9])],oe=!0)},p(b,[H]){H&32&&ge(n,"width",b[5]/100*90+"vw"),H&8&&l!==(l=!b[3].is)&&(n.hidden=l),N===(N=ne(b))&&z?z.p(b,H):(z.d(1),z=N(b),z&&(z.c(),z.m(c,null))),H&1&&f!==(f=b[0].name+"")&&ee(h,f),H&1&&v!==(v=b[0].external_urls.spotify)&&i(o,"href",v),H&1&&E!==(E=b[0].description+"")&&ee(S,E),ce!==(ce=A(b))&&(m.d(1),m=ce(b),m&&(m.c(),m.m(U,null))),I!==(I=P(b))&&(G.d(1),G=I(b),G&&(G.c(),G.m(x,null))),H&12&&k!==(k=b[3].is||b[2].length>0)&&(x.disabled=k),b[2].length>0&&!b[3].is?R?R.p(b,H):(R=Fe(b),R.c(),R.m(O,null)):R&&(R.d(1),R=null),H&18&&(te=b[4]&&Object.keys(b[1]).length>0),te?V?V.p(b,H):(V=We(b),V.c(),V.m(s,null)):V&&(V.d(1),V=null)},i:q,o:q,d(b){b&&y(e),z.d(),m.d(),G.d(),R&&R.d(),V&&V.d(),oe=!1,se(be)}}}function Qt(t,e,n){let l,r={},s=[],{track:c}=e;const u={is:!1,id:""};let d=!1,o=qt(0,{duration:1e3,easing:Tt});Ae(t,o,_=>n(5,l=_));const f=()=>{d==!1?(Object.keys(r).length==0&&h(),n(4,d=!0)):n(4,d=!1)},h=async()=>{const _=c.external_urls.spotify,L=new URL(_).pathname.split("/")[2];X("loading playlist info",!0,1);let j=await le.getPlaylistInfo(L);n(1,r=j)},g=()=>{s.forEach((_,v)=>{const L=URL.createObjectURL(_),j=document.createElement("a");j.href=L,j.download=`${c.name}-${v+1}.mp3`,j.click()})},w=async()=>{if(Object.keys(r).length==0&&await h(),!r.tracks)return;if(r.tracks.items.length==0){X("cannot download empty playlist");return}n(3,u.is=!0,u),o.set(0,{duration:1}),o.set(10,{duration:1e4});let _=r.tracks.items[0].track;le.getDownloadTrack(_.external_urls.spotify,"",!0).then(async v=>{if(v.success==!1){J(o,l=0,l),n(3,u.is=!1,u),X(`serverErr: ${v.info}`);return}const L=v.data.key;for(const[E,{track:S}]of r.tracks.items.splice(1).entries())S&&n(3,u.id=S.id,u),(await le.getDownloadTrack(S.external_urls.spotify,L,!1)).success==!1&&X(`failed downloading track (${S.name})`);await o.set(10);const j=setInterval(async()=>{let E=await le.getDownloadStatus(L);const S=E.data.filter(C=>C.status==="ready");if(J(o,l=S.length/E.data.length*40+10,l),S.length==E.data.length){clearInterval(j);for(let C=0;C<S.length;C++){let[O,U]=await le.getStreamPlaylist(L);if(!O){X(`failed streaming track (${c.name})`);continue}n(2,s=[...s,U]),J(o,l=(C+1)/S.length*50+50,l)}await o.set(100,{duration:500}),n(3,u.is=!1,u)}},2500)})};return t.$$set=_=>{"track"in _&&n(0,c=_.track)},[c,r,s,u,d,l,o,f,g,w]}class Xt extends ve{constructor(e){super(),we(this,e,Qt,Jt,ie,{track:0})}}const ye=Be({loggedIn:!1,user:{},playlists:{}});function Ge(t,e,n){const l=t.slice();return l[2]=e[n],l}function Yt(t){let e,n;return{c(){e=F("svg"),n=F("path"),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"class","w-[10vh] h-[10vh] rounded-full ring-aodBg ring-2")},m(l,r){$(l,e,r),a(e,n)},p:q,d(l){l&&y(e)}}}function Zt(t){let e,n,l;return{c(){e=p("img"),i(e,"loading","lazy"),he(e.src,n=t[0].user.images[1].url)||i(e,"src",n),i(e,"alt",l=`${t[0].user.display_name}'s profile picture`),i(e,"class","rounded-full h-[10vh] ring-aodBg ring-2 shadow-md shadow-black")},m(r,s){$(r,e,s)},p(r,s){s&1&&!he(e.src,n=r[0].user.images[1].url)&&i(e,"src",n),s&1&&l!==(l=`${r[0].user.display_name}'s profile picture`)&&i(e,"alt",l)},d(r){r&&y(e)}}}function Je(t){let e,n;return e=new Xt({props:{track:t[2]}}),{c(){$e(e.$$.fragment)},m(l,r){me(e,l,r),n=!0},p(l,r){const s={};r&1&&(s.track=l[2]),e.$set(s)},i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function en(t){let e,n,l,r,s,c,u=t[0].user.display_name+"",d,o,f,h=t[0].user.followers.total+"",g,w,_=t[0].playlists.total+"",v,L,j,E,S=t[0].user.id+"",C,O,U,W,x,k,T,D,te,oe;function be(m,P){return m[0].user.images.length==2?Zt:Yt}let ne=be(t),N=ne(t),z=Le(t[0].playlists.items),A=[];for(let m=0;m<z.length;m+=1)A[m]=Je(Ge(t,z,m));const ce=m=>Q(A[m],1,1,()=>{A[m]=null});return{c(){e=p("div"),n=p("div"),l=p("div"),N.c(),r=M(),s=p("div"),c=p("p"),d=B(u),o=M(),f=p("p"),g=B(h),w=B(" followers, "),v=B(_),L=B(" playlists"),j=M(),E=p("p"),C=B(S),O=M(),U=p("div"),W=p("button"),W.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.5em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"></path></svg>logout',x=M(),k=p("div"),T=p("div");for(let m=0;m<A.length;m+=1)A[m].c();i(c,"class","font-semibold"),ge(c,"text-shadow","4px 3px 8px rgba(0,0,0,1)"),i(f,"class","text-xs"),i(E,"class","text-xs"),i(s,"class","flex flex-col justify-center items-start"),i(l,"class","flex flex-row items-center justify-center space-x-5"),i(W,"class","text-sm p-0.5 bg-red-500 text-white"),i(n,"class","flex flex-row justify-center items-center h-[13vh] space-x-4 bg-gradient-to-t from-gray-950 via-zinc-500 to-zinc-500 w-[90vw] rounded-t-xl ring-1 ring-zinc-500"),i(T,"class","flex flex-col justify-center items-center w-full space-y-2 pb-1"),i(k,"class","h-[67vh] overflow-y-scroll w-[100vw]"),i(e,"class","flex flex-col items-center -space-y-1")},m(m,P){$(m,e,P),a(e,n),a(n,l),N.m(l,null),a(l,r),a(l,s),a(s,c),a(c,d),a(s,o),a(s,f),a(f,g),a(f,w),a(f,v),a(f,L),a(s,j),a(s,E),a(E,C),a(n,O),a(n,U),a(U,W),a(e,x),a(e,k),a(k,T);for(let I=0;I<A.length;I+=1)A[I]&&A[I].m(T,null);D=!0,te||(oe=Z(W,"click",t[1]),te=!0)},p(m,[P]){if(ne===(ne=be(m))&&N?N.p(m,P):(N.d(1),N=ne(m),N&&(N.c(),N.m(l,r))),(!D||P&1)&&u!==(u=m[0].user.display_name+"")&&ee(d,u),(!D||P&1)&&h!==(h=m[0].user.followers.total+"")&&ee(g,h),(!D||P&1)&&_!==(_=m[0].playlists.total+"")&&ee(v,_),(!D||P&1)&&S!==(S=m[0].user.id+"")&&ee(C,S),P&1){z=Le(m[0].playlists.items);let I;for(I=0;I<z.length;I+=1){const G=Ge(m,z,I);A[I]?(A[I].p(G,P),K(A[I],1)):(A[I]=Je(G),A[I].c(),K(A[I],1),A[I].m(T,null))}for(st(),I=z.length;I<A.length;I+=1)ce(I);it()}},i(m){if(!D){for(let P=0;P<z.length;P+=1)K(A[P]);D=!0}},o(m){A=A.filter(Boolean);for(let P=0;P<A.length;P+=1)Q(A[P]);D=!1},d(m){m&&y(e),N.d(),nt(A,m),te=!1,oe()}}}function tn(t,e,n){let l;return Ae(t,ye,s=>n(0,l=s)),[l,()=>{localStorage.removeItem("cartier-userid"),J(ye,l.loggedIn=!1,l)}]}class nn extends ve{constructor(e){super(),we(this,e,tn,en,ie,{})}}function ln(t){let e,n;return e=new nn({}),{c(){$e(e.$$.fragment)},m(l,r){me(e,l,r),n=!0},p:q,i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function rn(t){let e,n;return e=new Bt({props:{handleUsername:t[1]}}),{c(){$e(e.$$.fragment)},m(l,r){me(e,l,r),n=!0},p:q,i(l){n||(K(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function sn(t){let e;return{c(){e=p("span"),e.textContent="PROD",i(e,"class","rounded-sm p-0.5 bg-blue-600")},m(n,l){$(n,e,l)},d(n){n&&y(e)}}}function on(t){let e,n,l,r,s,c,u,d,o,f,h,g,w,_,v,L,j,E;const S=[rn,ln],C=[];function O(k,T){return k[0].loggedIn==!1?0:1}o=O(t),f=C[o]=S[o](t);function U(k,T){return sn}let x=U()(t);return{c(){e=p("div"),n=M(),l=p("main"),r=p("div"),r.innerHTML='<div class="bg-aodPurple shadow-sm shadow-gray-950 rounded-b-md p-2 ml-2 h-full flex flex-col items-center justify-center"><span>reold&#39;s</span></div> <p class="text-3xl">Cartier Manager</p>',s=M(),c=p("div"),u=p("div"),d=M(),f.c(),h=M(),g=p("div"),w=p("p"),x.c(),_=B(`
      Built with ❤️ by
      `),v=p("a"),v.textContent="reold",L=B(`.
      `),j=p("a"),j.textContent="Report an error",i(e,"class","bg-black opacity-75 p-1 rounded-md w-[80vw] max-w-[90vw] z-50"),ge(e,"display","none"),i(r,"class","flex flex-row items-center justify-evenly font-bold h-[10vh] pb-2 bg-gray-950 ring-1 ring-zinc-500 shadow-xl"),i(u,"class","absolute left-0 top-0 w-full flex flex-col items-center justify-center space-y-1 text-xs"),i(c,"class","relative w-full flex flex-col items-center justify-center h-[85vh] bg-gradient-to-t from-gray-950 via-[#203A43] to-gray-950"),i(v,"href","https://github.com/reold"),i(v,"target","_blank"),i(v,"class","text-blue-600"),i(j,"href","https://x.com/redicrafty"),i(j,"target","_blank"),i(j,"class","text-blue-600"),i(g,"class","w-full h-[5vh] bg-gray-950 text-sm flex flex-col items-center justify-center"),i(l,"class","w-screen h-screen text-white text-xl select-none text-center")},m(k,T){$(k,e,T),t[2](e),$(k,n,T),$(k,l,T),a(l,r),a(l,s),a(l,c),a(c,u),t[3](u),a(c,d),C[o].m(c,null),a(l,h),a(l,g),a(g,w),x.m(w,null),a(w,_),a(w,v),a(w,L),a(w,j),E=!0},p(k,[T]){let D=o;o=O(k),o===D?C[o].p(k,T):(st(),Q(C[D],1,1,()=>{C[D]=null}),it(),f=C[o],f?f.p(k,T):(f=C[o]=S[o](k),f.c()),K(f,1),f.m(c,null))},i(k){E||(K(f),E=!0)},o(k){Q(f),E=!1},d(k){k&&(y(e),y(n),y(l)),t[2](null),t[3](null),C[o].d(),x.d()}}}let ze,ot;const X=(t,e=!1,n=3)=>{const l=ot.cloneNode(!0);l.innerHTML=e?`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.2em] animate-spin inline aspect-square mr-1" > <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" /> </svg>${t}`:t,l.style.display="block",ze.appendChild(l),setTimeout(()=>{ze.removeChild(l)},n*1e3)};function cn(t,e,n){let l;Ae(t,ye,u=>n(0,l=u));const r=u=>{le.getUserInfo(u).then(d=>{if(d.success==!1){X("something went wrong!");return}J(ye,l={...l,...d.data},l),J(ye,l.loggedIn=!0,l)})};function s(u){Me[u?"unshift":"push"](()=>{ot=u})}function c(u){Me[u?"unshift":"push"](()=>{ze=u})}return[l,r,s,c]}class an extends ve{constructor(e){super(),we(this,e,cn,on,ie,{})}}new an({target:document.getElementById("app")});
